<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>S0okJu.dev</title><link>https://s0okju.github.io/</link><description>Recent content on S0okJu.dev</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Wed, 09 Oct 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://s0okju.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>ì™œ TodoPoint í”„ë¡œì íŠ¸ë¥¼ ì‹¤íŒ¨í–ˆëŠ”ê°€?</title><link>https://s0okju.github.io/p/todopoint-final-review/</link><pubDate>Wed, 09 Oct 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/todopoint-final-review/</guid><description>&lt;h2 id="todopoint-í”„ë¡œì íŠ¸ì—-ëŒ€í•œ-ì†Œê°œ">TodoPoint í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì†Œê°œ
&lt;/h2>&lt;p>Todopointë€ ë¬¸ì ê·¸ëŒ€ë¡œ í•  ì¼ì„ ì™„ìˆ˜í•˜ë©´ í¬ì¸íŠ¸ë¥¼ ì§€ê¸‰í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì…ë‹ˆë‹¤. ê³„íšì„ ì œëŒ€ë¡œ ì™„ìˆ˜í•˜ì§€ ëª»í•œ ì‚¬ëŒë“¤ì—ê²Œ ê°•ì œì„±ì„ ë¶€ì—¬í•˜ê³ ì ê¸°íší•œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/todopoint-final-review/image.png"
width="986"
height="876"
srcset="https://s0okju.github.io/p/todopoint-final-review/image_hu13186140440509974875.png 480w, https://s0okju.github.io/p/todopoint-final-review/image_hu1891924287277266395.png 1024w"
loading="lazy"
alt="ì´ˆê¸°ì— ê¸°íší•œ êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="112"
data-flex-basis="270px"
>&lt;/p>
&lt;p>í”„ë¡œì íŠ¸ ê¸°íšì˜ ì°½ì˜ì„±ì˜ ë³„ê°œë¡œ ê°œì¸ì˜ MSAì— ëŒ€í•œ í•™ìŠµê³¼ ê¸°ìˆ  ì—­ëŸ‰ì„ í–¥ìƒí•˜ê¸° ìœ„í•´ ì‹œì‘í•œ í”„ë¡œì íŠ¸ì˜€ìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‘ë™ì‹œí‚¤ê¸° ìœ„í•´ ì¿ ë²„ë„¤í‹°ìŠ¤ í™ˆ ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê¸°ë„ í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ 3ê°œì›”ì´ë€ ê¸´ ì‹œê°„ ë™ì•ˆ ì˜ˆìƒì¹˜ ëª»í•œ ì‚½ì§ˆë¡œ ì œëŒ€ë¡œ ë§ˆë¬´ë¦¬í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì§€ê¸ˆë¶€í„° í”„ë¡œì íŠ¸ ì‹¤íŒ¨ì˜ ì›ì¸ì„ ì†Œê°œí•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì˜ëª»ëœ-ì–¸ì–´-ì„ íƒ">ì˜ëª»ëœ ì–¸ì–´ ì„ íƒ
&lt;/h2>&lt;p>ì €ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì œì‘í•˜ë©´ì„œ Goë¼ëŠ” ì–¸ì–´ì™€ Gin ì›¹ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ê·¸ë•Œ ë‹¹ì‹œ Go ì–¸ì–´ë¥¼ í•œë²ˆë„ ëª»í•´ë´¤ìŠµë‹ˆë‹¤. ë‹¨ìˆœí•˜ê²Œ í•´ë³´ê³  ì‹¶ì€ ì–¸ì–´ë¼ì„œ ì„ íƒí–ˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì„ íƒìœ¼ë¡œ ì¸í•´ ì˜ˆìƒì¹˜ ëª»í•œ ì‹œê°„ì„ ì“°ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="ìƒˆë¡œìš´-ê¸°ìˆ ì„-ì‚¬ìš©í• ë•ŒëŠ”-ê³ ë¯¼í•´ë³´ì">ìƒˆë¡œìš´ ê¸°ìˆ ì„ ì‚¬ìš©í• ë•ŒëŠ” ê³ ë¯¼í•´ë³´ì
&lt;/h3>&lt;p>ì•ì„œ ë§í–ˆë“¯ì´ ê·¸ë•Œ ë‹¹ì‹œ Goì–¸ì–´ëŠ” ì²˜ìŒì´ì—ˆìŠµë‹ˆë‹¤. ì¤€ë¹„ë‹¨ê³„ë¡œ ê°„ë‹¨í•˜ê²Œ Go ì–¸ì–´ ë¬¸ë²•ë§Œ ìµíˆê³  ë°”ë¡œ Ginì„ ì“°ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;br>
GoëŠ” ë…íŠ¹í•œ ë¬¸ë²• ì²´ê³„ë¥¼ ê°€ì§€ê³  ìˆì–´ ë‹¤ë¥¸ ì–¸ì–´ì— ë¹„í•´ ì‘ìš©í•˜ê¸° ì–´ë ¤ì› ìŠµë‹ˆë‹¤. íŠ¹íˆ êµ¬ì¡°ë¥¼ ì§œëŠ”ë° ì–´ë ¤ì›€ì„ ê²ªì—ˆìŠµë‹ˆë‹¤. ê°ì²´ì§€í–¥ ì–¸ì–´ì§€ë§Œ í”íˆ ì•Œê³  ìˆëŠ” í´ë˜ìŠ¤ ê¸°ë°˜ ê°ì²´ì§€í–¥ íŒ¨í„´ê³¼ëŠ” ë‹¤ë¥´ë‹¤ëŠ” ì ì´ ì–´ë ¤ì› ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//go:generate mockery --name Store --case underscore
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">Store&lt;/span> &lt;span class="kd">interface&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">info&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UserInfo&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">FindOne&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">uid&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Me&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">Update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">uid&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">me&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Me&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">UserService&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">store&lt;/span> &lt;span class="nx">Store&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewUserService&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">store&lt;/span> &lt;span class="nx">Store&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">UserService&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">UserService&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">store&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">store&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">UserService&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">uid&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">me&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Me&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">httputils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">BaseResponse&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">httputils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NetError&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">uid&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">me&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">httputils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewNetError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UpdateFailed&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">httputils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewSuccessBaseResponse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">nil&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê²°êµ­ ê¹ƒí—ˆë¸Œì— ë² ìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì°¾ì•„ë‹¤ë‹ˆë©´ì„œ ëŒ€ëµ í•œë‹¬ ë™ì•ˆ ì½”ë“œë¥¼ 2ë²ˆ ìƒˆë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì£¼ë¡œ Error êµ¬ì¡°ì²´, íŒ¨í‚¤ì§€ êµ¬ì¡° ë“± ë¶€ì¡±í•˜ë‹¤ê³  ìƒê°í•˜ëŠ” ë¶€ë¶„ì„ ì „ë¶€ ë‹¤ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/todopoint-final-review/image-1.png"
width="924"
height="584"
srcset="https://s0okju.github.io/p/todopoint-final-review/image-1_hu12811250395620581806.png 480w, https://s0okju.github.io/p/todopoint-final-review/image-1_hu10126210423897698024.png 1024w"
loading="lazy"
alt="ë²„ì „ì´ 2ê°œì¸ ì„œë¹„ìŠ¤"
class="gallery-image"
data-flex-grow="158"
data-flex-basis="379px"
>&lt;/p>
&lt;p>ê°ê°ì˜ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“œëŠ” ê²ƒì€ ì–´ë µì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ &lt;strong>ê³µí†µ ëª¨ë“ˆ&lt;/strong>ì´ë¼ëŠ” ê²ƒì„ ë§Œë“¤ë ¤ê³  í–ˆì„ë•Œ ëª¨ë“  ê²ƒì´ ê¼¬ì´ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.
ê³µí†µ ëª¨ë“ˆì—ëŠ” í•„ìš”í•œ ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ë‚˜ ì „ì²´ì ìœ¼ë¡œ í†µì¼ëœ í˜•ì‹ì˜ êµ¬ì¡°ì²´(http responseê°’, ì˜¤ë¥˜ ë©”ì„¸ì§€ íƒ€ì… ë“±)ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
GoëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì €ì¥ì†Œë¡œ githubë¥¼ ì£¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. ê³µí†µ ëª¨ë“ˆì„ githubì— ì—…ë¡œë“œí•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¹Œë“œí• ë•Œë§ˆë‹¤ ì œì‘í•œ ê³µí†µ ëª¨ë“ˆì„ ë‹¤ìš´ë¡œë“œ ë°›ê³  ì‚¬ìš©í•´ì•¼ í• ê¹Œìš”? ê°œë°œ ì´ˆê¸° ë‹¨ê³„ë¼ ê³µí†µ ëª¨ë“ˆ ìˆ˜ì •ì´ ì¦ìŠµë‹ˆë‹¤. ì¦‰, ìˆ˜ì •ì‚¬í•­ì„ ë°˜ì˜í• ë•Œ ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ë•Œ ë‹¹ì‹œ &amp;ldquo;ê³µí†µ ëª¨ë“ˆì´ í•„ìš”í•œê°€?&amp;ldquo;ì— ëŒ€í•´ ë§ì´ ìƒê°í–ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì €ëŠ” ê°œì¸ì ìœ¼ë¡œ í•„ìš”í•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ ë‹¤ë¥´ê² ì§€ë§Œ ê³µí†µì ì¸ ë¶€ë¶„ì´ ë§ì„ìˆ˜ë¡ ëª¨ë“ˆí™”í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ì´ë¼ê³  ìƒê°í–ˆê¸° ë•Œë¬¸ì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŒ€ì‹ ì–´ëŠì •ë„ êµ¬ì¡°ê°€ ì™„ì„±ëœ ìƒíƒœì—ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤ê³  ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì™¸ë¶€ ë‹¤ìš´ë¡œë“œ ì™¸ì— ë‹¤ë¥¸ ë°©ë²•ì´ ìˆì—ˆìŠµë‹ˆë‹¤. GoëŠ” Workspaceë¼ëŠ” ê°œë…ì´ ìˆìœ¼ë©° go.work íŒŒì¼ì„ í†µí•´ ëª…ì‹œì ìœ¼ë¡œ ëª¨ë“ˆì„ í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mod" data-lang="mod">&lt;span class="line">&lt;span class="cl">&lt;span class="n">go&lt;/span> &lt;span class="mf">1.22&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">use&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">common&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">..&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">database&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">d7mysql&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">..&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">database&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">d7redis&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>WorkspaceëŠ” ë¡œì»¬ ì‚¬ìš©ì— ì í•©í•˜ë‹¤ëŠ” ì˜ê²¬ì´ ìˆìŠµë‹ˆë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;/blockquote>
&lt;p>ë§Œë“  Go ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” Dockerfileë¡œ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.&lt;br>
ìš°ì„  go ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë¹Œë“œí•˜ê¸° ìœ„í•´ì„œëŠ” ê³µí†µ ëª¨ë“ˆì„ ëª¨ë‘ ë³µì‚¬í•˜ê³  &lt;code>go work use&lt;/code> ë¥¼ ìˆ˜í–‰í•œ í›„ &lt;code>$GOPATH/src&lt;/code>ì— ëª¨ë“ˆì„ ì €ì¥í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ê°œë°œ í™˜ê²½ê³¼ ë„ì»¤ ë‚´ë¶€ í™˜ê²½ì´ ë‹¬ë¼ì„œ ë„ì»¤ ë‚´ë¶€ì— go work useë¥¼ í•  ìˆ˜ ìˆë„ë¡ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì œì‘í•œ í›„ Dockerfileë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Dockerfile" data-lang="Dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Stage 1: Build modules&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="s"> golang:1.22 as modules-build&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> modules/v2/common /modules/common&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> modules/v2/database/d7redis /modules/database/d7redis&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> modules/v2/database/d7mysql /modules/database/d7mysql&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">WORKDIR&lt;/span>&lt;span class="s"> /app&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> scripts/init_workspace.sh /app/init_workspace.sh&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> auth-service/v2/workspace.packages.json /app/workspace.packages.json&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">RUN&lt;/span> apt-get update &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> apt-get install -y jq&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">RUN&lt;/span> chmod +x init_workspace.sh &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> ./init_workspace.sh&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">RUN&lt;/span> cat go.work&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> auth-service/v2 /app&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> auth-service/v2/go.mod /app/go.mod&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> auth-service/v2/go.sum /app/go.sum&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">RUN&lt;/span> go mod download&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">RUN&lt;/span> &lt;span class="nv">CGO_ENABLED&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">GOOS&lt;/span>&lt;span class="o">=&lt;/span>linux go build -a -installsuffix cgo -o /bin/main main.go&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="c"># stage 2&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="s"> scratch&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> --from&lt;span class="o">=&lt;/span>modules-build /bin/main /bin/main&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">EXPOSE&lt;/span>&lt;span class="s"> 3001&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;/bin/main&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê²°êµ­ í•´ê²°í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ê²½ë¡œ ë¬¸ì œ, ëª¨ë“ˆì´ ì œëŒ€ë¡œ ì„¤ì •ë˜ì§€ ì•ŠëŠ” ë¬¸ì œ ë“± ì›ì¸ì€ ë‹¤ì–‘í–ˆìŠµë‹ˆë‹¤.&lt;br>
í•´ê²°ì±…ì„ ëª¨ìƒ‰í•˜ë‹¤ê°€ ëŠë‚€ê±´ &amp;ldquo;ë‚´ê°€ Goë¥¼ ì ì ˆí•˜ê²Œ ì‚¬ìš©í•œ ê²ƒì´ ë§ë‚˜?&amp;rdquo; ì˜€ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ê±°ìŠ¬ëŸ¬ ì˜¬ë¼ê°€ &lt;strong>MSAë¥¼ ì±„íƒí•œ ê²ƒì´ ë¬¸ì œì˜€ë‹¤ëŠ” ê²°ë¡ ì— ë„ë‹¬&lt;/strong>í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤-í•˜ì§€-ë§ì•˜ì–´ì•¼-í–ˆë‹¤">ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í•˜ì§€ ë§ì•˜ì–´ì•¼ í–ˆë‹¤.
&lt;/h2>&lt;p>ê²°êµ­ ëª¨ë“  ì›ì¸ì€ &lt;strong>ì•„ë¬´ ìƒê° ì—†ì´ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ë„ì…&lt;/strong>í–ˆê¸° ë•Œë¬¸ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. ê·¸ë•Œ ë‹¹ì‹œ MSAë¼ê³  ë¶ˆë¦¬ëŠ” ìš©ì–´ê°€ íŠ¸ë Œë“œì²˜ëŸ¼ ë– ì˜¬ëê³ , ê·œëª¨ê°€ ìˆëŠ” ê¸°ì—…ì´ í•´ë‹¹ ëŠ¥ë ¥ì„ ìš”êµ¬í•˜ë©´ì„œ ëŠ¥ë ¥ì´ í•„ìˆ˜ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.&lt;br>
&lt;strong>ì™œ ê·œëª¨ê°€ ìˆëŠ” ê¸°ì—…ì´ MSAë¥¼ ì‚¬ìš©í•˜ëŠ”ê°€?&lt;/strong> ì— ëŒ€í•œ ì—­ì§ˆë¬¸ì„ ìƒê°í•˜ì§€ ëª»í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;br>
ê¸°ì—…ì´ MSAë¥¼ ì±„íƒí•œ ì´ìœ ëŠ” &lt;strong>ì„œë¹„ìŠ¤ ê°„ ê²°í•©ë„ë¥¼ ë‚®ì¶° ìš”êµ¬ì‚¬í•­ì— ëŒ€í•œ ë¹ ë¥¸ ëŒ€ì²˜&lt;/strong>í•˜ê¸° ìœ„í•´ì„œ ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.
ì œ í”„ë¡œì íŠ¸ëŠ” MSAë¡œ í• ë§Œí¼ í° ì„œë¹„ìŠ¤ê°€ ì•„ë‹ˆì˜€ê³  ì´ë¥¼ êµ¬í˜„í•  ëŠ¥ë ¥ì„ ê°€ì§€ê³  ìˆì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì¦‰ &lt;strong>ì˜¤ë²„ ì—”ì§€ë‹ˆì–´ë§&lt;/strong>ì„ í•œ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì‹¤íŒ¨-ì´í›„ì˜-ìƒˆë¡œìš´-ì‹œì‘">ì‹¤íŒ¨ ì´í›„ì˜ ìƒˆë¡œìš´ ì‹œì‘
&lt;/h2>&lt;p>ì´ í”„ë¡œì íŠ¸ë¥¼ ìˆ˜í–‰í•˜ë©´ì„œ ë§ì€ ì‹œê°„ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ë…¸ë ¥ ëì— ì™„ì„±ëœ ê²ƒì´ í•˜ë‚˜ ì—†ìœ¼ë‹ˆ í•œí¸ìœ¼ë¡œëŠ” ì•„ì‰½ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.&lt;br>
í•˜ì§€ë§Œ ì´ í”„ë¡œì íŠ¸ê°€ ì €ì—ê²ŒëŠ” ìƒˆë¡œìš´ ì‹œì‘ì„ ì•Œë ¸ë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;br>
&lt;strong>&amp;ldquo;ê¸°ì´ˆë¶€í„° ê³µë¶€í•  ì˜ˆì •ì´ë¼ë©´ ê¸°ë³¸ì ì¸ êµ¬ì„±ë¶€í„° ê³µë¶€í•´ë³´ì.&amp;rdquo;&lt;/strong> ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. ì´í›„ë¡œ ì €ëŠ” ê¸°ì´ˆë¶€í„° ê³µë¶€í•  ìˆ˜ ìˆë„ë¡ ì‘ì€ í”„ë¡œì íŠ¸ë¥¼ ê¸°íší•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://www.reddit.com/r/golang/comments/19517hq/what_are_you_using_go_workspaces_for_if_at_all/" target="_blank" rel="noopener"
>https://www.reddit.com/r/golang/comments/19517hq/what_are_you_using_go_workspaces_for_if_at_all/&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>ì„œë²„ êµ¬ì¶•ê¸° - 4. Kolla-ansible ì„¤ì¹˜ ì‹œ ë§ˆì£¼í•œ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ</title><link>https://s0okju.github.io/p/server-setup-4/</link><pubDate>Tue, 01 Oct 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/server-setup-4/</guid><description>&lt;h2 id="devstackì˜-í•œê³„">DevStackì˜ í•œê³„
&lt;/h2>&lt;p>DevStackìœ¼ë¡œ Openstackì„ ë°°í¬í•˜ë©´ì„œ í° ë¬¸ì œì ì„ ëŠë¼ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Nova Instanceì— ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì–´ë µë‹¤.&lt;/li>
&lt;li>ë¦¬ì†ŒìŠ¤ë¥¼ ì¶”ê°€ ë° ì‚­ì œí•˜ëŠ” ê²ƒì´ ì–´ë µë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ìœ„ì˜ ë¬¸ì œì ì€ &lt;strong>ë„¤íŠ¸ì›Œí¬ë¡œ ì¸í•´ ë°œìƒ&lt;/strong>í•œ ê²ƒì…ë‹ˆë‹¤.
ì˜ˆë¡œ ì œê°€ Nova Instanceë¥¼ ìƒì„±í•´ Floating ipë¥¼ í• ë‹¹í•œë‹¤ê³  ê°€ì •í•´ ë´…ì‹œë‹¤. External Networkì˜ IP ë²”ìœ„ê°€ ì™¸ë¶€ì™€ ì—°ê²°ì´ ë¶ˆê°€ëŠ¥í•´ ì§ì ‘ì ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤. ê·¸ëŸ¼ sshë¡œ ì„œë²„ì— ì§ì ‘ ì ‘ì†í•´ì„œ ê´€ë¦¬í•˜ëŠ” ë°©ì•ˆë„ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¼ Openstackì„ ì™œ ì“´ê±°ì§€? í‚¤ëŠ” ì–´ë–»ê²Œ ê´€ë¦¬í•˜ì§€? ë“± ë‹¤ì–‘í•œ ê¼¬ë¦¬ ì§ˆë¬¸ì´ ë”°ë¼ì˜¤ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="kolla-ansible">Kolla Ansible
&lt;/h2>&lt;p>ë°©ì•ˆì„ ëª¨ìƒ‰í•˜ëŠ” ì¤‘ Openstackì€ DevStack ì´ì™¸ì—ë„ ë‹¤ì–‘í•œ ë°°í¬ ë°©ì•ˆì´ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-4/image.png"
width="1083"
height="609"
srcset="https://s0okju.github.io/p/server-setup-4/image_hu6281986499923772551.png 480w, https://s0okju.github.io/p/server-setup-4/image_hu17404451910012511713.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://docs.openstack.org/contributors/ko_KR/common/introduction.html"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;blockquote>
&lt;p>Kolla Ansibleì´ë€ Ansible í”Œë ˆì´ë¶ì„ í†µí•´ OpenStackì˜ ëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ &lt;strong>ì»¨í…Œì´ë„ˆë¡œ ë°°í¬&lt;/strong>í•˜ê³  ìœ ì§€ ë³´ìˆ˜í•˜ë©° ìš´ì˜í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” í”„ë¡œì íŠ¸ì´ë‹¤. ì´ë¥¼ í†µí•´ ë³µì¡í•œ ì„¤ì¹˜ ê³¼ì •ê³¼ ìˆ˜ë™ ì„¤ì •ì„ ìµœì†Œí™”í•˜ê³ , ì¬í˜„ ê°€ëŠ¥í•œ í™˜ê²½ì„ ì œê³µí•˜ì—¬ íš¨ìœ¨ì ì´ë©° ì•ˆì •ì ì¸ í´ë¼ìš°ë“œ ì¸í”„ë¼ ìš´ì˜ì„ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;/blockquote>
&lt;p>ì¦‰ ìš°ë¦¬ê°€ ì„¤ì •í•œ ì‹œìŠ¤í…œ ì„œë¹„ìŠ¤ë¥¼ ì»¨í…Œì´ë„ˆ í˜•íƒœë¡œ êµ¬ì¶•ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-4/image-1.png"
width="983"
height="925"
srcset="https://s0okju.github.io/p/server-setup-4/image-1_hu7892018536490297472.png 480w, https://s0okju.github.io/p/server-setup-4/image-1_hu5755813560970344651.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://velog.io/@larshavin/Kolla-Ansible%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-OpenStack-%EC%84%A4%EC%B9%98-1"
class="gallery-image"
data-flex-grow="106"
data-flex-basis="255px"
>&lt;/p>
&lt;h2 id="ì„¤ì¹˜">ì„¤ì¹˜
&lt;/h2>&lt;blockquote>
&lt;p>ì„¤ì¹˜ëŠ” &lt;a class="link" href="https://parandol.tistory.com/72" target="_blank" rel="noopener"
>íŒŒë€ëŒë‹˜ì˜ ë¸”ë¡œê·¸ - Kolla-ansibleë¡œ Openstack All-in-one ì„¤ì¹˜í•˜ê¸°(Installing Openstack All-in-one with Kolla-ansible)&lt;/a>ë¥¼ ì ê·¹ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h3 id="ì„¤ì¹˜-ëª©ë¡">ì„¤ì¹˜ ëª©ë¡
&lt;/h3>&lt;p>Kolla-ansibleì˜ ì¥ì ì€ ì›í•˜ëŠ” ë¦¬ì†ŒìŠ¤ ì„ íƒê³¼ ì„¤ì •ì´ ì‰½ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ëŠ” ê¸°ë³¸ì ì¸ ë¦¬ì†ŒìŠ¤ë¥¼ ì„ íƒí•˜ì—¬ ì„¤ì¹˜í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;strong>ì„¤ì¹˜í•  ë¦¬ì†ŒìŠ¤&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Keystone&lt;/li>
&lt;li>Glance&lt;/li>
&lt;li>Nova&lt;/li>
&lt;li>Neutron&lt;/li>
&lt;li>Cinder&lt;/li>
&lt;li>Swift&lt;/li>
&lt;li>Horizon&lt;/li>
&lt;/ul>
&lt;h3 id="all-in-one-or-node">all-in-one or node?
&lt;/h3>&lt;p>ì˜¤í”ˆìŠ¤íƒì€ í¬ê²Œ 3ê°€ì§€ ë…¸ë“œê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Controller node : ì „ì²´ ì˜¤í”ˆìŠ¤íƒ ì„œë¹„ìŠ¤ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì»¨íŠ¸ë¡¤ëŸ¬ ê´€ë¦¬ ë° ë…¸ë“œ ê°„ ì—°ê²°ì„ ì˜í•´ì„œëŠ” ìµœì†Œí•œ 2ê°œ ì´ìƒì˜ ì¸í„°ë„· ì¸í„°í˜ì´ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤.&lt;/li>
&lt;li>Compute node : Nova ê¸°ë°˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‘ë™í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” í•˜ì´í¼ë°”ì´ì €ë¥¼ ì‹¤í–‰í•˜ëŠ” ë…¸ë“œì…ë‹ˆë‹¤.&lt;/li>
&lt;li>Network node : ë‹¤ì–‘í•œ ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ ì—ì´ì „íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©°, ì´ë¥¼ ê°€ìƒ ë„¤íŠ¸ì›Œí¬ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-4/image-2.png"
width="626"
height="686"
srcset="https://s0okju.github.io/p/server-setup-4/image-2_hu4232316961094443982.png 480w, https://s0okju.github.io/p/server-setup-4/image-2_hu13564817206507154081.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://docs.oracle.com/cd/E36784_01/html/E54155/archover.html"
class="gallery-image"
data-flex-grow="91"
data-flex-basis="219px"
>&lt;/p>
&lt;p>ì—¬ëŸ¬ ê°€ì´ë“œë¥¼ ë³´ë©´ ë…¸ë“œë“¤ì€ ë¬¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì„œë²„ ë‚´ ê°€ìƒë¨¸ì‹ ì„ êµ¬ì¶•í•˜ì—¬ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë³µì¡í•œ ê´€ê³„ë¡œ &lt;strong>ì„œë¹„ìŠ¤ ê¸°ëŠ¥ì„ í•˜ë‚˜ì˜ í˜¸ìŠ¤íŠ¸ì— ì„¤ì¹˜í•  ìˆ˜ ìˆëŠ” all-in-one&lt;/strong>&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>ì„ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="openstack-ë„¤íŠ¸ì›Œí¬">Openstack ë„¤íŠ¸ì›Œí¬
&lt;/h2>&lt;p>&lt;strong>ê°€ì¥ ì–´ë µê³  ì•ìœ¼ë¡œ ê³„ì† ê³µë¶€í•´ì•¼ í•˜ëŠ” ë¶„ì•¼&lt;/strong>ì¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì™„ì „íˆ ì´í•´í•œ ê²ƒì€ ì•„ë‹ˆì§€ë§Œ ì•Œê³  ìˆëŠ” ê·¸ëŒ€ë¡œ ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì˜¤í”ˆ ìŠ¤íƒì—ì„œ ë„¤íŠ¸ì›Œí¬ëŠ” Management, Tunnel, External ë„¤íŠ¸ì›Œí¬ê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Management Network : ê´€ë¦¬ìš© ë„¤íŠ¸ì›Œí¬ë¡œ ê° ì»´í¬ë„ŒíŠ¸ì™€ ê´€ë ¨ëœ APIë¥¼ í˜¸ì¶œí•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.&lt;/li>
&lt;li>Tunnel Network : vm instance ê°„ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì¶•í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.&lt;/li>
&lt;li>External Network : vm instanceê°€ ì¸í„°ë„·ê³¼ í†µì‹ í•˜ê¸° ìœ„í•œ ë„¤íŠ¸ì›Œí¬ì…ë‹ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ëŠ” í¬ê²Œ ë‘ ê°€ì§€ ì˜µì…˜ì´ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Provider Network : ê°€ìƒ ë„¤íŠ¸ì›Œí¬ë¥¼ ë¬¼ë¦¬ì  ë„¤íŠ¸ì›Œí¬ë¡œ ì—°ê²°í•©ë‹ˆë‹¤. ì¦‰ ë¬¼ë¦¬ì ì¸ ë„¤íŠ¸ì›Œí¬ê°€ vm ì¸ìŠ¤í„´ìŠ¤ê°€ í™œìš©í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ê°€ ë©ë‹ˆë‹¤.&lt;/li>
&lt;li>Self-Service Network : ì˜¤í”ˆìŠ¤íƒì„ ì‚¬ìš©í•˜ëŠ” ì‚¬ìš©ìê°€ ì§ì ‘ ìì‹ ë§Œì˜ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆëŠ” ë„¤íŠ¸ì›Œí¬ ì…ë‹ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>Provider ë„¤íŠ¸ì›Œí¬ëŠ” ë¶€í•˜ë¶„ì‚° ì„œë¹„ìŠ¤ í˜¹ì€ ë°©í™”ë²½ ì„œë¹„ìŠ¤ ë“± ê³ ê¸‰ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>ì œê°€ ì‚¬ìš©í•˜ëŠ” ì˜µì…˜ì€ ë¹„êµì  ê°„ë‹¨í•œ Provider Network ì…ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="í…ŒìŠ¤íŠ¸ìš©-openstack-ì„œë²„ì˜-ë„¤íŠ¸ì›Œí¬-ì ‘ê·¼-ë¬¸ì œ">í…ŒìŠ¤íŠ¸ìš© Openstack ì„œë²„ì˜ ë„¤íŠ¸ì›Œí¬ ì ‘ê·¼ ë¬¸ì œ
&lt;/h2>&lt;p>kolla-ansibleì—ì„œ ì œê³µí•´ì£¼ëŠ” &lt;code>globals.yml&lt;/code> ë¥¼ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤. í™˜ê²½ íŒŒì¼ì„ ë³´ë©´ Internal, External Networkë¡œ êµ¬ë¶„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.&lt;br>
network_interfaceëŠ” Internal networkì— í•´ë‹¹ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒìœ¼ë¡œ ì €ëŠ” ì™¸ë¶€ ì¸í„°ë„·ê³¼ ì—°ê²°ë˜ì§€ ì•ŠëŠ” &lt;code>enp2s0&lt;/code> ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ë°˜ë©´ neutron_external_interfaceëŠ” providerë¡œ ì œê³µí•  ì¸í„°í˜ì´ìŠ¤ë¡œ ì¸í„°ë„·ê³¼ ì—°ê²°í•  ìˆ˜ ìˆëŠ” &lt;code>enp3s0&lt;/code> ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c">##############################&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># Neutron - Networking Options&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">##############################&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># followed for other types of interfaces.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">network_interface&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;enp2s0&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">neutron_external_interface&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;enp3s0&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê·¸ë¦¼ì„ ê·¸ë ¤ë³´ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.&lt;br>
(ì•„ë˜ì˜ ê·¸ë¦¼ì€ &lt;code>172.17.0.250/24&lt;/code>ì´ ì•„ë‹ˆë¼ &lt;code>172.16.0.250/24&lt;/code> ì…ë‹ˆë‹¤. )&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-4/image-3.png"
width="504"
height="423"
srcset="https://s0okju.github.io/p/server-setup-4/image-3_hu13983546864251427236.png 480w, https://s0okju.github.io/p/server-setup-4/image-3_hu4321421939863526325.png 1024w"
loading="lazy"
alt="ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€"
class="gallery-image"
data-flex-grow="119"
data-flex-basis="285px"
>&lt;/p>
&lt;p>í•˜ì§€ë§Œ ì´ë²ˆ ì˜¤í”ˆìŠ¤íƒ ì„œë²„ëŠ” ì–´ë””ê¹Œì§€ë‚˜ ê°œì¸ìœ¼ë¡œë§Œ ì‚¬ìš©ë˜ëŠ” ê³µê°„ì…ë‹ˆë‹¤. ì¦‰ &lt;strong>í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¥¼ ì“°ëŠ” ê²ƒë„ ì € í˜¼ìì´ê³ , ê´€ë¦¬í•˜ëŠ” ê²ƒë„ ì € í˜¼ìì¸ ê²ƒì…ë‹ˆë‹¤&lt;/strong>. ê´€ë¦¬ë¥¼ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ ì ‘ì†(Internal Network)ë„, ì˜¤í”ˆìŠ¤íƒ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë„¤íŠ¸ì›Œí¬ ì ‘ì†(External Network)ë„ ê°€ëŠ¥í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ëŸ¬ë‚˜ ì €ëŠ” í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ì˜ APIë¥¼ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì„œë¡œ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­ì„ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-4/image-4.png"
width="615"
height="510"
srcset="https://s0okju.github.io/p/server-setup-4/image-4_hu13221316638916593638.png 480w, https://s0okju.github.io/p/server-setup-4/image-4_hu16394758169030640411.png 1024w"
loading="lazy"
alt="ë„¤íŠ¸ì›Œí¬ êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="120"
data-flex-basis="289px"
>&lt;/p>
&lt;p>ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ë¼ìš°íŒ… í…Œì´ë¸”ì„ ì„¤ì •í•´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤. ë¼ìš°í„°ì— ì§ì ‘ ì„¤ì •í•˜ëŠ” ë°©ë²•ê³¼ ìš´ì˜ì²´ì œì—ì„œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì´ ìˆëŠ”ë°, ë¬¼ë¦¬ì ìœ¼ë¡œ ë¼ìš°í„°ê°€ í•˜ë‚˜ë§Œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ìš´ì˜ì²´ì œì—ì„œ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ì €ëŠ” ip forwardë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>IP-Forwardë€ ì»¤ë„ ê¸°ë°˜ ë¼ìš°íŒ… í¬ì›Œë”©ìœ¼ë¡œ í•˜ë‚˜ì˜ ì¸í„°í˜ì´ìŠ¤ë¡œ ë“¤ì–´ì˜¨ íŒ¨í‚·ì„ ë‹¤ë¥¸ ì„œë¸Œë„·ì„ ê°€ì§„ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¡œ íŒ¨í‚·ì„ í¬ì›Œë”©ì‹œí‚¤ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Kernel parameter update&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo sysctl -w net.ipv4.conf.all.forwarding&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo sysctl net.ipv4.conf.all.forwarding net.ipv4.conf.all.forwarding &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>br-ex ì†¡ì‹ ë˜ì–´ enp2s0 ì¸í„°í˜ì´ìŠ¤ì— ìˆ˜ì‹ ë˜ëŠ” ê²ƒì„ í—ˆë½í•œë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>br-exì€ OpenVSwitch(OVS) ì ìš©ì‹œ ë¬¼ë¦¬ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì™€ ì§ì ‘ ì—°ê²°ë˜ëŠ” ê°€ìƒ ìŠ¤ìœ„ì¹˜ì…ë‹ˆë‹¤. ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ì—ì„œ ê°€ìƒ ë¨¸ì‹ ì„ ì ‘ê·¼í• ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo iptables -I FORWARD -i br-ex -o enp2s0 -j ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -nL FORWARD
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>í´ë¼ì´ì–¸íŠ¸ë„ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.&lt;br>
192.168.50.27ë¥¼ í†µí•´ 172.16.0.0/24(enp2s0)ì— ì ‘ê·¼í•œë‹¤ëŠ” routing ruleë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo route -n add 172.16.0.0/24 192.168.50.27
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì—¬ê¸°ì„œ ì™œ 192.168.50.27ë¥¼ í†µí•´ 172.16.0.0/24 ë„¤íŠ¸ì›Œí¬ì— ì ‘ê·¼í•œë‹¤ê³  ì„¤ì •í•œ ê²ƒì¼ê¹Œìš”?&lt;br>
ì˜¤í”ˆ ìŠ¤íƒ ì„œë²„ì—ì„œ ip_forwardë¥¼ ì‹œì¼°ìŠµë‹ˆë‹¤. ì¦‰ ì„œë²„ê°€ ë¼ìš°í„°ì˜ ì—­í• ì„ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë¼ìš°íŒ… ë£°ì„ ì„¤ì •í•  ë•Œì—ëŠ” 172.16.0.250/24ì— í¬ì›Œë”©ì„ ì‹œí‚¨ ì„œë²„ì˜ ip ì£¼ì†Œë¡œ ì„¤ì •í•´ì•¼ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì •ë¦¬">ì •ë¦¬
&lt;/h2>&lt;p>í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ Openstack ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. êµ¬ì¶• ì‹œ ìš”êµ¬ì‚¬í•­ì€ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë©´ì„œ ë¦¬ì†ŒìŠ¤ APIì— ì ‘ê·¼ ê°€ëŠ¥í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.
ì„œë¡œ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­ì„ ê°€ì ¸ ë¦¬ì†ŒìŠ¤ APIì— ì ‘ê·¼í•˜ì§€ ëª»í–ˆìœ¼ë‚˜ ì„œë²„ì— ip forwardë¥¼ ìˆ˜í–‰í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë¬¸ì œë¥¼ í•´ê²°í•´ ë³´ë‹ˆ Neutronì— ëŒ€í•´ ëª¨ë¥´ê³  ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ í¬ìŠ¤íŒ…ì€ Neutron í†±ì•„ë³´ê¸°ë¡œ ëŒì•„ì˜¤ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://velog.io/@lijahong/0%EB%B6%80%ED%84%B0-%EC%8B%9C%EC%9E%91%ED%95%98%EB%8A%94-Linux-%EA%B3%B5%EB%B6%80-%EB%B0%A9%ED%99%94%EB%B2%BD-%EC%BB%B4%ED%93%A8%ED%84%B0" target="_blank" rel="noopener"
>https://velog.io/@lijahong/0%EB%B6%80%ED%84%B0-%EC%8B%9C%EC%9E%91%ED%95%98%EB%8A%94-Linux-%EA%B3%B5%EB%B6%80-%EB%B0%A9%ED%99%94%EB%B2%BD-%EC%BB%B4%ED%93%A8%ED%84%B0&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://velog.io/@larshavin/Kolla-Ansible%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-OpenStack-%EC%84%A4%EC%B9%98-1" target="_blank" rel="noopener"
>https://velog.io/@larshavin/Kolla-Ansible%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-OpenStack-%EC%84%A4%EC%B9%98-1&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.naver.com/love_tolty/220237750951" target="_blank" rel="noopener"
>https://blog.naver.com/love_tolty/220237750951&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://tech.osci.kr/openstack_cinder/" target="_blank" rel="noopener"
>https://tech.osci.kr/openstack_cinder/&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://blog.naver.com/love_tolty/220237750951" target="_blank" rel="noopener"
>https://blog.naver.com/love_tolty/220237750951&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>OpsAthlan 2 - 2. Advanced echo server ë©”íŠ¸ë¦­ ë¶„ì„</title><link>https://s0okju.github.io/p/opsathlan-2-2/</link><pubDate>Sun, 29 Sep 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/opsathlan-2-2/</guid><description>&lt;h2 id="jvmì˜-ë©”ëª¨ë¦¬-ì‚¬ìš©-í˜•íƒœ">JVMì˜ ë©”ëª¨ë¦¬ ì‚¬ìš© í˜•íƒœ
&lt;/h2>&lt;p>JVMì—ëŠ” 3ê°€ì§€ ë©”ëª¨ë¦¬ ì‚¬ìš© í˜•íƒœê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>used: JVMì´ ì‚¬ìš© ì¤‘ì¸ ë©”ëª¨ë¦¬ ì–‘&lt;/li>
&lt;li>committed: JVMì´ ì‹œìŠ¤í…œì—ê²Œ ìš”ì²­í•œ ë©”ëª¨ë¦¬ ì–‘&lt;/li>
&lt;li>max : ì‹¤í–‰ ì¤‘ì¸ í™˜ê²½ì—ì„œ ìµœëŒ€ë¡œ í• ë‹¹í•  ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬ ì–‘&lt;/li>
&lt;/ul>
&lt;p>ë©”ëª¨ë¦¬ ìš©ëŸ‰ì€ used &amp;lt;= committed &amp;lt;= maxë¥¼ ë”°ë¥´ëŠ”ë°, used ë©”ëª¨ë¦¬ ì–‘ì´ committed, max ë©”ëª¨ë¦¬ë³´ë‹¤ í¬ê²Œ ëœë‹¤ë©´ OOM(Out Of Memory)ì´ ë°œìƒ&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image.png"
width="1280"
height="658"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image_hu17137007185295859528.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image_hu16220424698731232167.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://swmobenz.tistory.com/37"
class="gallery-image"
data-flex-grow="194"
data-flex-basis="466px"
>&lt;/p>
&lt;p>ê·¸ë¼íŒŒë‚˜ë¥¼ í™•ì¸í•´ë³´ë©´ 3ê°€ì§€ì˜ ë©”ëª¨ë¦¬ í˜•íƒœë¥¼ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-1.png"
width="1132"
height="298"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-1_hu10908424606683754404.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-1_hu4937573240029493458.png 1024w"
loading="lazy"
alt="ê·¸ë¼íŒŒë‚˜ì—ì„œ í™•ì¸í•œ JVM Memory"
class="gallery-image"
data-flex-grow="379"
data-flex-basis="911px"
>&lt;/p>
&lt;h3 id="committed-memoryì˜-ì—­í• ">Committed Memoryì˜ ì—­í• 
&lt;/h3>&lt;blockquote>
&lt;p>&lt;a class="link" href="https://swmobenz.tistory.com/37" target="_blank" rel="noopener"
>YGwanë‹˜ì˜ ë¸”ë¡œê·¸: JVM Memoryì˜ 3ê°€ì§€ ë©”íŠ¸ë¦­ ì§€í‘œ - Committed Memoryë€?&lt;/a>ë¥¼ ì½ì–´ë³´ëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ê³  í•´ì œí•˜ëŠ”ë° í•„ìš”í•œ ì˜¤ë²„í—¤ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤ëŠ” íŠ¹ì§•&lt;/strong>ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.&lt;br>
JVMì´ ì‹œìŠ¤í…œì„ í†µí•´ ë¯¸ë¦¬ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ì—¬ ì‚¬ìš© ì‹œ ê°€ì§€ê³  ìˆëŠ” ì—¬ìœ  ë©”ëª¨ë¦¬ ê³µê°„ì„ í™œìš©í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë©”ëª¨ë¦¬ë¥¼ ì¦‰ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©° ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ëŠ”ë° ë°œìƒí•˜ëŠ” ì˜¤ë²„í—¤ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="advanced-echo-server-jvm-ë©”íŠ¸ë¦­-íŠ¹ì§•">Advanced echo server jvm ë©”íŠ¸ë¦­ íŠ¹ì§•
&lt;/h2>&lt;p>ì´ì „ ê¸€ì—ì„œ ìŠ¤í”„ë§ë¶€íŠ¸ ì»¨í…Œì´ë„ˆì˜ ë©”ëª¨ë¦¬ê°€ ì§€ì†ì ìœ¼ë¡œ ì¦ê°€í•œë‹¤ê³  ì–¸ê¸‰í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ëŠ” jvmì— ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì–´ ê´€ë ¨ ì§€í‘œë¥¼ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;br>
ì²˜ìŒì— ëˆˆì—¬ê²¨ ë´¤ë˜ ê²ƒì€ JVMì˜ committed ë©”ëª¨ë¦¬ ì–‘ì´ ì ì§„ì ìœ¼ë¡œ ì¦ê°€í•˜ê³  ìˆë‹¤ëŠ” ì ì´ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ğŸ˜‚ ì‚¬ì§„ì—ì„œëŠ” ì˜ ë³´ì´ì§€ ì•Šì§€ë§Œ ìì„¸íˆ ë³´ë©´ 1MBì”© ìƒìŠ¹í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-2.png"
width="393"
height="278"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-2_hu3739438328806858467.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-2_hu2158101082316816296.png 1024w"
loading="lazy"
alt="JVM ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰"
class="gallery-image"
data-flex-grow="141"
data-flex-basis="339px"
>&lt;/p>
&lt;p>ìì„¸íˆ ì•Œì•„ë³´ê¸° ì „ì— heapê³¼ non-heap ë©”ëª¨ë¦¬ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤.&lt;/p>
&lt;ul>
&lt;li>Java Heap : Instanceì™€ ê°ì²´ê°€ ì €ì¥ë˜ëŠ” ê³µê°„ìœ¼ë¡œ ëª¨ë“  Threadì— ì˜í•´ ê³µìœ ë˜ëŠ” ì˜ì—­&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/li>
&lt;li>Native Area(non-heap) : OSë ˆë²¨ì—ì„œ ê´€ë¦¬í•˜ëŠ” ì˜ì—­ìœ¼ë¡œ JVM í¬ê¸°ì— ê°•ì œë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— &lt;strong>í”„ë¡œì„¸ìŠ¤ê°€ ì´ìš©í•  ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬ ìì›ì„ ìµœëŒ€í•œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-3.png"
width="844"
height="250"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-3_hu13641374250937015675.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-3_hu1575401254724482488.png 1024w"
loading="lazy"
alt="ì¶œì²˜ :Â https://www.samsungsds.com/kr/insights/1232761_4627.html"
class="gallery-image"
data-flex-grow="337"
data-flex-basis="810px"
>&lt;/p>
&lt;p>ë‹¤ì‹œ ëŒì•„ì™€ ì œê°€ ìš´ì˜í•˜ê³  ìˆëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í™•ì¸í•´ ë³¼ê¹Œìš”.&lt;br>
ì •ë§ ê°„ë‹¨í•œ EchoControllerì™€ í”„ë¡œë©”í…Œìš°ìŠ¤ metric ìˆ˜ì§‘ì„ ìœ„í•œ MetricControllerê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@RestController&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">EchoController&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@GetMapping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/echo&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">echo&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Hello, World!&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¹„êµì  ë‹¨ìˆœí•˜ê¸° ë•Œë¬¸ì— Heap ì˜ì—­ì˜ ë¬¸ì œëŠ” ì•„ë‹ˆë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.&lt;br>
ê·¸ë˜ë„ JVM Heapë¥¼ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤. í™ ë©”ëª¨ë¦¬ì˜ ì‚¬ìš©ëŸ‰ì€ ë§¤ìš° ì ê²Œ ì‚¬ìš©ë˜ì—ˆê³ , ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-4.png"
width="793"
height="464"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-4_hu13856778067335710945.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-4_hu2162670129833221820.png 1024w"
loading="lazy"
alt="JVM Heap Memory ì‚¬ìš©ëŸ‰"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="410px"
>&lt;/p>
&lt;p>non-heap ì˜ì—­ì„ ë´ë´…ì‹œë‹¤.&lt;br>
ë³€í™”í­ì´ ì ì–´ì„œ ì°¨ì´ë¥¼ ëª¨ë¥´ê² ì§€ë§Œ ë©”ëª¨ë¦¬ê°€ ì‚¬ìš©ëŸ‰ì´ ì¡°ê¸ˆì”© ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-5.png"
width="475"
height="278"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-5_hu5401583801384194378.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-5_hu9354498869452860333.png 1024w"
loading="lazy"
alt="JVM Non-Heap Memory ì‚¬ìš©ëŸ‰"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="410px"
>&lt;/p>
&lt;p>ìš°ì„  &lt;a class="link" href="https://ko.wikipedia.org/wiki/%ED%94%84%EB%A1%9C%ED%8C%8C%EC%9D%BC%EB%A7%81_%28%EC%BB%B4%ED%93%A8%ED%84%B0_%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%29" target="_blank" rel="noopener"
>í”„ë¡œíŒŒì¼ë§&lt;/a>ì€ ë¬´ì—‡ì„ ì˜ë¯¸í• ê¹Œìš”. &lt;a class="link" href="https://hudi.blog/jvm-warm-up/" target="_blank" rel="noopener"
>hudi.blog: ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ì§í›„ ë°œìƒí•˜ëŠ” Latencyì˜ ì›ì¸ê³¼ ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ JVM Warm-up&lt;/a>ë¥¼ ì°¸ê³ í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>JIT ì»´íŒŒì¼ëŸ¬&lt;/strong>ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œÂ &lt;strong>ìì£¼ ì‹¤í–‰ëœë‹¤ê³  íŒë‹¨ë˜ëŠ” íŠ¹ì • ë¶€ë¶„ë§Œì„ ê¸°ê³„ì–´ë¡œ ì»´íŒŒì¼&lt;/strong>í•œë‹¤. ì´ ë¶€ë¶„ì„Â &lt;strong>í•«ìŠ¤íŒŸ(Hotspot)&lt;/strong> ì´ë¼ê³  ë¶€ë¥¸ë‹¤. JIT ì»´íŒŒì¼ëŸ¬ëŠ” ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë™ì‘ì„ ë¶„ì„í•˜ê³  ì½”ë“œ ì‹¤í–‰ íšŸìˆ˜, ë£¨í”„ ë°˜ë³µ íšŸìˆ˜, ë©”ì†Œë“œ í˜¸ì¶œ ë“±ì˜ ì •ë³´ë¥¼ ì¸¡ì •í•˜ê³  ê¸°ë¡í•œë‹¤. ì´ë¥¼Â &lt;strong>í”„ë¡œíŒŒì¼ë§&lt;/strong>ì´ë¼ê³  í•œë‹¤.&lt;br>
JIT ì»´íŒŒì¼ëŸ¬ëŠ” í”„ë¡œíŒŒì¼ë§ ê²°ê³¼ë¥¼ í† ëŒ€ë¡œ í•«ìŠ¤íŒŸì„ ì‹ë³„í•œë‹¤. í•«ìŠ¤íŒŸì´ ì‹ë³„ë˜ì—ˆë‹¤ë©´, JIT ì»´íŒŒì¼ëŸ¬ëŠ”Â &lt;strong>ë©”ì†Œë“œ ë‹¨ìœ„ë¡œ ë°”ì´íŠ¸ ì½”ë“œë¥¼ ê¸°ê³„ì–´ë¡œ ë²ˆì—­&lt;/strong>í•œë‹¤.
JIT ì»´íŒŒì¼ëŸ¬ëŠ” ì´ë ‡ê²Œ ë²ˆì—­ëœ ê¸°ê³„ì–´ë¥¼Â &lt;strong>ì½”ë“œ ìºì‹œ(Code Cache)&lt;/strong> ë¼ëŠ” ìºì‹œê³µê°„ì— ì €ì¥í•œë‹¤.&lt;/p>
&lt;p>ì¶œì²˜ - &lt;a class="link" href="https://hudi.blog/jvm-warm-up/" target="_blank" rel="noopener"
>https://hudi.blog/jvm-warm-up/&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>JITëŠ” ì „ì²´ ì½”ë“œë¥¼ ì»´íŒŒì¼ í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ìì£¼ ì‹¤í–‰ë˜ëŠ” ë¶€ë¶„ì—ë§Œ ì»´íŒŒì¼í•˜ë©° ì´ì— ëŒ€í•œ ë°ì´í„°ë¥¼ Code Cacheì— ì €ì¥í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>Non Heapê³¼ ê´€ë ¨ëœ ì§€í‘œë¥¼ í™•ì¸í•´ë´…ì‹œë‹¤.&lt;br>
ì•„ë˜ì˜ ì„¸ ê°€ì§€ ì§€í‘œê°€ ë¯¸ì„¸í•˜ê²Œ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Metaspace : JVMì´ ë¡œë“œí•œ ë©”íƒ€ë°ì´í„°ë¥¼ ì €ì¥&lt;/li>
&lt;li>CodeHeap : JIT ì»´íŒŒì¼ëŸ¬ ê´€ë ¨ ì§€í‘œ
&lt;ul>
&lt;li>profiled nmethods&lt;/li>
&lt;li>non-profiled nmethods&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-6.png"
width="1888"
height="303"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-6_hu9697928109398902318.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-6_hu13775024245728683528.png 1024w"
loading="lazy"
alt="JVM Memory Pool(non-heap) ì§€í‘œ"
class="gallery-image"
data-flex-grow="623"
data-flex-basis="1495px"
>&lt;/p>
&lt;p>í•˜ì§€ë§Œ &lt;strong>ì¥ê¸°ì ì¸ ê´€ì ì—ì„œ ë°”ë¼ë´¤ì„ë•Œ ë©”ëª¨ë¦¬ ë‚­ë¹„ì¼ ìˆ˜ ìˆê² ë‹¤ëŠ” ìƒê°&lt;/strong>ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.&lt;br>
íŠ¹íˆ MetaspaceëŠ” JVM í¬ê¸°ì— ê°•ì œë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬ ìì›ì„ ìµœëŒ€í•œ í™œìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ Metaspace ë©”ëª¨ë¦¬ë¥¼ ì œí•œí•˜ì—¬ ìš´ì˜í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.&lt;br>
ì´ëŸ¬í•œ ì„±ëŠ¥ ì œí•œì€ Metaspaceì—ë§Œ ì ìš©ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ì˜ì—­ì—ì„œì˜ ë©”ëª¨ë¦¬ ì‚¬ì´ì¦ˆ ì œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-7.png"
width="1600"
height="922"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-7_hu4042786570281165567.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-7_hu349388056793302220.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://cloud.theodo.com/en/blog/jvm-oom"
class="gallery-image"
data-flex-grow="173"
data-flex-basis="416px"
>&lt;/p>
&lt;p>ì•ˆì „í•˜ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìš´ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” ê° ë©”ëª¨ë¦¬ ì˜ì—­ì— ë§ëŠ” ìš”êµ¬ì‚¬í•­ì„ ê³ ë ¤í•˜ì—¬ ê²°ì •í•˜ëŠ” ê²ƒì´ ë°”ëŒì§í•©ë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>Java ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ í¬ê²Œ ìœ„ì˜ Heapê³¼ Off-Heap ë‘ ê³µê°„ì„ í™œìš©í•˜ì—¬ ë™ì‘í•˜ëŠ”ë°, ë”°ë¼ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•  ë•Œ ë©”ëª¨ë¦¬ ëª‡ GBë¥¼ í• ë‹¹í•´ì•¼ í•˜ëŠ”ì§€ ê²°ì •í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¨ìˆœíˆ Xmx(Heap ë©”ëª¨ë¦¬ ìµœëŒ€ì¹˜ë¥¼ ê²°ì •í•˜ëŠ” Java ì˜µì…˜) ê°’ë§Œ ìƒê°í•˜ë©´ OOMEì— ë¹ ì§€ê¸° ì‰½ë‹¤. ì‹¤ì œë¡œëŠ” &lt;strong>Xmxì— MaxMetaspaceê°’ì„ ë”í•˜ê³ , ì¶”ê°€ë¡œ í”„ë¡œê·¸ë¨ì—ì„œ NIOë¥¼ ì‚¬ìš©í•´ Native Memoryë¥¼ ì§ì ‘ í• ë‹¹ë°›ëŠ” ë¡œì§ì„ ê³ ë ¤í•´ì„œ Heap + Native Memory ì‚¬ìš©ì´ëŸ‰ìœ¼ë¡œ í• ë‹¹ì„ í•´ì•¼ ë¹„êµì  ì •í™•&lt;/strong>í•˜ë‹¤. íŠ¹íˆ ì»¨í…Œì´ë„ˆì˜ ê²½ìš° ê³„ì‚°ì„ ì¢€ ë” ì •í™•í•˜ê²Œ í•´ì•¼ ì‹œìŠ¤í…œì—ì„œ OOM killedë˜ëŠ” ìƒí™©ì„ ë©´í•  ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>ì¶œì²˜ - &lt;a class="link" href="https://www.samsungsds.com/kr/insights/1232761_4627.html" target="_blank" rel="noopener"
>https://www.samsungsds.com/kr/insights/1232761_4627.html&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;h2 id="ì •ë¦¬">ì •ë¦¬
&lt;/h2>&lt;p>ì‹¤ì œë¡œ ë°°í¬í•´ë³´ë©´ì„œ ì»¨í…Œì´ë„ˆì˜ ì§€ì†ì ì¸ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì¦ê°€í•˜ëŠ” ê²ƒì— ì˜ë¬¸ì ì„ ê°€ì§€ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ìë°” ì»¨í…Œì´ë„ˆì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ì€ JVMì´ ì»¨íŠ¸ë¡¤í•  ìˆ˜ ì—†ëŠ” ë¶€ë¶„ì´ ë§ì•„ ì¶”ì í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>.&lt;br>
ê·¸ë˜ì„œ ìì„¸íˆ í™•ì¸í•  ìˆ˜ ìˆëŠ” JVM ìœ„ì£¼ë¡œ í™•ì¸í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. non-heap ì˜ì—­ì´ ë¯¸ì„¸í•˜ê²Œ ìƒìŠ¹í•˜ê³  ìˆì—ˆê³ , ì´ëŠ” ì •ìƒì ì¸ ì§€í‘œë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì¥ê¸°ì ìœ¼ë¡œëŠ” ë©”ëª¨ë¦¬ ë‚­ë¹„ê°€ ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë©”ëª¨ë¦¬ ì‚¬ì´ì¦ˆë¥¼ ì œí•œí•˜ì—¬ ìš´ì˜í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://swmobenz.tistory.com/37" target="_blank" rel="noopener"
>https://swmobenz.tistory.com/37&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://hudi.blog/jvm-warm-up/" target="_blank" rel="noopener"
>https://hudi.blog/jvm-warm-up/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://velog.io/@dongvelop/Spring-Boot-%EC%84%9C%EB%B2%84-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C%EB%B3%84-%EC%84%A4%EB%AA%85-%EB%B0%8F-%EC%9C%A0%EC%9D%98%EC%82%AC%ED%95%AD#codeheap-non-profiled-nmethods-non-heap" target="_blank" rel="noopener"
>https://velog.io/@dongvelop/Spring-Boot-%EC%84%9C%EB%B2%84-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C%EB%B3%84-%EC%84%A4%EB%AA%85-%EB%B0%8F-%EC%9C%A0%EC%9D%98%EC%82%AC%ED%95%AD#codeheap-non-profiled-nmethods-non-heap&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.samsungsds.com/kr/insights/1232761_4627.html" target="_blank" rel="noopener"
>https://www.samsungsds.com/kr/insights/1232761_4627.html&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://obv-cloud.com/41" target="_blank" rel="noopener"
>https://obv-cloud.com/41&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://swmobenz.tistory.com/37" target="_blank" rel="noopener"
>https://swmobenz.tistory.com/37&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://12bme.tistory.com/382" target="_blank" rel="noopener"
>https://12bme.tistory.com/382&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;a class="link" href="https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>OpsAthlan 2 - 1. Advanced echo server êµ¬ì¶•</title><link>https://s0okju.github.io/p/opsathlan-2-1/</link><pubDate>Thu, 26 Sep 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/opsathlan-2-1/</guid><description>&lt;h2 id="ì‹œë‚˜ë¦¬ì˜¤">ì‹œë‚˜ë¦¬ì˜¤
&lt;/h2>&lt;p>&lt;a class="link" href="https://s0okju.github.io/p/opsathlan-1/" target="_blank" rel="noopener"
>ì´ì „ê¸€&lt;/a> ì„ ë³´ë‹ˆ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…Œì´ë„ˆì— ë¬¸ì œê°€ ìƒê¸´ ê²ƒ ê°™ë‹¤. spring boot ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ì§€í‘œë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆë„ë¡ í™˜ê²½ì„ êµ¬ì¶•í•´ë³´ì.&lt;/p>
&lt;h3 id="í™˜ê²½">í™˜ê²½
&lt;/h3>&lt;ul>
&lt;li>Ubuntu 22.04&lt;/li>
&lt;li>Openstack 2024.1&lt;/li>
&lt;/ul>
&lt;h3 id="ì „ì²´-êµ¬ìƒë„">ì „ì²´ êµ¬ìƒë„
&lt;/h3>&lt;p>ì•„ë˜ì™€ ê°™ì´ êµ¬ìƒë©ë‹ˆë‹¤. cAdvisorë¥¼ ì„¤ì •í•œ ì´ìœ ëŠ” ì»¨í…Œì´ë„ˆ ê´€ë ¨ ë©”íŠ¸ë¦­ì„ ìˆ˜ì§‘í•˜ê¸° ìœ„í•´ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.
docker-composeë¥¼ í†µí•´ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image.png"
width="810"
height="750"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image_hu12328348664123321354.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image_hu17717745985325275902.png 1024w"
loading="lazy"
alt="ì‚¬ì§„ - OpsAthlan 2 êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="108"
data-flex-basis="259px"
>&lt;/p>
&lt;blockquote>
&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì»¨í…Œì´ë„ˆë“¤ì˜ ë¦¬ì†ŒìŠ¤ ì§€í‘œë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ cAdvisorë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•©ë‹ˆë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;/blockquote>
&lt;h3 id="ì ˆì°¨">ì ˆì°¨
&lt;/h3>&lt;ol>
&lt;li>Terraform, Ansibleë¥¼ í™œìš©í•œ í™˜ê²½ êµ¬ì„±&lt;/li>
&lt;li>í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ í™œìš©í•œ ì§€í‘œ ìˆ˜ì§‘&lt;/li>
&lt;li>ê·¸ë¼íŒŒë‚˜ ì‹œê°í™”&lt;/li>
&lt;/ol>
&lt;h2 id="í™˜ê²½-êµ¬ì„±">í™˜ê²½ êµ¬ì„±
&lt;/h2>&lt;p>í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ì˜ êµ¬ì„± ìì²´ëŠ” &lt;a class="link" href="https://s0okju.github.io/p/opsathlan-1/" target="_blank" rel="noopener"
>ì´ì „&lt;/a>ê³¼ ë³€í™”í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="docker-compose">docker compose
&lt;/h3>&lt;p>ë‹¤ë§Œ í™˜ê²½ êµ¬ì„±ì€ ë³€í–ˆìŠµë‹ˆë‹¤. ê°œë³„ ì»¨í…Œì´ë„ˆë¡œ ë°°í¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ docker-composeë¥¼ í†µí•´ ê´€ë ¨ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í–ˆìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ì»¨í…Œì´ë„ˆì˜ ê°œìˆ˜ê°€ ë§ì•„ì§ì— ë”°ë¼ ì»¨í…Œì´ë„ˆë¥¼ í° ë¬¶ìŒìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ 4ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í•˜ê²Œ ë©ë‹ˆë‹¤&lt;/p>
&lt;ul>
&lt;li>Prometheus&lt;/li>
&lt;li>Grafana&lt;/li>
&lt;li>Springboot application&lt;/li>
&lt;li>cAdvisor&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># docker-compose.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;3.7&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Prometheus service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prometheus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prom/prometheus:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;9090:9090&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Expose Prometheus web UI&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Grafana service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">grafana&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">grafana/grafana:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">grafana&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;3000:3000&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Expose Grafana web UI&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">depends_on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Spring Boot app service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">advanced-echo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">opsathlan-advanced-echo:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">opsathlan-advanced-echo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8080:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># cadvsior config&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cadvisor&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gcr.io/cadvisor/cadvisor:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8081:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/:/rootfs:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/run:/var/run:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/sys:/sys:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/lib/docker/:/var/lib/docker:ro&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># docker container log&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">monitoring&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">bridge&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="í”„ë¡œë©”í…Œìš°ìŠ¤">í”„ë¡œë©”í…Œìš°ìŠ¤
&lt;/h3>&lt;p>í”„ë¡œë©”í…Œìš°ìŠ¤ê°€ ìˆ˜ì§‘í•œ ë©”íŠ¸ë¦­ ì§€í‘œëŠ” springboot container ê´€ë ¨ ì§€í‘œì™€ ì»¨í…Œì´ë„ˆ ê´€ë ¨ ì§€í‘œì…ë‹ˆë‹¤. ê·¸ë˜ì„œ &lt;code>scrape_configs&lt;/code> targetì— ê´€ë ¨ ì»¨í…Œì´ë„ˆ URLë¥¼ ê¸°ì…í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">global&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">scrape_interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">10s&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># How often to scrape targets&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">scrape_configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">job_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;opsathlan-advanced-echo&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">static_configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">targets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;opsathlan-advanced-echo:8080&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;cadvisor:8080&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="docker-composeë¥¼-ì‹¤í–‰í•˜ëŠ”-ansible-playbook">docker composeë¥¼ ì‹¤í–‰í•˜ëŠ” Ansible playbook
&lt;/h3>&lt;p>novaì—ì„œ docker-composeë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” &lt;strong>ê´€ë ¨ ë°”ì´ë„ˆë¦¬ë¥¼ ì„¤ì¹˜&lt;/strong>í•˜ê³ , &lt;strong>í•„ìš”í•œ í™˜ê²½ íŒŒì¼ì„ ì¸ìŠ¤í„´ìŠ¤ì— ë³µì‚¬&lt;/strong>í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤. &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/2/scenario_02/ansible/docker-compose" target="_blank" rel="noopener"
>docker-compose ë¼ëŠ” ansible role&lt;/a>ë¥¼ ë§Œë“¤ì–´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³ , docker composeë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” í…ŒìŠ¤í¬ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê°œì¸ì ìœ¼ë¡œ ì‘ì—…í•œ &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/2/scenario_02/ansible/docker-installation" target="_blank" rel="noopener"
>ë„ì»¤ ì„¤ì¹˜ ansible-role&lt;/a> ë¥¼ í™•ì¸í•´ë³´ë©´ docker ì„¤ì¹˜í• ë•Œ &lt;code>docker-compose plugin&lt;/code>ë¥¼ ì„¤ì¹˜í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ ë³„ë„ì˜ ì„¤ì¹˜ ì—†ì´ &lt;code>docker compose&lt;/code> ëª…ë ¹ì–´ ë§Œìœ¼ë¡œë„ docker-compose íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Update apt cache&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">apt&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">update_cache&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">yes&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Install Docker Engine, CLI, containerd, and plugins&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">apt&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-ce&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-ce-cli&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">containerd.io&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-buildx-plugin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-compose-plugin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">present&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” config íŒŒì¼ì„ nova ì¸ìŠ¤í„´ìŠ¤ì— ì§ì ‘ ì €ì¥í•´ì•¼ í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤. &lt;code>docker-compose.yml&lt;/code> ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ë³´ë©´ local volumeì´ &lt;code>./prometheus/prometheus.yml&lt;/code> ë¡œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. íŒŒì¼ ê²½ë¡œëŠ” nova ì¸ìŠ¤í„´ìŠ¤ì˜ íŒŒì¼ ê²½ë¡œë¡œ í•´ë‹¹ íŒŒì¼ ê²½ë¡œì— ë§ê²Œ ì„¤ì • íŒŒì¼(prometheus.yml)ë¥¼ ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># docker-compose.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Prometheus service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prometheus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prom/prometheus:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;9090:9090&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Expose Prometheus web UI&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>prometheusì˜ í´ë”ë¥¼ ë§Œë“  í›„ì— ë³µì‚¬í•˜ëŠ” ì‘ì—…ì„ í•˜ë©´ íŒŒì¼ì´ ì €ì¥ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Create Prometheus configuration directory&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">file&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/home/ubuntu/prometheus&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">directory&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">owner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;0755&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Copy Prometheus config file&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">copy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/prometheus/prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">owner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;0644&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>docker compose ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ë©´ docker-compose íŒŒì¼ì— ì •ì˜ëœ ì»¨í…Œì´ë„ˆë“¤ì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Copy docker-compose.yml to the target machine&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">copy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./docker-compose.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/docker-compose.yml&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Destination on the target machine&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">owner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;0644&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Run docker-compose up to start containers&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">docker compose up -d&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">chdir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">become&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼-í™œìš©í•œ-ì§€í‘œ-ìˆ˜ì§‘">í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ í™œìš©í•œ ì§€í‘œ ìˆ˜ì§‘
&lt;/h2>&lt;p>ë©”íŠ¸ë¦­ ìˆ˜ì§‘, ì‹œê°í™”, ì•Œë¦¼, ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ê¸°ëŠ¥ì„ ëª¨ë‘ ì œê³µí•˜ëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. Pull ë°©ì‹ìœ¼ë¡œ ë©”íŠ¸ë¦­ì„ ìˆ˜ì§‘í•˜ê³  ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-1.png"
width="1042"
height="745"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-1_hu14788327422024716885.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-1_hu8842426283194618521.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://www.geeksforgeeks.org/prometheus-monitoring/"
class="gallery-image"
data-flex-grow="139"
data-flex-basis="335px"
>&lt;/p>
&lt;p>pull ë°©ì‹ì€ í”„ë¡œë©”í…Œìš°ìŠ¤ê°€ í•„ìš”í•œ ë©”íŠ¸ë¦­ ì§€í‘œë¥¼ ëŒ€ìƒ ì„œë²„ë¡œë¶€í„° ê°€ì ¸ì˜¨ë‹¤ëŠ” ê²ƒê³¼ ê°™ì€ ë§ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ëŒ€ìƒì´ ë˜ëŠ” ì„œë²„ëŠ” í”„ë¡œë©”í…Œìš°ìŠ¤ê°€ ë©”íŠ¸ë¦­ì„ ë°›ì•„ê°ˆ ìˆ˜ ìˆë„ë¡ endpointë¥¼ ì—´ì–´ë‘¬ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ë³´í†µì˜ ë°©ì‹ì´ë¼ë©´ spring boot actuatorë¥¼ í™œìš©í•˜ì—¬ &lt;code>/actuator/metrics&lt;/code> ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì—¬ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-properties" data-lang="properties">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># application.properties&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">management.endpoints.web.exposure.include&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">prometheus,metrics&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">management.endpoint.prometheus.enabled&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">management.prometheus.metrics.export.enabled&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ìœ„ì™€ ê°™ì€ ë°©ì‹ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ EOF ì˜¤ë¥˜ê°€ ë°œìƒí•´ í”„ë¡œë©”í…Œìš°ìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ì§€í‘œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ headerë¥¼ &lt;code>TEXT_PLAIN&lt;/code>ìœ¼ë¡œ ì§€ì •í•´ì£¼ëŠ” controllerë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nn">io.micrometer.prometheusmetrics.PrometheusMeterRegistry&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@RestController&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@RequiredArgsConstructor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">MetricsController&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">final&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PrometheusMeterRegistry&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">prometheusMeterRegistry&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@GetMapping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/metrics&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">metrics&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">scrape&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">prometheusMeterRegistry&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">scrape&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">HttpHeaders&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">HttpHeaders&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">setContentType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MediaType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">TEXT_PLAIN&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">&amp;lt;&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">scrape&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">HttpStatus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">OK&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>springboot actuator
ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ëª¨ë‹ˆí„°ë§ê³¼ ê´€ë¦¬ì— í•„ìš”í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>9090 í¬íŠ¸ì— ì ‘ì†í•´ í”„ë¡œë©”í…Œìš°ìŠ¤ web uië¥¼ ë³´ë©´ ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ cAdvisor ì§€í‘œê°€ ì •ìƒì ìœ¼ë¡œ í†µì‹ ë¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-2.png"
width="1447"
height="245"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-2_hu8113471659535806411.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-2_hu16006704477507434989.png 1024w"
loading="lazy"
alt="ì‚¬ì§„ - í”„ë¡œë©”í…Œìš°ìŠ¤ UIì—ì„œ í™•ì¸í•œ Target"
class="gallery-image"
data-flex-grow="590"
data-flex-basis="1417px"
>&lt;/p>
&lt;h2 id="ê·¸ë¼íŒŒë‚˜ë¥¼-í†µí•œ-ì‹œê°í™”">ê·¸ë¼íŒŒë‚˜ë¥¼ í†µí•œ ì‹œê°í™”
&lt;/h2>&lt;h3 id="cadvisor-ì§€í‘œ-ì‹œê°í™”">cAdvisor ì§€í‘œ ì‹œê°í™”
&lt;/h3>&lt;p>ê·¸ë¼íŒŒë‚˜ì—ì„œ containerì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ í™•ì¸í•´ë´…ë‹ˆë‹¤. ë©”ëª¨ë¦¬ ë‹¨ìœ„ë¡œ í™•ì¸í•˜ê¸° ìœ„í•´ 1024ë¥¼ ë‘ë²ˆ ë‚˜ëˆ´ìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>ê´€ë ¨ ì§€í‘œëŠ” &lt;a class="link" href="https://github.com/google/cadvisor/blob/master/docs/storage/prometheus.md" target="_blank" rel="noopener"
>cadvisor Github&lt;/a>ë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ëë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-promql" data-lang="promql">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">container_memory_usage_bytes&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nl">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">&amp;#34;&lt;/span>&lt;span class="s">instance_name&lt;/span>&lt;span class="p">&amp;#34;}&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1024&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1024&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì•„ë˜ì˜ ê·¸ë˜í”„ë¥¼ ë³´ë©´ ê³„ì† ìƒìŠ¹í•˜ê³  ìˆëŠ” ê·¸ë˜í”„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-3.png"
width="1204"
height="670"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-3_hu11174096070289850435.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-3_hu14858234098574167908.png 1024w"
loading="lazy"
alt="ì‚¬ì§„ - ì»¨í…Œì´ë„ˆ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì‹œê°í™”"
class="gallery-image"
data-flex-grow="179"
data-flex-basis="431px"
>&lt;/p>
&lt;h3 id="ìŠ¤í”„ë§-ì• í”Œë¦¬ì¼€ì´ì…˜-ê´€ë ¨-ì§€í‘œ-ì‹œê°í™”">ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ ê´€ë ¨ ì§€í‘œ ì‹œê°í™”
&lt;/h3>&lt;p>ì €ëŠ” &lt;a class="link" href="https://grafana.com/grafana/dashboards/4701-jvm-micrometer/" target="_blank" rel="noopener"
>GrafanaLabsì—ì„œ ì œê³µí•´ì£¼ëŠ” JVM ëŒ€ì‹œë³´ë“œ&lt;/a>ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. dashboard ipë¥¼ ì„¤ì •í•˜ë©´ ë‹¤ì–‘í•œ ê·¸ë˜í”„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì•„ë˜ì˜ ì‚¬ì§„ì€ ì¼ë¶€ë§Œ ë‚˜íƒ€ë‚¸ ê²ƒì´ë©° ì´ê²ƒ ì´ì™¸ì—ë„ ë‹¤ì–‘í•œ ì§€í‘œê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-4.png"
width="794"
height="270"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-4_hu12654308625765720708.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-4_hu11965415445671921365.png 1024w"
loading="lazy"
alt="ì‚¬ì§„ - ê·¸ë¼íŒŒë‚˜ì—ì„œ í™•ì¸í•œ ê·¸ë˜í”„(ì¼ë¶€)"
class="gallery-image"
data-flex-grow="294"
data-flex-basis="705px"
>&lt;/p>
&lt;h2 id="ë‹¤ìŒê¸€">ë‹¤ìŒê¸€
&lt;/h2>&lt;p>ì§€ê¸ˆê¹Œì§€ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒí¸ì—ëŠ” ì‹œê°í™”í•œ í‘œë¥¼ ë¶„ì„í•´ë³´ëŠ” ì‹œê°„ì„ ê°€ì§€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://themapisto.tistory.com/44" target="_blank" rel="noopener"
>https://themapisto.tistory.com/44&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>OpsAthlan 1 - Simple echo server</title><link>https://s0okju.github.io/p/opsathlan-1/</link><pubDate>Thu, 19 Sep 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/opsathlan-1/</guid><description>&lt;h2 id="ì‹œë‚˜ë¦¬ì˜¤">ì‹œë‚˜ë¦¬ì˜¤
&lt;/h2>&lt;p>Hello Worldë¥¼ ë°˜í™˜í•´ì£¼ëŠ” springboot ë„ì»¤ ì„œë¹„ìŠ¤ê°€ ìˆë‹¤. ë°°í¬í•´ë³´ì!&lt;/p>
&lt;h2 id="í™˜ê²½">í™˜ê²½
&lt;/h2>&lt;ul>
&lt;li>ubuntu 22.04&lt;/li>
&lt;li>openstack 2024.01&lt;/li>
&lt;/ul>
&lt;h2 id="ìˆœì„œ">ìˆœì„œ
&lt;/h2>&lt;ol>
&lt;li>Terraformì„ í™œìš©í•œ ì¸í”„ë¼ êµ¬ì„±&lt;/li>
&lt;li>Ansibleë¥¼ í™œìš©í•œ í™˜ê²½ êµ¬ì„± ë° ë¹Œë“œ&lt;/li>
&lt;li>cAdvisorë¥¼ í™œìš©í•œ ëª¨ë‹ˆí„°ë§&lt;/li>
&lt;/ol>
&lt;h3 id="cadvisorë¥¼-ì„ íƒí•œ-ì´ìœ ">cAdvisorë¥¼ ì„ íƒí•œ ì´ìœ 
&lt;/h3>&lt;p>cAdvsiorëŠ” ì»¨í…Œì´ë„ˆì˜ Metrixë¥¼ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆëŠ” ë„êµ¬ì…ë‹ˆë‹¤. &lt;strong>ê¸°ë³¸ì ì¸ ì»¨í…Œì´ë„ˆ ë©”íŠ¸ë¦­ ì •ë³´ë¥¼ ìš°ì„  í™•ì¸&lt;/strong>í•˜ê¸° ìœ„í•´ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì „ì²´-êµ¬ì„±ë„">ì „ì²´ êµ¬ì„±ë„
&lt;/h2>&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image.png"
width="1110"
height="750"
srcset="https://s0okju.github.io/p/opsathlan-1/image_hu14762987096181792521.png 480w, https://s0okju.github.io/p/opsathlan-1/image_hu18320141257170937429.png 1024w"
loading="lazy"
alt="êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="148"
data-flex-basis="355px"
>&lt;/p>
&lt;h2 id="terraformì„-í™œìš©í•œ-ë¦¬ì†ŒìŠ¤-ë°°í¬">Terraformì„ í™œìš©í•œ ë¦¬ì†ŒìŠ¤ ë°°í¬
&lt;/h2>&lt;p>ë°°í¬í•´ì•¼ í•  ê²ƒì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Nova Instance&lt;/li>
&lt;li>Network
&lt;ul>
&lt;li>Subnet&lt;/li>
&lt;li>Router&lt;/li>
&lt;li>Floating ip&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Security
&lt;ul>
&lt;li>Security Group
&lt;ul>
&lt;li>ssh, spring web port(8080), cAdvisor(8081)ë¥¼ ìœ„í•œ rule ìƒì„±&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ssh í†µì‹ ì„ ìœ„í•œ keypair&lt;/li>
&lt;/ul>
&lt;h3 id="terraform-code">Terraform code
&lt;/h3>&lt;p>terraformì€ ì ˆì°¨ ì§€í–¥ì ì´ê¸° ë•Œë¬¸ì— ë¦¬ì†ŒìŠ¤ ì‘ì„± ìˆœì„œê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.ê·¸ë˜ì„œ ê°„ë‹¨í•œ nova ì¸ìŠ¤í„´ìŠ¤ ë°°í¬ì˜ ê²½ìš° ì•„ë˜ì™€ ê°™ì€ ìˆœì„œë¥¼ ë”°ëìŠµë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>ë„¤íŠ¸ì›Œí¬&lt;/li>
&lt;li>ì¸ìŠ¤í„´ìŠ¤ ìƒì„±&lt;/li>
&lt;li>floating ip í• ë‹¹&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>ì „ì²´ ì½”ë“œëŠ” &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/1/scenario_01/terraform" target="_blank" rel="noopener"
>ê¹ƒí—ˆë¸Œ&lt;/a>ë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ëë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>ë„¤íŠ¸ì›Œí¬ë¥¼ ìƒì„±í•œ ì´í›„ subnetë¥¼ ìƒì„±í•œë‹¤. ì™¸ë¶€ì™€ í†µì‹ í•˜ê¸° ìœ„í•´ì„œëŠ” external_networkì™€ ì„œë¸Œë„·ê³¼ì˜ ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ &lt;code>router&lt;/code>ë¥¼ ìƒì„±í•œ í›„ &lt;code>router_interface&lt;/code>ë¥¼ í†µí•´ external_networkì™€ ì„œë¸Œë„·ì´ ì—°ê²°í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-tf" data-lang="tf">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Network ìƒì„±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_network_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_network&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> = &lt;span class="s2">&amp;#34;opsathlan-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">scenario_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-network&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">admin_state_up&lt;/span> = &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">port_security_enabled&lt;/span> = &lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">port_security_enabled&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Subnet ìƒì„±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_subnet_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_subnet&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> = &lt;span class="s2">&amp;#34;opsathlan-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">scenario_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-subnet&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">network_id&lt;/span> = &lt;span class="nx">openstack_networking_network_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opsathlan_network&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">cidr&lt;/span> = &lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subnet_cidr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">ip_version&lt;/span> = &lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">dns_nameservers&lt;/span> = &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;8.8.8.8&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;8.8.4.4&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Router ìƒì„±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_router_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_router&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> = &lt;span class="s2">&amp;#34;opsathlan-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">scenario_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-router&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">admin_state_up&lt;/span> = &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">external_network_id&lt;/span> = &lt;span class="nb">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">openstack_networking_network_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ext_network&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Router Interface ìƒì„±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_router_interface_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;router_interface&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">router_id&lt;/span> = &lt;span class="nx">openstack_networking_router_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opsathlan_router&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">subnet_id&lt;/span> = &lt;span class="nx">openstack_networking_subnet_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opsathlan_subnet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ì¸ìŠ¤í„´ìŠ¤-ìƒì„±">ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
&lt;/h3>&lt;p>ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” keypairë¥¼ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Keypair ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_keypair_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_keypair&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;opsathlan-${var.scenario_id}-keypair&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">public_key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pubkey_file_path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Nova ì¸ìŠ¤í„´ìŠ¤ì˜ ì ‘ê·¼ ì œì–´ë¥¼ ê´€ë¦¬í•˜ëŠ” Security groupë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. security group ruleì€ &lt;code>variables.tf&lt;/code> ì—ì„œ ë¦¬ìŠ¤íŠ¸ë¡œ ë°›ì€ í›„ì— ì ìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Security Group ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_secgroup_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_secgroup&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;opsathlan-${var.scenario_id}-secgroup&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;OpsAthaln Security Group&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">delete_default_rules&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Security Group Rule ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_secgroup_rule_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;secgroup_rules&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">length&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">direction&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ingress&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ethertype&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;IPv4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;protocol&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;port_range_min&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;port_range_max&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">remote_ip_prefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;remote_ip_prefix&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;0.0.0.0/0&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">security_group_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_networking_secgroup_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_secgroup&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>variables.tf&lt;/code> ì—ì„œëŠ” ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í¬íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>ssh&lt;/li>
&lt;li>spring boot application(8080)&lt;/li>
&lt;li>cAdvisor(8081)&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">variables&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">variable&lt;/span> &lt;span class="s2">&amp;#34;allowed_ports&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;List of maps defining allowed ports for the security group. Each map should include protocol, port_range_min, port_range_max, and optionally remote_ip_prefix.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">object&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">number&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">number&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">remote_ip_prefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">optional&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;0.0.0.0/0&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8081&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8081&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="floating-ip-í• ë‹¹-ë°-ì„¤ì •">Floating ip í• ë‹¹ ë° ì„¤ì •
&lt;/h3>&lt;p>floating ipë¥¼ ìƒì„±í•œ í›„ì— nova instanceì— ë¶™í™ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 5. Floating IP ìƒì„± ë° ì—°ê²°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_floatingip_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;floating_ip&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pool&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openstack_networking_network_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ext_network&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 4. Nova Instance ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_instance_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;nova_instance&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;opsathlan-${var.scenario_id}-instance&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">image_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flavor_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">flavor_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">key_pair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_compute_keypair_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_keypair&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">security_groups&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">openstack_networking_secgroup_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_secgroup&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">network&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">uuid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_networking_network_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_network&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">depends_on&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">openstack_networking_subnet_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_subnet&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_floatingip_associate_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;floating_ip_association&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">floating_ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_networking_floatingip_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">floating_ip&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">address&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">instance_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_compute_instance_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nova_instance&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ansibleë¥¼-í™œìš©í•œ-í™˜ê²½-êµ¬ì„±-ë°-ì»¨í…Œì´ë„ˆ-ì‹¤í–‰">Ansibleë¥¼ í™œìš©í•œ í™˜ê²½ êµ¬ì„± ë° ì»¨í…Œì´ë„ˆ ì‹¤í–‰
&lt;/h2>&lt;p>Ansibleë¥¼ í™œìš©í•˜ì—¬ &lt;strong>ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³  ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆëŠ” í™˜ê²½ì„ êµ¬ì„±&lt;/strong>í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ 4ê°œì˜ roleë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>java ì„¤ì¹˜&lt;/li>
&lt;li>docker ì„¤ì¹˜&lt;/li>
&lt;li>springboot ì´ë¯¸ì§€ ë¹Œë“œ ë° ìˆ˜í–‰&lt;/li>
&lt;li>cAdvisor ì‹¤í–‰&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ğŸ¤” &lt;strong>ì—¬ë‹´&lt;/strong>&lt;/p>
&lt;p>Jenkinsì™€ ê°™ì´ ìë™í™” ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ ì´ˆë°˜ì—ëŠ” ë¶ˆí•„ìš”í•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ë°°í¬í•˜ê³ ì í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê·œëª¨ëŠ” í˜„ì €í•˜ê²Œ ì‘ì•˜ê³ , ë‚œì´ë„ê°€ ìˆì–´ ì˜ëª»í•˜ë©´ ì˜ˆìƒë³´ë‹¤ ì‹œê°„ì„ ë§ì´ í• ì• í•  ìˆ˜ ìˆë‹¤ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h3 id="spring-boot-application-ë°°í¬">spring boot application ë°°í¬
&lt;/h3>&lt;h4 id="application-ì†Œê°œ">application ì†Œê°œ
&lt;/h4>&lt;p>ë°°í¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ê°„ë‹¨í•˜ê²Œ hello worldë§Œ ë°˜í™˜í•˜ëŠ” ì›¹ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@RestController&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">EchoController&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@GetMapping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/echo&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">echo&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Hello, World!&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="ë¹Œë“œ-ë°-ì‹¤í–‰">ë¹Œë“œ ë° ì‹¤í–‰
&lt;/h4>&lt;p>Ansibleë¥¼ í™œìš©í•˜ì—¬ spring boot application ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ë•Œ ì»¨í…Œì´ë„ˆëŠ” 8080 ì™¸ë¶€ í¬íŠ¸ë¡œ ì—´ì–´ë‘¡ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;strong>ìˆœì„œ&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>Repository clone&lt;/li>
&lt;li>Spring boot application build&lt;/li>
&lt;li>Container Image build&lt;/li>
&lt;li>Docker ì‹¤í–‰&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Clone Spring Boot application repository&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">git&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">repo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;https://github.com/S0okJu/OpsAthlan.git&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">sc/1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build Spring Boot application using Gradle&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./gradlew clean build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">chdir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gradle_build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gradle_build.rc != 0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check if JAR file exists&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stat&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo/build/libs/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">jar_dir&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Fail if JAR file does not exist&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">fail&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">msg&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;JAR file was not built successfully.&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">jar_dir.stat.exists == False or jar_dir.stat.isdir == False&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Copy Dockerfile for Spring Boot&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">copy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Dockerfile&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo/Dockerfile&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build Docker image for Spring Boot application&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">echo-springboot-app&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tag&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">source&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Run Spring Boot container&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_container&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">sc1-springboot-app&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">echo-springboot-app:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">started&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8080:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ìì„¸í•œ ì½”ë“œëŠ” &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/1/scenario_01/ansible" target="_blank" rel="noopener"
>github&lt;/a> ì°¸ê³  ë°”ëë‹ˆë‹¤.&lt;/p>
&lt;h3 id="cadvisor">cAdvisor
&lt;/h3>&lt;p>cAdvisorëŠ” ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ê³  ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆëŠ” 8081ë¡œ ì™¸ë¶€í¬íŠ¸ë¥¼ ì—´ì–´ ê°œë°œìê°€ ëŒ€ì‹œë³´ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pull cAdvisor image&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">google/cadvisor:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">source&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">pull&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Run cAdvisor container&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_container&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">google/cadvisor:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">started&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8081:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/:/rootfs:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/run:/var/run:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/sys:/sys:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/lib/docker/:/var/lib/docker:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ì»¨í…Œì´ë„ˆ-ì§€í‘œ-ëª¨ë‹ˆí„°ë§">ì»¨í…Œì´ë„ˆ ì§€í‘œ ëª¨ë‹ˆí„°ë§
&lt;/h2>&lt;h3 id="cadvisor-ì ‘ì†">cAdvisor ì ‘ì†
&lt;/h3>&lt;p>{floating_ip}:8081ì— ì ‘ì†í•©ë‹ˆë‹¤.
container ì°½ì— ë“¤ì–´ê°€ springboot applicationì„ í™•ì¸í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-1.png"
width="1121"
height="383"
srcset="https://s0okju.github.io/p/opsathlan-1/image-1_hu17233539446044340175.png 480w, https://s0okju.github.io/p/opsathlan-1/image-1_hu15492907668946311809.png 1024w"
loading="lazy"
alt="cAdvisor ì ‘ì†"
class="gallery-image"
data-flex-grow="292"
data-flex-basis="702px"
> &lt;img src="https://s0okju.github.io/p/opsathlan-1/image-2.png"
width="945"
height="277"
srcset="https://s0okju.github.io/p/opsathlan-1/image-2_hu12196910689812903337.png 480w, https://s0okju.github.io/p/opsathlan-1/image-2_hu12612396427406138621.png 1024w"
loading="lazy"
alt="cAdvisorì—ì„œ í™•ì¸í•œ ì»¨í…Œì´ë„ˆ ëª©ë¡"
class="gallery-image"
data-flex-grow="341"
data-flex-basis="818px"
>&lt;/p>
&lt;p>springboot applicationì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ì§€í‘œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-3.png"
width="1096"
height="389"
srcset="https://s0okju.github.io/p/opsathlan-1/image-3_hu11513109730994844133.png 480w, https://s0okju.github.io/p/opsathlan-1/image-3_hu14892486148299863558.png 1024w"
loading="lazy"
alt="cAdvisorì—ì„œ í™•ì¸í•œ ë©”íŠ¸ë¦­"
class="gallery-image"
data-flex-grow="281"
data-flex-basis="676px"
>&lt;/p>
&lt;h3 id="test">Test
&lt;/h3>&lt;p>ìì²´ì ìœ¼ë¡œ ë§Œë“  test ë„êµ¬ì¸ &lt;a class="link" href="https://github.com/S0okJu/GoNetWorker" target="_blank" rel="noopener"
>gonetworker&lt;/a>ë¥¼ í™œìš©í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>GoNetWorker&lt;/strong>&lt;/p>
&lt;p>ìì²´ì ìœ¼ë¡œ ë§Œë“  ë„¤íŠ¸ì›Œí¬ í…ŒìŠ¤íŠ¸ ë„êµ¬ì…ë‹ˆë‹¤. ì„œë²„ì— requestë¥¼ ì—°ì†ì—ì„œ ìš”ì²­í•œë‹¤ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>ë¸”ë¡œê·¸ ì‘ì„± ê¸°ì¤€ GoNetWorkerëŠ” ë™ì‹œë¡œ ì „ì†¡í•˜ëŠ” ê¸°ëŠ¥ì´ ì—†ì–´ &lt;strong>ìˆœì°¨ì ìœ¼ë¡œ requestë¥¼ ìš”ì²­&lt;/strong>í•©ë‹ˆë‹¤. request ìš”ì²­ ì´í›„ ë¬´ì‘ìœ„ë¡œ sleepí•©ë‹ˆë‹¤. ì—°ì†ì ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ ê²ƒì´ë¼ê³  ì˜ˆìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h4 id="network">Network
&lt;/h4>&lt;p>ë„¤íŠ¸ì›Œí¬ ì²˜ë¦¬ìœ¨ì„ ë³´ë©´ ì²˜ë¦¬ê°€ ë˜ì—ˆë‹¤ê°€ 0byteë¡œ ë–¨ì–´ì¡Œë‹¤ê°€ ë‹¤ì‹œ ìƒìŠ¹í•©ë‹ˆë‹¤. ì´ëŠ” ì €í¬ê°€ ì‚¬ìš©í•œ ë„êµ¬ì¸ GoNetWorkerì˜ íŠ¹ì§• ë•Œë¬¸ì— ë°œìƒí•œ ê·¸ë˜í”„ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-4.png"
width="665"
height="330"
srcset="https://s0okju.github.io/p/opsathlan-1/image-4_hu296061120735338974.png 480w, https://s0okju.github.io/p/opsathlan-1/image-4_hu9681598494445371367.png 1024w"
loading="lazy"
alt="Springboot application bytes per second"
class="gallery-image"
data-flex-grow="201"
data-flex-basis="483px"
>&lt;/p>
&lt;p>ê·¸ ì´ì™¸ì—ë„ ì•„ë˜ì™€ ê°™ì€ íŠ¹ì§•ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>í‰ê· ì ìœ¼ë¡œ 1200bytesë¥¼ ë„˜ì–´ê°€ì§€ ì•ŠëŠ”ë‹¤.&lt;/li>
&lt;/ul>
&lt;h4 id="memory">Memory
&lt;/h4>&lt;p>ê·¸ì— ë¹„í•´ memoryëŠ” ì ì§„ì ìœ¼ë¡œ ìƒìŠ¹í•˜ëŠ” ê·¸ë˜í”„ë¥¼ ë³´ì—¬ì£¼ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë˜í”„ë¥¼ ë³´ë‹ˆ &lt;strong>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¶ˆí•„ìš”í•œ ë©”ëª¨ë¦¬ ìì›ì„ ë‚­ë¹„í•œë‹¤&lt;/strong>ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-5.png"
width="685"
height="394"
srcset="https://s0okju.github.io/p/opsathlan-1/image-5_hu14895577820262148279.png 480w, https://s0okju.github.io/p/opsathlan-1/image-5_hu8570481994504803877.png 1024w"
loading="lazy"
alt="Springboot applicationì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰"
class="gallery-image"
data-flex-grow="173"
data-flex-basis="417px"
>&lt;/p>
&lt;p>ì›ì¸ì„ êµ¬ì²´ì ìœ¼ë¡œ íŒŒì•…í•˜ê¸° ìœ„í•´ì„œëŠ” springbootì— ëŒ€í•œ ë©”íŠ¸ë¦­ì´ í•„ìš”í•©ë‹ˆë‹¤. cAdvisor ë§Œìœ¼ë¡œëŠ” ì •êµí•œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ì— í•œê³„ê°€ ìˆìœ¼ë¯€ë¡œ í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ í™œìš©í•´ì•¼ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ë‹¤ìŒí¸ì—ëŠ”-">ë‹¤ìŒí¸ì—ëŠ” &amp;hellip;
&lt;/h2>&lt;p>ë‹¤ìŒ í¸ì—ëŠ” í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ springboot ê´€ë ¨ ë©”íŠ¸ë¦­ìŠ¤ë¥¼ ìˆ˜ì§‘í•˜ê³  ë¬¸ì œë¥¼ í•´ê²°í•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p></description></item><item><title>GoNetWorker - 1. GoNetWorker ì†Œê°œì™€ ì´ˆê¸° ê¸°ëŠ¥</title><link>https://s0okju.github.io/p/gonetworker-1/</link><pubDate>Sun, 15 Sep 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/gonetworker-1/</guid><description>&lt;p>ê°œì¸ì ìœ¼ë¡œ ìš´ì˜ ëª¨ë‹ˆí„°ë§ì„ ê³µë¶€í•˜ê³  ì‹¶ì—ˆë‹¤. ë¬¸ì œëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì—†ë‹¤ëŠ” ê²ƒì´ì—ˆë‹¤.
ëŒ€ì•ˆìœ¼ë¡œ ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸ ë„êµ¬ë¥¼ ì‚¬ìš©í•´ì„œ ê·¹í•œì˜ ìƒí™©ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
ë‚˜ëŠ” &lt;strong>í˜„ì‹¤ì ì¸ ìƒí™©ì„ ì¬í˜„&lt;/strong>í•˜ê³  ì‹¶ì—ˆë‹¤. ê·¸ë˜ì„œ ì‚¬ìš©ìê°€ ì§ì ‘ ë‚´ ì„œë²„ë¥¼ ì‚¬ìš©í•œ ê²ƒì²˜ëŸ¼ íŒ¨í‚·ì„ ë³´ë‚´ëŠ” ë„êµ¬ë¥¼ ë§Œë“¤ê¸°ë¡œ ê²°ì‹¬í–ˆë‹¤.&lt;/p>
&lt;h2 id="gonetworker">GoNetWorker
&lt;/h2>&lt;p>GoNetWorkerëŠ” Goë¥¼ í™œìš©í•œ ê°€ìƒ ìš´ì˜ ì‹œë®¬ë ˆì´ì…˜ ë„êµ¬ì´ë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>
ë¯¸ë¦¬ ì„¤ì •í•œ endpoint ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì„œë²„ì— ëœë¤ìœ¼ë¡œ requestë¥¼ ë³´ë‚´ëŠ” ë„êµ¬ì´ë‹¤.&lt;/p>
&lt;h3 id="endpoint-ì •ì˜---worksjson">endpoint ì •ì˜ - works.json
&lt;/h3>&lt;p>í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê¸° ìœ„í•´ì„œëŠ” endpointì— ëŒ€í•œ ì •ë³´ë¥¼ ì •í™•í•˜ê²Œ ê¸°ì…í•´ì•¼ í•œë‹¤.&lt;/p>
&lt;ul>
&lt;li>settings
&lt;ul>
&lt;li>requestë¥¼ ë³´ë‚´ê¸° ìœ„í•œ ì„¤ì • ì •ë³´&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>works
&lt;ul>
&lt;li>requestë¥¼ ë³´ë‚¼ ëŒ€ìƒì— ëŒ€í•œ ì •ë³´&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>tasks
&lt;ul>
&lt;li>urlì˜ ê²½ë¡œ ì •ë³´&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;settings&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sleep_range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="c1">// request ì „ì†¡ ì‹œ ëŒ€ê¸°ì‹œê°„ ë²”ìœ„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;works&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uri&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;http://localhost&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">8080&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tasks&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;/users/1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;method&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;GET&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="êµ¬ì¡°">êµ¬ì¡°
&lt;/h3>&lt;p>GoNetWorkerëŠ” ì‚¬ìš©ìê°€ íŠ¹ë³„í•œ í–‰ë™ì„ ì·¨í•˜ê¸° ì „ê¹Œì§€ ì§€ì†ì ìœ¼ë¡œ requestë¥¼ ë³´ë‚¸ë‹¤. ì´ˆê¸°ì—ëŠ” &lt;code>ctrl + c&lt;/code>ë¥¼ í´ë¦­í–ˆì„ ê²½ìš° ì‹¤í–‰ì´ ì¤‘ë‹¨ë  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="k">go&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">select&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="nx">stopChan&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Received interrupt signal. Shutting down...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">work&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">config&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Works&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">rand&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Intn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">config&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Works&lt;/span>&lt;span class="p">))]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">task&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">work&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Tasks&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">rand&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Intn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">work&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Tasks&lt;/span>&lt;span class="p">))]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">wg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">client&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Client&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">go&lt;/span> &lt;span class="nf">makeRequest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">work&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">task&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">client&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">wg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">config&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Settings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SleepRange&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">randomSleep&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Duration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rand&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Intn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">config&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Settings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SleepRange&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">randomSleep&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì„¸ë¶€ì ì¸ êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/gonetworker-1/image-2.png"
width="597"
height="228"
srcset="https://s0okju.github.io/p/gonetworker-1/image-2_hu11962175864221074126.png 480w, https://s0okju.github.io/p/gonetworker-1/image-2_hu9914905335054229857.png 1024w"
loading="lazy"
alt="êµ¬ì¡°ë„"
class="gallery-image"
data-flex-grow="261"
data-flex-basis="628px"
>&lt;/p>
&lt;h2 id="ì˜ˆì‹œ">ì˜ˆì‹œ
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">go run main.go
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>GoNetWorkerë¡œ ì‹¤í–‰ë˜ë©´ ì•„ë˜ì™€ ê°™ì´ ëœë¤ìœ¼ë¡œ requestë¥¼ ë³´ë‚´ê²Œ ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/gonetworker-1/image.png"
width="446"
height="180"
srcset="https://s0okju.github.io/p/gonetworker-1/image_hu7009463788775269401.png 480w, https://s0okju.github.io/p/gonetworker-1/image_hu9293748275908566763.png 1024w"
loading="lazy"
alt="GoNetWorker ì‹¤í–‰ ë¡œê·¸"
class="gallery-image"
data-flex-grow="247"
data-flex-basis="594px"
>&lt;/p>
&lt;p>ì„œë²„ì—ì„œ í™•ì¸í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì •ìƒì ìœ¼ë¡œ requestë¥¼ ë°›ì•˜ìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/gonetworker-1/image-1.png"
width="446"
height="180"
srcset="https://s0okju.github.io/p/gonetworker-1/image-1_hu7009463788775269401.png 480w, https://s0okju.github.io/p/gonetworker-1/image-1_hu9293748275908566763.png 1024w"
loading="lazy"
alt="Server ë¡œê·¸"
class="gallery-image"
data-flex-grow="247"
data-flex-basis="594px"
>&lt;/p>
&lt;h2 id="ë³´ì™„í• -ì ">ë³´ì™„í•  ì 
&lt;/h2>&lt;p>ì´ˆê¸° ë²„ì „ì´ë¼ ì¶”ê°€í•´ì•¼í•  ì ì´ ë§ë‹¤. ë‹¤ìŒ ê¸€ì—ì„œëŠ” ì•„ë˜ì˜ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê³  ì°¾ì•„ì˜¤ê² ë‹¤.&lt;/p>
&lt;ol>
&lt;li>Getìœ¼ë¡œ ì „ì†¡í•  ê²½ìš° ë³´ì™„
&lt;ol>
&lt;li>pathì— ì‹ë³„ìê°€ ìˆì„ ê²½ìš°&lt;/li>
&lt;li>parameterê°€ ìˆì„ ê²½ìš°&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>Postë¡œ ì „ì†¡í•  ê²½ìš°&lt;/li>
&lt;li>goë¥¼ ë¹Œë“œí•˜ê¸° ìœ„í•œ makefile&lt;/li>
&lt;/ol>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>ì´ë ‡ê²Œ ì„¤ëª…í•˜ëŠ”ê²Œ ë§ëŠ”ì§€ ëª¨ë¥´ê² ë‹¤.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Openstack - Kubesprayë¥¼ í™œìš©í•œ Kubernetes ì„¤ì¹˜ ì‹œ Ansible ì˜¤ë¥˜</title><link>https://s0okju.github.io/p/openstack-kubernetes-installation-2/</link><pubDate>Sat, 17 Aug 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/openstack-kubernetes-installation-2/</guid><description>&lt;p>Kubernetes ì„¤ì¹˜ëŠ” &lt;a class="link" href="https://velog.io/@jaehan/Openstack-%EA%B8%B0%EB%B0%98-Kubernets-%EA%B5%AC%EC%B6%95-with-Kubespray" target="_blank" rel="noopener"
>ë³€ì¬í•œë‹˜ì˜ ë¸”ë¡œê·¸&lt;/a>ë¥¼ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ansible-ping-ë¬¸ì œ">Ansible Ping ë¬¸ì œ
&lt;/h2>&lt;p>Ansible Ping ìˆ˜í–‰ ì‹œ ëª¨ë“  ë…¸ë“œì— ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤. ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ í™•ì¸í•´ë³´ë‹ˆ ssh í‚¤ê°€ ì œëŒ€ë¡œ ì ìš©ë˜ì§€ ì•Šì€ ê²ƒì²˜ëŸ¼ ë³´ì˜€ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Kubernetes-k8s-node-nf-2 | UNREACHABLE! =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;changed&amp;#34;: false,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;msg&amp;#34;: &amp;#34;Data could not be sent to remote host \&amp;#34;10.0.2.176\&amp;#34;. Make sure this host can be reached over ssh: kex_exchange_identification: Connection closed by remote host\r\nConnection closed by UNKNOWN port 65535\r\n&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;unreachable&amp;#34;: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>Ansibleì€ sshë¥¼ í™œìš©í•˜ì—¬ target ë…¸ë“œì™€ í†µì‹ í•œë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h3 id="í•´ê²°ì±…-1-ê³µê°œí‚¤-ì•Œê³ ë¦¬ì¦˜-ë³€ê²½">í•´ê²°ì±… 1. ê³µê°œí‚¤ ì•Œê³ ë¦¬ì¦˜ ë³€ê²½
&lt;/h3>&lt;p>openstack logë¥¼ í™•ì¸í•´ë³´ë‹ˆ debian imageì— ê³µê°œí‚¤ê°€ authorized_keysì— ì œëŒ€ë¡œ ë³µì‚¬ë˜ì§€ ì•Šì•„ ssh í†µì‹ ì„ ì œëŒ€ë¡œ ìˆ˜í–‰í•˜ì§€ ëª»í•œ ê²ƒì´ì—ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img1.png"
width="608"
height="123"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img1_hu4758531342135746087.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img1_hu18028352303563241942.png 1024w"
loading="lazy"
alt="publickeyê°€ ì œëŒ€ë¡œ ë³µì‚¬ë˜ì§€ ì•Šì€ ê²½ìš° instance log"
class="gallery-image"
data-flex-grow="494"
data-flex-basis="1186px"
>&lt;/p>
&lt;p>ssh í‚¤ë¥¼ ed25519 ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ìƒì„±í•˜ë©´ í‚¤ê°€ ì œëŒ€ë¡œ ë³µì‚¬ë˜ì§€ ì•Šì•˜ì§€ë§Œ rsaë¡œ ë³€ê²½í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ í‚¤ê°€ ë³µì‚¬ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img2.png"
width="1135"
height="149"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img2_hu17931454363939670103.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img2_hu11759902572458053645.png 1024w"
loading="lazy"
alt="publickeyê°€ ì œëŒ€ë¡œ ë³€ê²½ëœ ëª¨ìŠµ"
class="gallery-image"
data-flex-grow="761"
data-flex-basis="1828px"
>&lt;/p>
&lt;blockquote>
&lt;p>ë³´ì•ˆì„ ê³ ë ¤í•˜ë©´ rsaë³´ë‹¤ëŠ” ed25519 ì•Œê³ ë¦¬ì¦˜ì´ ê¶Œì¥ëœë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;/blockquote>
&lt;p>ë‹¤ì‹œ pingì„ ìˆ˜í–‰í•˜ë©´ ì œëŒ€ë¡œ ìˆ˜í–‰ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img3.png"
width="831"
height="784"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img3_hu17806257454344620510.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img3_hu12260926215604726165.png 1024w"
loading="lazy"
alt="Ansible ping ì„±ê³µ"
class="gallery-image"
data-flex-grow="105"
data-flex-basis="254px"
>&lt;/p>
&lt;h3 id="í•´ê²°ì±…-2-ssh-agent-ì‹¤í–‰">í•´ê²°ì±… 2. ssh-agent ì‹¤í–‰
&lt;/h3>&lt;p>ë§Œì•½ì— ì›ê²©ìœ¼ë¡œ openstack ì„œë²„ì— ì ‘ì†í•œë‹¤ê³  ê°€ì •í•´ë³´ì. ì‚¬ìš©ìë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ì„¸ì…˜ì„ í•œë²ˆ ëŠê²Œ ë˜ë©´ ë™ì¼í•œ ì´ìœ ë¡œ ë¬¸ì œê°€ ìƒê¸´ë‹¤.&lt;/p>
&lt;p>ìš°ì„  ìš°ë¦¬ê°€ ì´ˆê¸°ì— ansibleë¥¼ ì„¸íŒ…í•  ë•Œ ssh-agentë¥¼ ì‹¤í–‰í•˜ê³  private keyë¥¼ ì¶”ê°€í•˜ëŠ” ì‘ì—…ì„ í•œë‹¤. ssh-agentëŠ” ssh-add ëª…ë ¹ì–´ë¥¼ í™œìš©í•˜ì—¬ í‚¤ë¥¼ ê¸°ì–µí•˜ê³  ì‚¬ìš©í•˜ê²Œ ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ë°±ê·¸ë¼ìš´ë“œì— agent ì‹¤í–‰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eval &amp;#34;$(ssh-agent -s)&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># í‚¤ ì¶”ê°€
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-add ~/.ssh/id_rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ssh-agentëŠ” í”„ë¡œì„¸ìŠ¤ë¡œì¨ ì‘ë™ë¼ ì¤‘ê°„ì— sshê°€ ì¤‘ë‹¨ë˜ë”ë¼ë„ í”„ë¡œì„¸ìŠ¤ê°€ ë‚¨ì•„ìˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ &lt;strong>í˜„ì¬ ì‚¬ìš©ì(stack)ê°€ ì‹¤í–‰ì‹œí‚¨ í”„ë¡œì„¸ìŠ¤ë¥¼ ë¨¼ì € ì—†ì• ê³  ssh-agentë¥¼ ì‹¤í–‰ì‹œí‚¤ë„ë¡ êµ¬í˜„&lt;/strong>í•˜ë©´ ëœë‹¤.&lt;/p>
&lt;p>openstackì€ stack ì‚¬ìš©ìê°€ ê´€ë¦¬í•œë‹¤. stack ì‚¬ìš©ìì˜ &lt;code>~/.bashrc&lt;/code> ì— ssh-agentë¥¼ ì¶”ê°€í•˜ì—¬ stack ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸ ì„±ê³µí• ë•Œë§ˆë‹¤ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Ansible ssh agent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Delete used ssh-agent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f ~/scripts/delete_ssh_agent.sh &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> . ~/scripts/delete_ssh_agent.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Create new ssh-agent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">eval&lt;/span> &lt;span class="k">$(&lt;/span>ssh-agent -s&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-add ~/.ssh/id_rsa.kubespray
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>delete_ssh_agent.sh&lt;/code> ì€ openstackì„ ê´€ë¦¬í•˜ëŠ” ì‚¬ìš©ì(stack)ê°€ ê°€ì§€ê³  ìˆëŠ” ssh-agentë¥¼ ì‚­ì œí•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Get all PIDs of ssh-agent processes owned by the user &amp;#39;stack&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">pids&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>pgrep -u stack ssh-agent&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Check if any PIDs were found&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -z &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$pids&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;No ssh-agent processes found for user &amp;#39;stack&amp;#39;.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Loop through each PID and attempt to kill the process&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> pid in &lt;span class="nv">$pids&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Killing ssh-agent process with PID &lt;/span>&lt;span class="nv">$pid&lt;/span>&lt;span class="s2">...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">kill&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$pid&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Check if the process was successfully killed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> pgrep -u stack -x ssh-agent &amp;gt; /dev/null&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Failed to kill process with PID &lt;/span>&lt;span class="nv">$pid&lt;/span>&lt;span class="s2">. You may need to use sudo.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Successfully killed process with PID &lt;/span>&lt;span class="nv">$pid&lt;/span>&lt;span class="s2">.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ìƒˆë¡­ê²Œ ì ‘ì†í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img7.png"
width="610"
height="92"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img7_hu10470244405540726725.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img7_hu12211404007100571060.png 1024w"
loading="lazy"
alt="stack login ì„±ê³µ"
class="gallery-image"
data-flex-grow="663"
data-flex-basis="1591px"
>&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img8.png"
width="723"
height="67"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img8_hu7155961518869793814.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img8_hu3663118609567118447.png 1024w"
loading="lazy"
alt="ssh-agent í”„ë¡œì„¸ìŠ¤ í™•ì¸"
class="gallery-image"
data-flex-grow="1079"
data-flex-basis="2589px"
>&lt;/p>
&lt;blockquote>
&lt;p>ì´ ë°©ì‹ì€ ë‹¨ì¼ ì‚¬ìš©ìë§Œ ê´€ë¦¬í•œë‹¤ëŠ” ê°€ì •í•˜ì—ì„œ ë§Œë“  í•´ê²°ì±…ì´ë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h2 id="nameserver-ë¬¸ì œ">Nameserver ë¬¸ì œ
&lt;/h2>&lt;p>playbookë¥¼ ë°°í¬í•´ë³´ì.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ansible-playbook --become -i inventory/test-cluster/hosts cluster.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>nameserverë¡œ ì¸í•´ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤. ë³´í†µ ì´ëŸ° ë¬¸ì œëŠ” nameserverì˜ ì„¤ì •ì´ ì˜ëª»ëœ ê²½ìš°ì— ë°œìƒë˜ë©° ì•ˆì „í•œ google dns(8.8.8.8, 8.8.4.4)ë¡œ ì„¤ì •í•˜ë©´ í•´ê²°ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> &amp;#34;msg&amp;#34;: &amp;#34;E: Failed to fetch http://security.debian.org/debian-security/pool/updates/main/p/python-apt/python-apt-common_1.8.4.3_all.deb Temporary failure resolving &amp;#39;deb.debian.org&amp;#39;\nE: Failed to fetch http://security.debian.org/debian-security/pool/updates/main/p/python-apt/python3-apt_1.8.4.3_amd64.deb Temporary failure resolving &amp;#39;deb.debian.org&amp;#39;\nE: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?&amp;#34;,
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="í•´ê²°ì±…-1-resolvconf-ìˆ˜ì •ì˜ëª»ëœ-ì ‘ê·¼">í•´ê²°ì±… 1. resolv.conf ìˆ˜ì •(ì˜ëª»ëœ ì ‘ê·¼)
&lt;/h3>&lt;p>DNSë¥¼ ì„¤ì •í•˜ëŠ” &lt;code>resolv.conf&lt;/code> ë¥¼ í™•ì¸í•´ë³´ë©´ 127.0.0.53ë¡œ ì„¤ì •ë˜ì–´ ìˆë‹¤. ì•ˆì „í•˜ê²Œ google dns ì„œë²„ë¡œ ë³€ê²½í•´ë³´ì&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nameserver 127.0.0.53
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì‹¤ì œë¡œëŠ” &lt;strong>ìš°ë¦¬ê°€ ì§ì ‘ ë³€ê²½í•˜ë©´ ì•ˆëœë‹¤.&lt;/strong>&lt;/p>
&lt;blockquote>
&lt;p>DO NOT EDIT THIS FILE BY HAND &amp;ndash; YOUR CHANGES WILL BE OVERWRITTEN&lt;/p>
&lt;/blockquote>
&lt;p>resolv.confì€ /run í´ë” ë‚´ì— ì‹¬ë³¼ë§ ë§í¬ê°€ ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë§ˆìŒëŒ€ë¡œ ìˆ˜ì •í•˜ëŠ” ê²ƒì€ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img4.png"
width="945"
height="89"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img4_hu14791507789255162482.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img4_hu17658926328053728254.png 1024w"
loading="lazy"
alt="resolv.conf ì‹¬ë³¼ë¦­ ë§í¬"
class="gallery-image"
data-flex-grow="1061"
data-flex-basis="2548px"
>&lt;/p>
&lt;p>ì‹¤ì œë¡œ &lt;a class="link" href="https://libguestfs.org/virt-customize.1.html" target="_blank" rel="noopener"
>virt-customize&lt;/a> ë¥¼ í™œìš©í•´ì„œ resolv.confë¥¼ ìˆ˜ì •í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ ë³„ë„ë¡œ ë§Œë“¤ì—ˆì§€ë§Œ ì˜ë¯¸ê°€ ì—†ì—ˆë‹¤.&lt;/p>
&lt;h3 id="í•´ê²°ì±…-2-terraform-ìˆ˜ì •">í•´ê²°ì±… 2. Terraform ìˆ˜ì •
&lt;/h3>&lt;p>ê°€ì¥ ì•ˆì „í•œ ì ‘ê·¼ë²•ì´ë‹¤.
ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€ë¥¼ ë³´ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ ë…¸ë“œë“¤ì´ kubernetes-network subnetë¥¼ í™œìš©í•œë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img5.png"
width="809"
height="609"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img5_hu16936197825592757140.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img5_hu8815827593228135667.png 1024w"
loading="lazy"
alt="kubernetes ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€"
class="gallery-image"
data-flex-grow="132"
data-flex-basis="318px"
>&lt;/p>
&lt;p>Openstackì˜ subnetì— DNS nameserverë¥¼ ëª…ì‹œí•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ Openstack ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°°í¬í•˜ëŠ” terraform íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤.
&lt;code>~/kubespray/contrib/terraform/openstack/modules/network/main.tf&lt;/code> ë‚´ì— &lt;code>dns_nameservers&lt;/code> ë¥¼ google dnsë¡œ ë³€ê²½ì‹œí‚¨ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-tf" data-lang="tf">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_subnet_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;k8s&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> = &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cluster_name&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-internal-network&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">count&lt;/span> = &lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">use_neutron&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">network_id&lt;/span> = &lt;span class="nx">openstack_networking_network_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">k8s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">count&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">cidr&lt;/span> = &lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subnet_cidr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">ip_version&lt;/span> = &lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">dns_nameservers&lt;/span> = &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;8.8.8.8&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;8.8.4.4&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì›ë˜ë¼ë©´ variables.tfë¥¼ ìˆ˜ì •í•´ì•¼ í–ˆì§€ë§Œ ì œëŒ€ë¡œ ì ìš©ì´ ë˜ì§€ ì•Šì•˜ê³ , google dns serverëŠ” ê±°ì˜ ë¶ˆë³€ì— ê°€ê¹ê¸° ë•Œë¬¸ì— main.tfì— ì§ì ‘ ì‘ì„±í•´ë„ ëœë‹¤ê³  íŒë‹¨í–ˆë‹¤.&lt;/p>
&lt;p>ì•„ë˜ì™€ ê°™ì´ ì œëŒ€ë¡œ ì ìš©ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img6.png"
width="522"
height="322"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img6_hu15219951955343804185.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img6_hu17687434228084671215.png 1024w"
loading="lazy"
alt="dns nameserver ì„±ê³µ"
class="gallery-image"
data-flex-grow="162"
data-flex-basis="389px"
>&lt;/p>
&lt;h2 id="ê·¸-ì´ì™¸ì˜-debian-ë¬¸ì œë“¤">ê·¸ ì´ì™¸ì˜ debian ë¬¸ì œë“¤
&lt;/h2>&lt;p>ê·¸ ì´í›„ë¶€í„° debianì—ëŠ” ì¡ë‹¤í•œ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img9.png"
width="1036"
height="237"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img9_hu7883906071781436747.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img9_hu9099882195059677338.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="437"
data-flex-basis="1049px"
>&lt;/p>
&lt;h3 id="í•´ê²°ì±…-1-í´ë¼ìš°ë“œ-ì´ë¯¸ì§€ë¥¼-ubuntuë¡œ-ë³€ê²½">í•´ê²°ì±… 1. í´ë¼ìš°ë“œ ì´ë¯¸ì§€ë¥¼ ubuntuë¡œ ë³€ê²½
&lt;/h3>&lt;p>í´ë¼ìš°ë“œ ì´ë¯¸ì§€ë¥¼ debianì—ì„œ ubuntuë¡œ ë³€ê²½í–ˆë‹¤. ssh í‚¤ë¥¼ ed25519 ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì ìš©í•´ë„ ì •ìƒì ìœ¼ë¡œ ì‘ë™ëœë‹¤.
Ansible playbookë¥¼ ì‘ë™ì‹œí‚¤ë©´ ì •ìƒì ìœ¼ë¡œ kubernetesê°€ ë°°í¬ëœë‹¤.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://dev.to/ccoveille/how-to-generate-a-secure-and-robust-ssh-key-in-2024-3f4f" target="_blank" rel="noopener"
>https://dev.to/ccoveille/how-to-generate-a-secure-and-robust-ssh-key-in-2024-3f4f&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://askubuntu.com/questions/351168/diffrence-between-the-dns-setting-in-etc-resolv-conf-and-etc-network-interfaces" target="_blank" rel="noopener"
>https://askubuntu.com/questions/351168/diffrence-between-the-dns-setting-in-etc-resolv-conf-and-etc-network-interfaces&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Openstack - Kubesprayë¥¼ í™œìš©í•œ Kubernetes ì„¤ì¹˜ ì‹œ Terraform ì˜¤ë¥˜</title><link>https://s0okju.github.io/p/openstack-kubernetes-installation-1/</link><pubDate>Thu, 01 Aug 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/openstack-kubernetes-installation-1/</guid><description>&lt;h2 id="openstack-ì„¤ì¹˜">Openstack ì„¤ì¹˜
&lt;/h2>&lt;p>&lt;a class="link" href="https://velog.io/@im2sh/Ubuntu-22.04%EC%97%90%EC%84%9C-Devstack-%EC%84%A4%EC%B9%98" target="_blank" rel="noopener"
>im2sh.log velog&lt;/a>ì„ ì°¸ê³ í•´ì„œ Devstackì„ í™œìš©í•´ Openstackì„ ì„¤ì¹˜í•˜ë©´ ëœë‹¤. ë‹¤ë§Œ ë¡œì»¬ í™˜ê²½ì—ì„œë§Œ ìˆ˜í–‰í•  ì˜ˆì •ì´ë¯€ë¡œ ê°€ìƒ public ip ëŒ€ì—­ ìƒì„±ì€ ì œì™¸í–ˆë‹¤.&lt;/p>
&lt;h3 id="ì´ë¯¸ì§€-ìƒì„±">ì´ë¯¸ì§€ ìƒì„±
&lt;/h3>&lt;p>Novaì— ì˜¬ë¦° ì´ë¯¸ì§€ë¥¼ ìƒì„±í•œë‹¤. Ubuntuë³´ë‹¤ Debianì´ ê°€ë³ê³  ì»¤ìŠ¤í…€í•˜ê¸° ìš©ì´í•´ì„œ ì„ íƒ&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>í•˜ê²Œ ë˜ì—ˆë‹¤.
ì•„ë˜ì˜ ëª…ë ¹ì–´ëŠ” &lt;a class="link" href="https://cloud.debian.org/cdimage/cloud/OpenStack/current-10/" target="_blank" rel="noopener"
>debian ê³µì‹ í™ˆí˜ì´ì§€&lt;/a>ë¥¼ ì°¸ê³ í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">wget https://cloud.debian.org/cdimage/cloud/OpenStack/current-10/debian-10-openstack-amd64.qcow2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openstack image create &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --container-format bare &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --disk-format qcow2 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --file debian-10-openstack-amd64.qcow2 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> debian-10-openstack-amd64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>dashboardë¥¼ ë³´ë©´ ì •ìƒì ìœ¼ë¡œ ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œëœ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img1.png"
width="423"
height="236"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img1_hu8436946750979996299.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img1_hu306546544194277109.png 1024w"
loading="lazy"
alt="horizonì—ì„œ í™•ì¸í•œ ì´ë¯¸ì§€"
class="gallery-image"
data-flex-grow="179"
data-flex-basis="430px"
>&lt;/p>
&lt;h2 id="kubesprayë¥¼-í™œìš©í•œ-kubernetes-êµ¬ì¶•">Kubesprayë¥¼ í™œìš©í•œ Kubernetes êµ¬ì¶•
&lt;/h2>&lt;ul>
&lt;li>OS - Ubuntu 24.04&lt;/li>
&lt;li>Openstack - 2024.1&lt;/li>
&lt;li>Kubespray - v2.21.0&lt;/li>
&lt;li>Terraform - v1.9.3&lt;/li>
&lt;/ul>
&lt;p>ì „ë°˜ì ì¸ ì„¤ì¹˜ ê³¼ì •ì€ &lt;a class="link" href="https://velog.io/@jaehan/Openstack-%EA%B8%B0%EB%B0%98-Kubernets-%EA%B5%AC%EC%B6%95-with-Kubespray" target="_blank" rel="noopener"
>ë³€ì¬í•œë‹˜ì˜ velog&lt;/a>ë¥¼ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>openstack v2, v3 APIëŠ” ë‹¤ë¥¸ì ì´ ë§ìŠµë‹ˆë‹¤. ë§Œì•½ì— v2 ë²„ì „ìœ¼ë¡œ í•˜ê³  ì‹¶ë‹¤ë©´ ìš´ì˜ì²´ì œì™€ kubespray, terraform ë²„ì „ì„ ë§ì¶”ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h3 id="ssh-í†µì‹ ì„-ìœ„í•œ-ê³µê°œí‚¤-ìƒì„±">ssh í†µì‹ ì„ ìœ„í•œ ê³µê°œí‚¤ ìƒì„±
&lt;/h3>&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ ì„¤ì •ì„ ìœ„í•´ Ansibleë¥¼ ì‚¬ìš©í•œë‹¤. Ansibleì€ sshë¥¼ í™œìš©í•˜ì—¬ ëŒ€ìƒì— ì ‘ì†í•  ìˆ˜ ìˆë‹¤. ì´ í‚¤ëŠ” ì¶”í›„ Kubernetesì—ì„œ ë…¸ë“œë¼ë¦¬ í†µì‹ í•  ìˆ˜ ìˆëŠ” openstackì˜ keypairë¡œì¨ í™œìš©ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ssh-keygen -t ed25519 -N &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span> -f ~/.ssh/id_rsa.kubespray
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">eval&lt;/span> &lt;span class="k">$(&lt;/span>ssh-agent -s&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-add ~/.ssh/id_rsa.kubespray
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ì˜¤ë¥˜---one-of-auth_url-or-cloud-must-be-specified">ì˜¤ë¥˜ - One of auth_url or cloud must be specified
&lt;/h2>&lt;p>ê²°ë¡ ë¶€í„° ë§í•˜ìë©´ í´ë¼ì´ì–¸íŠ¸ì™€ ê´€ë ¨ëœ í™˜ê²½ ë³€ìˆ˜ê°€ ì €ì¥ë˜ì§€ ì•Šì•„ì„œ ìƒê¸´ ì¼ì´ë‹¤.&lt;/p>
&lt;h3 id="í•´ê²°-ê³¼ì •">í•´ê²° ê³¼ì •
&lt;/h3>&lt;p>ì•„ë˜ì˜ ì˜¤ë¥˜ë¥¼ ì½ì–´ë³´ë©´ openstackì˜ providerë¥¼ ì •ì˜í•˜ëŠ” tfíŒŒì¼ì— ì†ì„±ì´ ì •ì˜ë˜ì–´ ìˆì§€ ì•Šë‹¤ê³  í•œë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img2.png"
width="890"
height="330"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img2_hu8112429072468131913.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img2_hu4805894429976019059.png 1024w"
loading="lazy"
alt="kubernetes ì„¤ì¹˜ ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜"
class="gallery-image"
data-flex-grow="269"
data-flex-basis="647px"
>&lt;/p>
&lt;p>&lt;code>~/kubespray/contrib/terraform/openstack/version.tf&lt;/code> ë¥¼ ë³´ë©´ providerê°€ ì •ì˜ë˜ì–´ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img4.png"
width="536"
height="172"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img4_hu16157272428307913724.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img4_hu4644667792578589037.png 1024w"
loading="lazy"
alt="~/kubespray/contrib/terraform/openstack/version.tf"
class="gallery-image"
data-flex-grow="311"
data-flex-basis="747px"
>&lt;/p>
&lt;p>&lt;a class="link" href="https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.54.1/docs" target="_blank" rel="noopener"
>ê³µì‹ í™ˆí˜ì´ì§€&lt;/a>ë¥¼ ë³´ë©´ ì„¤ì •ê°’ì„ ì¶”ê°€í•  ìˆ˜ ìˆëŠ”ë° ì „ë¶€ë‹¤ ì„ íƒì‚¬í•­ì´ì§€ë§Œ &lt;strong>Openstack ì„¤ì •ê³¼ ê´€ë ¨ í™˜ê²½ë³€ìˆ˜ê°€ ë°˜ë“œì‹œ ì €ì¥&lt;/strong>ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ terraformì— ë³„ë„ë¡œ ì„¤ì •í•´ì•¼ í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Configure the OpenStack Provider
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">provider&lt;/span> &lt;span class="s2">&amp;#34;openstack&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> user_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;admin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> tenant_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;admin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;pwd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> auth_url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;http://myauthurl:5000/v3&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> region&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;RegionOne&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì¦‰ ìœ„ì™€ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•œ ê²ƒì€ í´ë¼ì´ì–¸íŠ¸ì™€ identity ì„œë¹„ìŠ¤ê°€ ìƒí˜¸ ì‘ìš©ì„ ìœ„í•œ í™˜ê²½ ë³€ìˆ˜ê°€ ì—†ì–´ì„œ ìƒê¸´ ì¼ì¸ ê²ƒì´ë‹¤.&lt;/p>
&lt;p>ë‹¤ë§Œ ìˆ˜ë™ìœ¼ë¡œ terraform íŒŒì¼ì— ì‘ì„±í•˜ê±°ë‚˜ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ê²Œ ë˜ë©´ Domain ì •ë³´ê°€ ë¶€ì •í™•í•˜ë‹¤ëŠ” ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë§ˆì£¼í•  ìˆ˜ ìˆë‹¤. openstack ë²„ì „ì— ë”°ë¼ì„œ ì§€ì›í•˜ëŠ” í™˜ê²½ ë³€ìˆ˜ë„ ë‹¤ë¥´ê±°ë‚˜, ê°™ì€ ì¡°ê±´ì— ì‚¬ëŒë§ˆë‹¤ ì‹¤í–‰ ê°€ëŠ¥ ì—¬ë¶€ê°€ ë‹¤ë¥¸ ë“± ë³µí•©ì ì¸ ì´ìœ ê°€ ì¡´ì¬í•œ ê²ƒ ê°™ì•˜ë‹¤.&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img3.png"
width="937"
height="174"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img3_hu632953552256688832.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img3_hu14362972865709894107.png 1024w"
loading="lazy"
alt="Invalid DomainID ì˜¤ë¥˜"
class="gallery-image"
data-flex-grow="538"
data-flex-basis="1292px"
>&lt;/p>
&lt;h3 id="í•´ê²°ì±…">í•´ê²°ì±…
&lt;/h3>&lt;p>Openstackì—ì„œ ì œê³µí•´ì£¼ëŠ” &lt;a class="link" href="https://docs.openstack.org/liberty/ko_KR/install-guide-obs/keystone-openrc.html" target="_blank" rel="noopener"
>í´ë¼ì´ì–¸íŠ¸ í™˜ê²½ ìŠ¤í¬ë¦½íŠ¸(openrc)&lt;/a>ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.&lt;/p>
&lt;p>horizonì— ì‚¬ìš©ìë¥¼ í´ë¦­í•˜ë©´ openstack rc íŒŒì¼ì´ ìˆëŠ”ë°, ì´ë¥¼ ë‹¤ìš´ë¡œë“œí•´ì„œ ì‹¤í–‰ì‹œí‚¤ë©´ ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img5.png"
width="266"
height="290"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img5_hu17918533465447343406.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img5_hu12890130444991611744.png 1024w"
loading="lazy"
alt="horizonì—ì„œ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥í•œ OpenStack RC íŒŒì¼"
class="gallery-image"
data-flex-grow="91"
data-flex-basis="220px"
>&lt;/p>
&lt;p>Linuxì—ì„œ í™˜ê²½ ë³€ìˆ˜ëŠ” bashë¥¼ exití•˜ëŠ” ìˆœê°„ ì‚¬ë¼ì§„ë‹¤.&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup> ì»´í“¨í„°ê°€ í•œë²ˆ êº¼ì§€ê²Œ ë˜ë©´ openrc ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê³„ì† ì‹¤í–‰ì‹œì¼œì¤˜ì•¼ í•œë‹¤.
í™˜ê²½ë³€ìˆ˜ë¥¼ ì˜ì†ì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ë°©ë²•ì€ &lt;code>~/.bashrc&lt;/code>ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì´ë‹¤. ë‹¤ìš´ë¡œë“œí•œ rc íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ë„ë¡ íŒŒì¼ì„ ì„¤ì •í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f ~/rc/k8s-openrc.sh &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> . ~/rc/k8s-openrc.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì¤‘ê°„ì— ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥ ë°›ì•„ì•¼ í•˜ë¯€ë¡œ openrc ìŠ¤í¬ë¦½íŠ¸ì— ë¹„ë°€ë²ˆí˜¸ë¥¼ ë„£ëŠ”ë‹¤. ê°œì¸ì ìœ¼ë¡œ ì´ëŸ° ë°©ë²•ì€ ë³´ì•ˆ ì¸¡ë©´ì—ì„œëŠ” ì¢‹ì§€ ì•Šì•„ ë³´ì¸ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">OS_USERNAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;k8s&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># With Keystone you pass the keystone password.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># echo &amp;#34;Please enter your OpenStack Password for project $OS_PROJECT_NAME as user $OS_USERNAME: &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># read -sr OS_PASSWORD_INPUT&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">OS_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;yourpassword&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>source ~/.bashrc&lt;/code>ë¥¼ ìˆ˜í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ í™˜ê²½ ë³€ìˆ˜ê°€ ì •ìƒì ìœ¼ë¡œ ì„¤ì •ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img6.png"
width="304"
height="85"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img6_hu127809221224869792.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img6_hu6884040885533441460.png 1024w"
loading="lazy"
alt="í™˜ê²½ ë³€ìˆ˜ í™•ì¸"
class="gallery-image"
data-flex-grow="357"
data-flex-basis="858px"
>&lt;/p>
&lt;p>ë‹¤ì‹œ terraformìœ¼ë¡œ kubernetesë¥¼ ì„¤ì¹˜í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img7.png"
width="648"
height="100"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img7_hu3244639628797934306.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img7_hu9562458381420294757.png 1024w"
loading="lazy"
alt="ë°°í¬ ì™„ë£Œ"
class="gallery-image"
data-flex-grow="648"
data-flex-basis="1555px"
>&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://www.quora.com/Which-Linux-distribution-is-best-suited-for-a-cloud-server-environment-and-why" target="_blank" rel="noopener"
>https://www.quora.com/Which-Linux-distribution-is-best-suited-for-a-cloud-server-environment-and-why&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://github.com/terraform-provider-openstack/terraform-provider-openstack/issues/267" target="_blank" rel="noopener"
>https://github.com/terraform-provider-openstack/terraform-provider-openstack/issues/267&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;a class="link" href="https://askubuntu.com/questions/395212/why-environment-variable-disappears-after-terminal-reopen" target="_blank" rel="noopener"
>https://askubuntu.com/questions/395212/why-environment-variable-disappears-after-terminal-reopen&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>ì„œë²„ êµ¬ì¶•ê¸° - 3. ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ëŒ€ì‹œë³´ë“œ ì ‘ì†í•˜ê¸° ê·¸ë¦¬ê³  ìš´ì˜ì˜ ë¬¸ì œì </title><link>https://s0okju.github.io/p/server-access-dashboard-and-management-problems/</link><pubDate>Tue, 16 Jul 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/server-access-dashboard-and-management-problems/</guid><description>&lt;h2 id="ì„œë²„-ìƒíƒœ">ì„œë²„ ìƒíƒœ
&lt;/h2>&lt;p>ì§€ê¸ˆê¹Œì§€ Multipass ë¥¼ í™œìš©í•˜ì—¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì„ ë§Œë“¤ê³ , ì‹¤ì œë¡œ ì ìš©í•˜ëŠ” ê³¼ì •ì„ ê±°ì³¤ë‹¤.
í˜„ì¬ 3ê°œì˜ ë…¸ë“œë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, nfs, mysql, mongoì™€ ê°™ì´ ë°ì´í„°ë² ì´ìŠ¤ê°€ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ëŠ” nfs, ì  í‚¨ìŠ¤ ì„œë²„ëŠ” ops ì¸ìŠ¤í„´ìŠ¤ì— ì €ì¥í–ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img1.png"
width="524"
height="230"
srcset="https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img1_hu12688226233018032363.png 480w, https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img1_hu6323527272890626441.png 1024w"
loading="lazy"
alt="multipass instance list"
class="gallery-image"
data-flex-grow="227"
data-flex-basis="546px"
>&lt;/p>
&lt;p>ì™œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ statefulsetìœ¼ë¡œ ì •ì˜í•˜ì§€ ì•Šê³  ë³„ë„ë¡œ ì„¤ì¹˜í–ˆëŠ”ì§€ ê¶ê¸ˆí•  ê²ƒì´ë‹¤. ì´ìœ ëŠ” ìµœëŒ€í•œ í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ì²˜ëŸ¼ êµ¬í˜„í•˜ê³  ì‹¶ì–´ì„œì˜€ë‹¤.&lt;/p>
&lt;h2 id="ëŒ€ì‹œë³´ë“œ-í™•ì¸í•˜ê¸°">ëŒ€ì‹œë³´ë“œ í™•ì¸í•˜ê¸°
&lt;/h2>&lt;p>ì¼ë‹¨ ì¿ ë²„ë„¤í‹°ìŠ¤ ë‚´ì—ì„œëŠ” ì™¸ë¶€ì™€ í†µì‹ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì€ í¬ê²Œ ë‘ ê°€ì§€ì´ë‹¤.&lt;/p>
&lt;ul>
&lt;li>Ingress&lt;/li>
&lt;li>Nodeport&lt;/li>
&lt;/ul>
&lt;p>ì¼ë‹¨ ì‚¬ì„¤ ë„¤íŠ¸ì›Œí¬ ë‚´ì—ì„œë§Œ ì‚¬ìš©í•  ì˜ˆì •ì´ë¯€ë¡œ Nodeport ë°©ì‹ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ê² ë‹¤.&lt;/p>
&lt;h3 id="ì˜ˆì œ---grafana-ui-í™•ì¸í•˜ê¸°">ì˜ˆì œ - Grafana ui í™•ì¸í•˜ê¸°
&lt;/h3>&lt;p>ì˜ˆë¡œ í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•´ë³´ì. grafana ëŒ€ì‹œë³´ë“œì— ì ‘ê·¼í•  í•„ìš”ì„±ì´ ìˆì„ ê²ƒì´ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img2.png"
width="655"
height="364"
srcset="https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img2_hu13972670278597569804.png 480w, https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img2_hu13718863001304102915.png 1024w"
loading="lazy"
alt="server êµ¬ì„±ë„1"
class="gallery-image"
data-flex-grow="179"
data-flex-basis="431px"
>&lt;/p>
&lt;p>grafana uiì™€ ê´€ë ¨ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ service typeë¥¼ nodeportë¡œ ë³€ê²½í•´ì¤€ í›„ì— Host server(192.168.50.27)ì— ë°©í™”ë²½ì„ ì„¤ì •í•˜ë©´ 192.168.50.27 ì£¼ì†Œë¡œ Grafana uiì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
ê·¸ëŸ¬ë‚˜ ë¬¸ì œë„ ì¡´ì¬í•œë‹¤. ì„œë²„ì— ë¬¸ì œê°€ ìƒê¸°ë©´ ì¬ë°°í¬í•˜ê²Œ ë˜ëŠ”ë°, ì¿ ë²„ë„¤í‹°ìŠ¤ ìŠ¤ì¼€ì¤„ëŸ¬ì— ë”°ë¼ì„œ ë‹¤ë¥¸ ë…¸ë“œì— ë°°ì¹˜ë  ìˆ˜ ìˆë‹¤. ì´ëŸ´ ê²½ìš° ë°°ì¹˜ëœ ë…¸ë“œë¥¼ í™•ì¸í•´ê°€ë©° ê¸°ì¡´ì˜ ë°©í™”ë²½ì„ ë‹«ê³ , ìƒˆë¡œìš´ ë°©í™”ë²½ì„ ì—´ì–´ì¤˜ì•¼ í•œë‹¤.&lt;/p>
&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œëŠ” ì—¬ëŸ¬ ìŠ¤ì¼€ì¤„ë§ ë°©ì‹ì´ ìˆëŠ”ë°&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>, ê·¸ ì¤‘ ê°„ë‹¨í•œ &lt;code>nodeSelector&lt;/code> ë¡œ node1ì— ê°•ì œ ë°°ì¹˜í•˜ì—¬ ì •ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í–ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img3.png"
width="719"
height="364"
srcset="https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img3_hu13131394400430745688.png 480w, https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img3_hu1411433780971369042.png 1024w"
loading="lazy"
alt="server êµ¬ì„±ë„2"
class="gallery-image"
data-flex-grow="197"
data-flex-basis="474px"
>&lt;/p>
&lt;h4 id="nodeselector-ì„¤ì •">nodeSelector ì„¤ì •
&lt;/h4>&lt;p>node1ì— labelë¥¼ type=uië¡œ ì„¤ì •í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">kubectl label nodes node1 &lt;span class="nv">type&lt;/span>&lt;span class="o">=&lt;/span>ui
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img4.png"
width="473"
height="168"
srcset="https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img4_hu17685933620777379879.png 480w, https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img4_hu7008821394765134166.png 1024w"
loading="lazy"
alt="kubectl describe node1"
class="gallery-image"
data-flex-grow="281"
data-flex-basis="675px"
>&lt;/p>
&lt;h4 id="grafana-ui-service-type-ë³€ê²½">grafana ui service type ë³€ê²½
&lt;/h4>&lt;p>Prometheus, Grafanaì˜ ì›í™œí•œ ì„¤ì¹˜ë¥¼ ìœ„í•´ &lt;a class="link" href="https://github.com/prometheus-operator/kube-prometheus" target="_blank" rel="noopener"
>kube-prometheus helm&lt;/a>ì„ ì‚¬ìš©í–ˆë‹¤. helm ì°¨íŠ¸ì˜ íŠ¹ì„±ìƒ values.yamlë¥¼ ì„¤ì •í•˜ì—¬ ê°’ì„ ì£¼ì…í•˜ë¯€ë¡œ &lt;strong>values.yaml&lt;/strong> ë¥¼ í™•ì¸í•´ì•¼ í•œë‹¤.
kube-prometheus helm ì°¨íŠ¸ëŠ” ì—¬ëŸ¬ helm ì°¨íŠ¸ë¡œ êµ¬ì„±ë˜ì–´ ìˆì–´, ì„¤ì •í•˜ê³  ì‹¶ì€ ì„œë¹„ìŠ¤ì˜ &lt;strong>values.yaml&lt;/strong>ë¥¼ ì„¤ì •í•˜ë©´ ëœë‹¤.&lt;/p>
&lt;p>&lt;code>kube-prometheus-stack/charts/grafana/values.yaml&lt;/code> íŒŒì¼ì— ëŒ€ëµ 216ë²ˆì§¸ ì¤„ì— ì•„ë˜ì™€ ê°™ì€ ì„œë¹„ìŠ¤ íƒ€ì…ì„ Nodeportë¡œ ë³€ê²½í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c">## Expose the grafana service to be accessed from outside the cluster (LoadBalancer service).&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">## or access it from within the cluster (ClusterIP service). Set the service type and the port to serve it.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">## ref: http://kubernetes.io/docs/user-guide/services/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">##&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">service&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># type: ClusterIP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">NodePort&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Custom&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">loadBalancerIP&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">loadBalancerClass&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">loadBalancerSourceRanges&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">nodePort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">30060&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Custom&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="helm-nodeselector-ì„¤ì •">helm nodeSelector ì„¤ì •
&lt;/h4>&lt;p>&lt;code>kube-prometheus-stack/charts/grafana/values.yaml&lt;/code> ì˜ 314ë²ˆì§¸ ì¤„ì— node1ì— ë°°ì¹˜ë˜ë„ë¡ ì„¤ì •í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c">## Node labels for pod assignment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">## ref: https://kubernetes.io/docs/user-guide/node-selection/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">nodeSelector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ui&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>helmìœ¼ë¡œ ë°°í¬í•œ í›„ pod ë¦¬ìŠ¤íŠ¸ë¥¼ ë³´ë©´ &lt;strong>{helmìœ¼ë¡œ ë°°í¬í•œ ì´ë¦„}-grafana-{ë¬¸ìì—´}&lt;/strong> ë³´ì´ëŠ”ë°, íŒŒë“œ ë‚´ë¶€ì—ëŠ” grafanaì™€ ê´€ë ¨ëœ ì»¨í…Œì´ë„ˆê°€ í¬í•¨ë˜ì–´ ìˆë‹¤. ì¦‰, ìš°ë¦¬ê°€ ì°¾ë˜ uië„ grafana pod ë‚´ë¶€ì— ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img5.png"
width="679"
height="47"
srcset="https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img5_hu4912721532143004595.png 480w, https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img5_hu17436029454154598293.png 1024w"
loading="lazy"
alt="grafana pod"
class="gallery-image"
data-flex-grow="1444"
data-flex-basis="3467px"
>&lt;/p>
&lt;p>grafana íŒŒë“œì˜ ì •ë³´ë¥¼ ë³´ë©´ nodeSelectorê°€ ì •ìƒì ìœ¼ë¡œ ì ìš©ë˜ì—ˆìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img6.png"
width="1012"
height="84"
srcset="https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img6_hu16764316693557962279.png 480w, https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img6_hu1965827156665099887.png 1024w"
loading="lazy"
alt="grafana pod nodeSelector í™•ì¸"
class="gallery-image"
data-flex-grow="1204"
data-flex-basis="2891px"
>&lt;/p>
&lt;h4 id="ë°©í™”ë²½-ì„¤ì •">ë°©í™”ë²½ ì„¤ì •
&lt;/h4>&lt;p>node1 ì¸ìŠ¤í„´ìŠ¤ì˜ nodeport(30060)ì— íŠ¸ë˜í”½ì´ ë“¤ì–´ì˜¬ ìˆ˜ ìˆë„ë¡ í—ˆìš©í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo iptables -t nat -I PREROUTING -i enp3s0 -p tcp --dport &lt;span class="m">30060&lt;/span> -j DNAT --to-destination 10.120.52.23:30060
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -I FORWARD &lt;span class="m">1&lt;/span> -p tcp -d 10.120.52.23 --dport &lt;span class="m">30060&lt;/span> -j ACCEPT
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>30060 í¬íŠ¸ë¡œ enp3s0 ì¸í„°í˜ì´ìŠ¤ì— ë“¤ì–´ì˜¤ëŠ” íŠ¸ë˜í”½ì„ 10.120.52.23:30060ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜í•œë‹¤.&lt;/li>
&lt;li>10.120.52.23:30060ì— ì ‘ì†í•˜ëŠ” íŠ¸ë˜í”½ì„ í—ˆìš©í•œë‹¤.&lt;/li>
&lt;/ol>
&lt;p>ì„œë²„ì˜ IPë¡œ ì ‘ì†í•˜ë©´ ê·¸ë¼íŒŒë‚˜ ëŒ€ì‹œë³´ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img7.png"
width="1008"
height="738"
srcset="https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img7_hu16625260008989558482.png 480w, https://s0okju.github.io/p/server-access-dashboard-and-management-problems/img7_hu2241485727042100523.png 1024w"
loading="lazy"
alt="grafana dashboard ì ‘ì†í•˜ê¸°"
class="gallery-image"
data-flex-grow="136"
data-flex-basis="327px"
>&lt;/p>
&lt;h2 id="ë¬¸ì œì ">ë¬¸ì œì 
&lt;/h2>&lt;p>Multipassë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê³ , ì™¸ë¶€ì™€ì˜ ì ‘ì†ì„ ìœ„í•´ íŠ¸ë˜í”½ì„ ì œì–´í•˜ëŠ” ê²ƒì€ ë¬¸ì œì ì´ ìˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ì™¸ë¶€ì™€ì˜ ì ‘ì†ì„ í• ë•Œë§ˆë‹¤ iptableë¥¼ ì„¤ì •í•´ì•¼ í•œë‹¤.&lt;/p>
&lt;ul>
&lt;li>ì„œë²„ê°€ shutdownì´ ë  ê²½ìš° ì´ì „ì— ì„¤ì •í–ˆë˜ iptables ruleì´ ì‚¬ë¼ì§„ë‹¤. ì´ëŸ´ ê²½ìš° ê·œì¹™ì„ ë‹¤ì‹œ ì„¤ì •í•˜ê±°ë‚˜, ì´ë¥¼ ëŒ€ë¹„í•´ì„œ ë³„ë„ì˜ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì„œ iptablesì´ ì˜ì†ì„±ì´ ìˆë„ë¡ ì„¤ì •&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>í•´ì•¼ í•œë‹¤.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ì¸ìŠ¤í„´ìŠ¤ê°€ ë§ìœ¼ë©´ ë§ì„ìˆ˜ë¡ ê´€ë¦¬í•˜ê¸° ì–´ë µë‹¤.&lt;/p>
&lt;ul>
&lt;li>ì¿ ë²„ë„¤í‹°ìŠ¤ ì´ì™¸ì—ë„ ë‹¤ì–‘í•œ ì¸ìŠ¤í„´ìŠ¤ê°€ ìˆì§€ë§Œ ì¼ë¦¬ë¦¬ ëª…ë ¹ì–´ë¡œ ìƒíƒœë¥¼ í™•ì¸í•˜ê³ , ì„¤ì •í•˜ëŠ” ê²ƒì€ ë²ˆê±°ë¡­ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ &lt;strong>ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ë„êµ¬ê°€ í•„ìš”&lt;/strong>í–ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>ìœ„ì˜ í•´ê²°ì±…ìœ¼ë¡œ &lt;a class="link" href="https://www.openstack.org/software/project-navigator/openstack-components#openstack-services" target="_blank" rel="noopener"
>OpenStack&lt;/a> ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê³ ì í•œë‹¤. ì¸ìŠ¤í„´ìŠ¤ë¥¼ public cloud ì²˜ëŸ¼ ììœ ìì¬ë¡œ ìƒì„± ë° ì‚­ì œí•  ìˆ˜ ìˆìœ¼ë©°, ë„¤íŠ¸ì›Œí¬ ì„¤ì •ì´ ìš©ì´í–ˆë‹¤. ë˜í•œ í´ë¼ìš°ë“œì— ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ ì„ ëŒ€ë¶€ë¶„ í™œìš©í•  ìˆ˜ ìˆì–´ í´ë¼ìš°ë“œë¥¼ ì•Œì•„ê°€ëŠ”ë° ì¢‹ì€ ë„êµ¬ë¼ê³  ìƒê°í–ˆë‹¤.&lt;/p>
&lt;p>ë‹¤ìŒ í¬ìŠ¤íŒ…ì€ ê¸°ì¡´ì˜ ì„œë²„ë¥¼ í¬ë§·ì‹œí‚¤ê³ , openstack ì„œë²„ êµ¬ì¶•ê¸°ë¡œ ì°¾ì•„ì˜¤ê² ë‹¤.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://kubernetes.io/ko/docs/tasks/configure-pod-container/assign-pods-nodes/" target="_blank" rel="noopener"
>https://kubernetes.io/ko/docs/tasks/configure-pod-container/assign-pods-nodes/&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://unix.stackexchange.com/questions/52376/why-do-iptables-rules-disappear-when-restarting-my-debian-system" target="_blank" rel="noopener"
>https://unix.stackexchange.com/questions/52376/why-do-iptables-rules-disappear-when-restarting-my-debian-system&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>ì„œë²„ êµ¬ì¶•ê¸° - 2. Multipassë¥¼ í™œìš©í•œ NFS êµ¬ì„±</title><link>https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/</link><pubDate>Sun, 14 Jul 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/</guid><description>&lt;h2 id="ë“¤ì–´ê°€ë©°">ë“¤ì–´ê°€ë©°
&lt;/h2>&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ìœ ìƒíƒœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í• ë•Œ ì£¼ë¡œ PV, PVCë¥¼ í™œìš©í•´ì„œ ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤. ìœ„ì¹˜ì— ë”°ë¼ ë‚´ë¶€, ì™¸ë¶€ ì €ì¥ ìœ ë¬´ë¥¼ ê²°ì •í•˜ëŠ”ë°, ë‚´ë¶€ì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì€ ì ‘ê·¼ì„±ë„ ë–¨ì–´ì§ˆ ë¿ë§Œ ì•„ë‹ˆë¼ ë…¸ë“œë¥¼ ìš´ìš©í•˜ëŠ”ë° ë¹„íš¨ìœ¨ì ì´ë¼ê³  íŒë‹¨í–ˆë‹¤. ì™¸ë¶€ì ì¸ ë°©ì•ˆì€ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•œ ë°ì´í„° ì €ì¥ì´ë‹¤.&lt;/p>
&lt;p>ê·¸ë ‡ë‹¤ë©´ &lt;strong>ì˜¨í”„ë¡œë¯¸ìŠ¤ í™˜ê²½ì—ì„œ ë„¤íŠ¸ì›Œí¬ë¡œ í†µì‹ í•˜ì—¬ ì €ì¥í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆì„ê¹Œ?&lt;/strong> ì§ì ‘ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì— êµ¬ì¶•í•˜ì—¬ ì ìš©í•˜ê³ ì í•œë‹¤.&lt;/p>
&lt;h2 id="nfsnetwork-file-system">NFS(Network File System)
&lt;/h2>&lt;p>ë„¤íŠ¸ì›Œí¬ì— íŒŒì¼ì„ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì¦‰, ì›ê²© ì»´í“¨í„°ì— ìˆëŠ” íŒŒì¼ ë° ë””ë ‰í† ë¦¬ì— ì—‘ì„¸ìŠ¤í•˜ê³ , í•´ë‹¹ íŒŒì¼ ë””ë ‰í† ë¦¬ê°€ ë¡œì»¬ì— ìˆëŠ” ê²ƒì²˜ëŸ¼ ì‚¬ìš©í•˜ëŠ” ë¶„ì‚° íŒŒì¼ ì‹œìŠ¤í…œì´ë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>íŒŒì¼ ì‹œìŠ¤í…œ ì¤‘ì— ZFSê°€ ìˆë‹¤. ì¤‘ê°„ì— ë‘ ê°œì˜ ê°œë…ì´ í˜¼ìš©ë¼ì„œ NFSì— ZFS íŒŒì¼ ì‹œìŠ¤í…œì„ ì„¤ì¹˜í–ˆë‹¤. ê·¸ë¦¬ê³  ë‹¤ì‹œ í¬ë§·íŒ…í–ˆë‹¤..
ìì„¸íˆ ì•Œê³  ì‹¶ìœ¼ë©´ &lt;a class="link" href="https://toss.tech/article/engineering-note-8" target="_blank" rel="noopener"
>í† ìŠ¤ ë¸”ë¡œê·¸, OpenZFSë¡œ ì„±ëŠ¥ê³¼ ë¹„ìš©, ë‘ ë§ˆë¦¬ í† ë¼ ì¡ê¸°&lt;/a> ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h2 id="ìš©ëŸ‰-ë¶€ì¡±-ë¬¸ì œ">ìš©ëŸ‰ ë¶€ì¡± ë¬¸ì œ
&lt;/h2>&lt;p>ìœ ìƒíƒœ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë¬´ì—‡ì´ ìˆì„ê¹Œ? ëŒ€ë¶€ë¶„ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê¼½ì„ ê²ƒì´ë‹¤. ë°ì´í„°ë² ì´ìŠ¤ëŠ” ìƒê°ë³´ë‹¤ í° ìš©ëŸ‰ì„ ì°¨ì§€í•œë‹¤. ìì²´ ì„œë²„ëŠ” SSD 1TBìš©ëŸ‰ì„ ê°€ì§€ê³  ìˆë‹¤. ê·¸ëŸ¬ë‚˜ 4ê°œì˜ ë…¸ë“œ ì¸ìŠ¤í„´ìŠ¤ì™€ ì‹œìŠ¤í…œ ë°ì´í„°, ë¯¸ë˜ì— ì¶”ê°€í•  ì¸ìŠ¤í„´ìŠ¤ê¹Œì§€ ë”í•˜ë©´ ë§ì€ ìš©ëŸ‰ì´ ìš”êµ¬ëœë‹¤. ê°œì¸ì ìœ¼ë¡œ SSDë¼ëŠ” ë¹„ì‹¼ ì €ì¥ì†Œë¥¼ ë‹¨ìˆœ ë°ì´í„° ë³´ê´€ìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸°ì—ëŠ” ë§ì´ ì•„ê¹ë‹¤ê³  ìƒê°í–ˆë‹¤.&lt;/p>
&lt;p>ë‹¤í–‰íˆ DASì™€ 4TB HDDê°€ ìˆì—ˆë‹¤. SSDì—ëŠ” ì‹œìŠ¤í…œì— í™œìš©ë  ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³ , ê·¸ ì™¸ì˜ ë°ì´í„°ëŠ” DASì— ì €ì¥í•˜ë„ë¡ êµ¬ì„±í•˜ë ¤ê³  í•œë‹¤.&lt;/p>
&lt;h2 id="êµ¬ì„±">êµ¬ì„±
&lt;/h2>&lt;p>ê°€ìƒ í™˜ê²½ì„ í•˜ë‚˜ ë§Œë“¤ì–´ì„œ NFS ê´€ë ¨ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê³ , ê°ê°ì˜ ë…¸ë“œê°€ ë„¤íŠ¸ì›Œí‚¹ì„ í†µí•´ ì ‘ì†í•  ìˆ˜ ìˆê²Œ êµ¬ì„±í•  ì˜ˆì •ì´ë‹¤.&lt;/p>
&lt;h3 id="êµ¬ì„±ë„">êµ¬ì„±ë„
&lt;/h3>&lt;p>êµ¬ì„±ì„ ê°„ëµí•˜ê²Œ ì„¤ëª…í•˜ìë©´ ì•„ë˜ì™€ ê°™ë‹¤.&lt;/p>
&lt;ol>
&lt;li>NFS ì„œë²„ ì „ìš© ê°€ìƒ ë¨¸ì‹ ì„ ë§Œë“ ë‹¤.&lt;/li>
&lt;li>Host ì„œë²„ì— DASë¥¼ ë§ˆìš´íŒ…í•˜ê³ , NFS Server ì¸ìŠ¤í„´ìŠ¤ì— hostì— ë§ˆìš´íŒ…ëœ ê²½ë¡œë¥¼ ë‹¤ì‹œ ë§ˆìš´íŠ¸í•œë‹¤.&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img1.png"
width="1153"
height="917"
srcset="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img1_hu16286894966665618699.png 480w, https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img1_hu17594900925134202182.png 1024w"
loading="lazy"
alt="ì„œë²„ êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="125"
data-flex-basis="301px"
>&lt;/p>
&lt;h2 id="í™˜ê²½-ì„¤ì •í•˜ê¸°">í™˜ê²½ ì„¤ì •í•˜ê¸°
&lt;/h2>&lt;h3 id="disk-format">Disk Format
&lt;/h3>&lt;p>DASì— ìˆëŠ” HDDëŠ” 4TBë¡œ 1TB, 1TB, 1.8TBë¡œ íŒŒí‹°ì…”ë‹í–ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>ë””ìŠ¤í¬ í¬ë§· ë° íŒŒí‹°ì…”ë‹ì€ &lt;a class="link" href="https://zero-gravity.tistory.com/297" target="_blank" rel="noopener"
>ë¬´ì¤‘ë ¥ ì¸ê°„ë‹˜ì˜ ë¸”ë¡œê·¸&lt;/a>ë¥¼ ì°¸ê³ í•˜ì.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img2.png"
width="673"
height="98"
srcset="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img2_hu11153403180635365000.png 480w, https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img2_hu13732341501959064796.png 1024w"
loading="lazy"
alt="íŒŒí‹°ì…˜ ì •ë³´"
class="gallery-image"
data-flex-grow="686"
data-flex-basis="1648px"
>&lt;/p>
&lt;p>ë¶€íŒ…ë ë•Œë§ˆë‹¤ ìë™ ë§ˆìš´íŒ…ì´ ë  ìˆ˜ ìˆë„ë¡ &lt;a class="link" href="https://guide.ncloud-docs.com/docs/server-ts-fstab-vpc" target="_blank" rel="noopener"
>fstab íŒŒì¼ì„ ìˆ˜ì •&lt;/a>í–ˆë‹¤.&lt;/p>
&lt;h3 id="ë¬¸ì œ1-uuidê°€-ì—†ëŠ”-ê²½ìš°">ë¬¸ì œ1. UUIDê°€ ì—†ëŠ” ê²½ìš°
&lt;/h3>&lt;p>ext4ë¡œ í¬ë§·ì´ ì•ˆëœê²½ìš° PARTITION UUIDë§Œ ìˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ &lt;code>mkfs.ext4&lt;/code> ë¥¼ í™œìš©í•˜ì—¬ ext4ë¥¼ í¬ë§·ì‹œí‚¤ì.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img3.png"
width="577"
height="212"
srcset="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img3_hu599222999315249386.png 480w, https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img3_hu18099707395523012433.png 1024w"
loading="lazy"
alt="ext4 í¬ë§·ì´ ì™„ì „íˆ ì•ˆëœ ê²½ìš°"
class="gallery-image"
data-flex-grow="272"
data-flex-basis="653px"
>&lt;/p>
&lt;h3 id="ë¬¸ì œ-2-emergency-mode">ë¬¸ì œ 2. Emergency Mode
&lt;/h3>&lt;p>fsatabë¥¼ ì˜ëª» ì„¤ì •í•˜ë©´ LinuxëŠ” ìµœì†Œí•œì˜ ê¶Œí•œë§Œ ì œê³µí•˜ëŠ” emergency modeë¡œ ë„ì…í•˜ê²Œ ëœë‹¤. fstab íŒŒì¼ì„ ì ì ˆí•˜ê²Œ ê¸°ì…í•˜ì.&lt;/p>
&lt;h2 id="nfs-ì„¤ì¹˜í•˜ê¸°">NFS ì„¤ì¹˜í•˜ê¸°
&lt;/h2>&lt;h3 id="nfs-multipass-mounting">NFS Multipass mounting
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">multipass mount /mnt/das/vol1 nfs:/nfs/vol1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img4.png"
width="431"
height="235"
srcset="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img4_hu16078942516056939428.png 480w, https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img4_hu3049001154135582274.png 1024w"
loading="lazy"
alt="nfs multipass ì •ë³´"
class="gallery-image"
data-flex-grow="183"
data-flex-basis="440px"
>&lt;/p>
&lt;h3 id="nfs-server-ì„¤ì¹˜">NFS Server ì„¤ì¹˜
&lt;/h3>&lt;p>NFS multipass Instance ë‚´ì— NFS ì„œë²„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ì. ì„¤ì •ì€ &lt;a class="link" href="https://heartsavior.medium.com/%ED%98%B8%EC%8A%A4%ED%8A%B8-%EC%84%9C%EB%B2%84-ubuntu-20-04-%EC%97%90-nfs-%EB%A5%BC-%EC%84%A4%EC%A0%95%ED%95%98%EA%B3%A0-spark-on-kubernetes-%EC%97%90%EC%84%9C-%EB%8F%99%EC%A0%81%EC%9C%BC%EB%A1%9C-%EB%B3%BC%EB%A5%A8%EC%9D%84-%ED%95%A0%EB%8B%B9%EB%B0%9B%EA%B8%B0-6c80bc71e6ed" target="_blank" rel="noopener"
>Jung-taek Limë‹˜ì˜ ë¸”ë¡œê·¸&lt;/a>ë¥¼ ì°¸ê³ í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt-get install nfs-common nfs-kernel-server rpcbind portmap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> nfs-kernel-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl start nfs-kernel-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ë„¤íŠ¸ì›Œí¬ ë²”ìœ„ë¥¼ 10.120.52.0/24ë¡œ ì§€ì •í–ˆëŠ”ë°, ì´ëŠ” multipass instanceê°€ &lt;code>10.120.52.0/24&lt;/code> ë²”ìœ„ ë‚´ì— ìˆê¸° ë•Œë¬¸ì´ë‹¤.&lt;/p>
&lt;p>mulitpassì—ì„œ ì‚¬ìš©ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ë“œë¼ì´ë¸Œë¥¼ ë³´ë©´ qemuë¥¼ ì‚¬ìš©í•œë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img6.png"
width="415"
height="47"
srcset="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img6_hu11071982071042275958.png 480w, https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img6_hu1671741715049924638.png 1024w"
loading="lazy"
alt="multipass driver í™•ì¸"
class="gallery-image"
data-flex-grow="882"
data-flex-basis="2119px"
>&lt;/p>
&lt;p>ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë³´ë©´ ì‚¬ìš©ê°€ëŠ¥í•œ IP ë²”ìœ„ëŠ” &lt;code>10.120.52.0/24&lt;/code> ì„ì„ ì•Œ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img7.png"
width="627"
height="161"
srcset="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img7_hu6581694237443217431.png 480w, https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img7_hu1465347387549676843.png 1024w"
loading="lazy"
alt="Network Interface í™•ì¸"
class="gallery-image"
data-flex-grow="389"
data-flex-basis="934px"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo mkdir -p /nfs/vol1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo chown nobody:nogroup /nfs/vol1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># nfsê°€ ê³µìœ í•  ìˆ˜ ìˆëŠ” ë„¤íŠ¸ì›Œí¬ ì„¤ì •&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo vim /etc/exports/nfs/vol1 10.120.52.0/24&lt;span class="o">(&lt;/span>rw,sync,no_subtree_check,no_root_squash&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ìœ„ì˜ ì„¤ì • ë°˜ì˜&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo exportfs -r
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ë§ˆìŠ¤í„° ë…¸ë“œì— showmountí•˜ì—¬ NFSê°€ ì œëŒ€ë¡œ ì‘ë™ë˜ì—ˆëŠ”ì§€ í™•ì¸í–ˆì„ë•Œ ì•„ë˜ì™€ ê°™ì´ export listê°€ ì˜ ë³´ì—¬ì§€ë©´ ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img8.png"
width="533"
height="68"
srcset="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img8_hu17757074462387084973.png 480w, https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img8_hu11332033105598699334.png 1024w"
loading="lazy"
alt="Show mount ì •ë³´"
class="gallery-image"
data-flex-grow="783"
data-flex-basis="1881px"
>&lt;/p>
&lt;h2 id="dynamic-provisioner">Dynamic Provisioner
&lt;/h2>&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ìŠ¤í† ë¦¬ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì„ ìƒê°í•´ë³´ì. ì „ì—­ì ì¸ ë°ì´í„° ìŠ¤í† ë¦¬ì§€ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” [[D K8S- Pod|Pod]]ë¥¼ ìƒì„±í• ë•Œ PVCë¥¼ ìƒì„±í•˜ì—¬, ê´€ë¦¬ìê°€ ìƒì„±í•œ PVì™€ ì—°ê²°í•˜ê²Œ ëœë‹¤. ê·¸ëŸ¬ë‚˜ íŒŒë“œë¥¼ ìƒì„±í• ë•Œë§ˆë‹¤ PV, PVCë¥¼ ë§Œë“¤ì–´ì„œ ìŠ¤í† ë¦¬ì§€ì— ì ‘ê·¼í•´ì•¼ í•œë‹¤. ì´ì™€ ê°™ì´ ë²ˆê±°ë¡œì›€ì„ í•´ê²°í•˜ê³ ì ìë™ìœ¼ë¡œ ë³¼ë¥¨ì„ ìƒì„±í•´ì£¼ëŠ” Dynamic Provisionerë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.&lt;/p>
&lt;p>ProvisionerëŠ” &lt;a class="link" href="https://github.com/kubernetes-sigs/nfs-subdir-external-provisioner#with-helm" target="_blank" rel="noopener"
>kubernetes-sigs Githubì— ìˆëŠ” nfs-subdir-external-provisioner&lt;/a>ë¥¼ ì‚¬ìš©í–ˆë‹¤.&lt;/p>
&lt;p>ìœ„ì˜ íŒŒì¼ì„ ì ì ˆí•˜ê²Œ ì„¤ì •í•˜ê²Œ testë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´, ì•„ë˜ì™€ ê°™ì´ pvcê°€ ë§Œë“¤ì–´ì§€ê²Œ ëœë‹¤. ë˜í•œ íŒŒë“œë¥¼ ì‚­ì œí•˜ê²Œ ë˜ë©´ ìë™ìœ¼ë¡œ pvcê°€ ì‚­ì œë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img9.png"
width="958"
height="154"
srcset="https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img9_hu15465165158187663991.png 480w, https://s0okju.github.io/p/server-setup-nfs-in-multipass-instance/img9_hu5977130276752259966.png 1024w"
loading="lazy"
alt="DASì— ì €ì¥ëœ ë°ì´í„° í™•ì¸"
class="gallery-image"
data-flex-grow="622"
data-flex-basis="1492px"
>&lt;/p>
&lt;h2 id="ì°¸ê³ ">ì°¸ê³ 
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://gruuuuu.github.io/cloud/k8s-volume/" target="_blank" rel="noopener"
>https://gruuuuu.github.io/cloud/k8s-volume/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://do-hansung.tistory.com/57" target="_blank" rel="noopener"
>https://do-hansung.tistory.com/57&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://1week.tistory.com/114" target="_blank" rel="noopener"
>https://1week.tistory.com/114&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>ì„œë²„ êµ¬ì¶•ê¸° - 1. ì¿ ë²„ë„¤í‹°ìŠ¤ ë©€í‹° ë…¸ë“œ í™˜ê²½ êµ¬ì„±í•˜ê¸°</title><link>https://s0okju.github.io/p/server-setup-multinode-kubernetes/</link><pubDate>Fri, 12 Jul 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/server-setup-multinode-kubernetes/</guid><description>&lt;p>ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¥¼ ì§ì ‘ ìš´ì˜í•˜ê¸° ìœ„í•´ ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê¸°ë¡œ ê²°ì‹¬í–ˆë‹¤. ê·¸ë˜ì„œ ê¸°ì¡´ì— ìˆëŠ” Windows ë°ìŠ¤í¬í†±ì„ ubuntu 20.04 ì„œë²„ í™˜ê²½ìœ¼ë¡œ ì„¸íŒ…í–ˆë‹¤.&lt;/p>
&lt;h2 id="rtl8125-ì˜¤ë¥˜">RTL8125 ì˜¤ë¥˜
&lt;/h2>&lt;p>ì—¬ê¸°ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤. LAN ì¹´ë“œ ì •ë³´ í™•ì¸ ê²°ê³¼, ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ê°€ ì œëŒ€ë¡œ ì¸ì‹ë˜ì§€ ì•Šì•˜ë˜ ê²ƒì´ì—ˆë‹¤. ëœì¹´ë“œê°€ RTL8125ì˜ ê²½ìš°ì—ëŠ” ë³„ë„ì˜ ë“œë¼ì´ë²„ ì„¤ì¹˜ê°€ í•„ìš”í–ˆë‹¤. í•˜ë‚˜ì˜ ëª¨ìˆœì´ ìƒê²¼ë‹¤. ìš°ë¦¬ê°€ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í• ë•ŒëŠ” ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ í•„ìˆ˜ì§€ë§Œ, ë„¤íŠ¸ì›Œí¬ì— ë¬¸ì œê°€ ìƒê²¨ ì™¸ë¶€ íŒ¨í‚¤ì§€ë¥¼ ë‹¤ìš´ë°›ì„ ìˆ˜ ì—†ë˜ ê²ƒì´ì—ˆë‹¤.
ë¬¼ë¡  í•´ê²°ì±…ì´ ì—†ë˜ ê²ƒì´ ì•„ë‹ˆì˜€ë‹¤.&lt;/p>
&lt;ul>
&lt;li>ì•ˆë“œë¡œì´ë“œ í°ì„ ì´ìš©í•´ tetheringí•´ì„œ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ ì‹œí‚¤ê³  í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/li>
&lt;li>20.04 ì€ ì»¤ë„ ë²„ì „ì„ 5.4ë¥¼ ì“°ëŠ”ë° ì´ ë²„ì „ì—ì„œ LANì´ ì¸ì‹ì´ ì•ˆë¼ 5.8 ì´ìƒ ë²„ì „ì„ ì„¤ì¹˜ &lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/li>
&lt;/ul>
&lt;p>ìŠ¬í”„ê²Œë„ ë‚˜ëŠ” ë‘ ë°©ë²•ì— ì‹¤íŒ¨í•˜ê²Œ ë˜ì—ˆê³  &lt;strong>22.04LTSë¥¼ ì„¤ì¹˜&lt;/strong>í•˜ê²Œ ë˜ì—ˆë‹¤. ê·¸ë¦¬ê³  ê¹”ë”í•˜ê²Œ ì„±ê³µí–ˆë‹¤.&lt;/p>
&lt;h2 id="êµ¬ì¶•">êµ¬ì¶•
&lt;/h2>&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ êµ¬ì¶• ìì²´ëŠ” ìƒê°ë³´ë‹¤ ê°„ë‹¨í•˜ì§€ë§Œ ìƒì—… í™˜ê²½ì—ì„œ ì•ˆì „í•˜ê³  ê°€ìš©ì„± ìˆê²Œ ì§€ì†ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ì–´ë µë‹¤. ê·¸ë˜ì„œ ìì²´ í˜¸ìŠ¤íŒ…í•˜ëŠ” ê²ƒì€ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•œë‹¤. &lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>&lt;/p>
&lt;p>ê·¸ëŸ¬ë‚˜ êµìœ¡ì˜ ê´€ì ì—ì„œëŠ” ìì²´ í˜¸ìŠ¤íŒ…í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì¢‹ì€ ì„ íƒì´ë¼ê³  ìƒê°í•œë‹¤. í¼ë¸”ë¦­ í´ë¼ìš°ë“œë¥¼ ì‚¬ìš©í•˜ë‹¤ê°€ ìš”ê¸ˆì„ í­íƒ„ë§ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.&lt;/p>
&lt;h3 id="multipass-ì„ íƒí•œ-ì´ìœ ">Multipass ì„ íƒí•œ ì´ìœ 
&lt;/h3>&lt;p>ë¦¬ëˆ…ìŠ¤ ê¸°ë°˜ ê°€ìƒ ë¨¸ì‹ ì€ ì„ íƒì§€ê°€ ìƒê°ë³´ë‹¤ ë‹¤ì–‘í•˜ê²Œ ìˆë‹¤. ë‚˜ëŠ” vagrant, multipass ì¤‘ì—ì„œ ê³ ë¯¼í–ˆë‹¤. Multipassë¥¼ ì„ íƒí•œ ì´ìœ ëŠ” ì‚¬ìš©í•˜ê¸° ì‰¬ì›Œì„œì´ë‹¤.&lt;/p>
&lt;p>vagrantì˜ ì¥ì ì€ ë‹¤ì–‘í•œ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì ê³¼ Vagrantfileë¥¼ í†µí•´ ìë™í™” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ì ì´ì—ˆë‹¤. í•˜ì§€ë§Œ ë‹¨ì ì´ ì¡´ì¬í–ˆëŠ”ë°, ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì§œëŠ” ë²•ì„ ì•Œì•„ì•¼í•œë‹¤ëŠ” ì ê³¼ ë‚´ê°€ ì¿ ë²„ë„¤í‹°ìŠ¤ êµ¬ì¶•í•˜ëŠ” ì „ë°˜ì ì¸ ë°©ì‹ì„ ì´í•´í•˜ì§€ ëª»í•´ ë””ë²„ê¹… í•˜ì§€ ëª»í•œë‹¤ëŠ” ê²ƒì´ì—ˆë‹¤. ì‹¤ì œë¡œ ê¹ƒí—ˆë¸Œì˜ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ cloneí•´ì„œ êµ¬ì„±í•´ë´¤ëŠ”ë°, ë„¤íŠ¸ì›Œí¬ í• ë‹¹ì´ ì œëŒ€ë¡œ ë˜ì§€ ì•Šì•„ ë§ì€ ì‹œê°„ì„ ì“°ê¸°ë„ í–ˆë‹¤.&lt;/p>
&lt;p>multipassëŠ” Canonicalì—ì„œ ë§Œë“¤ì—ˆìœ¼ë©° Ubuntuì˜ ê°€ìƒí™”í™˜ê²½(VM)ì„ ì‰½ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ë„êµ¬&lt;sup id="fnref:4">&lt;a href="#fn:4" class="footnote-ref" role="doc-noteref">4&lt;/a>&lt;/sup>ì´ë‹¤. ì¦‰ ìš°ë¶„íˆ¬ ë³´ê¸‰ì‚¬ê°€ ë§Œë“  ê°€ìƒí™˜ê²½ì´ë¼ê³  ë³´ë©´ ëœë‹¤. ìš°ë¶„íˆ¬ ì™¸ì˜ ë¦¬ëˆ…ìŠ¤ë¥¼ ì¨ì•¼í•œë‹¤ë©´ multipassëŠ” ì¢‹ì€ ì„ íƒì§€ëŠ” ì•„ë‹ˆì§€ë§Œ centOS Linuxê°€ ë”ì´ìƒ ì§€ì›ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì &lt;sup id="fnref:5">&lt;a href="#fn:5" class="footnote-ref" role="doc-noteref">5&lt;/a>&lt;/sup>ì—ì„œ ì“¸ ìˆ˜ ìˆëŠ” ê±´ ìš°ë¶„íˆ¬ ë°–ì— ì—†ëŠ” ê²ƒ ê°™ë‹¤.&lt;/p>
&lt;h3 id="ì¿ ë² ë„¤í‹°ìŠ¤-êµ¬ì„±">ì¿ ë² ë„¤í‹°ìŠ¤ êµ¬ì„±
&lt;/h3>&lt;p>ìì„¸í•œ ì„¤ì¹˜ëŠ” &lt;a class="link" href="https://enumclass.tistory.com/261" target="_blank" rel="noopener"
>enumclass tistory&lt;/a>ë¥¼ ì°¸ê³ í–ˆë‹¤.&lt;/p>
&lt;h3 id="calico-ì„ íƒí•œ-ì´ìœ ">Calico ì„ íƒí•œ ì´ìœ 
&lt;/h3>&lt;p>CNI í”ŒëŸ¬ê·¸ì¸ì—ì„œ ê°€ì¥ ëŒ€ì¤‘ì ìœ¼ë¡œ ì“°ì´ëŠ” ê²ƒì€ &lt;a class="link" href="https://docs.tigera.io/calico/latest/getting-started/kubernetes/quickstart" target="_blank" rel="noopener"
>Calico&lt;/a>ì´ë‹¤. CNI í”ŒëŸ¬ê·¸ì¸ ë²¤ì¹˜ë§ˆí¬ë¥¼ ë³´ë©´ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ë¥ ì´ë‚˜, ì†ë„ ì¸¡ë©´ì—ì„œ Calicoê°€ ìš°ìˆ˜í•œ í¸ì´ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-multinode-kubernetes/img1.png"
width="1920"
height="521"
srcset="https://s0okju.github.io/p/server-setup-multinode-kubernetes/img1_hu9434627258708254698.png 480w, https://s0okju.github.io/p/server-setup-multinode-kubernetes/img1_hu15136155436973865340.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://itnext.io/benchmark-results-of-kubernetes-network-plugins-cni-over-10gbit-s-network-updated-august-2020-6e1b757b9e49"
class="gallery-image"
data-flex-grow="368"
data-flex-basis="884px"
>&lt;/p>
&lt;p>CNIì˜ íŠ¹ì§•ì€ Podì— IPë¥¼ í• ë‹¹í•œë‹¤. ì´ëŸ¬í•œ íŠ¹ì§•ì´ ëŒ€ê·œëª¨ í™˜ê²½ì—ì„œëŠ” IP ë¶€ì¡±ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆë‹¤. &lt;sup id="fnref:6">&lt;a href="#fn:6" class="footnote-ref" role="doc-noteref">6&lt;/a>&lt;/sup> ê·¸ëŸ¬ë‚˜ ì†Œê·œëª¨ í”„ë¡œì íŠ¸ëŠ” ë§ì€ podë¥¼ ìƒì„±í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ IPëŠ” ë¶€ì¡±í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤.&lt;/p>
&lt;h2 id="ê²°ê³¼">ê²°ê³¼
&lt;/h2>&lt;p>10.120.52.x IPëŠ” multipass instanceì˜ IPì´ê³ , 192.168.x.xëŠ” calicoì˜ IPì´ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-multinode-kubernetes/img2.png"
width="705"
height="192"
srcset="https://s0okju.github.io/p/server-setup-multinode-kubernetes/img2_hu7461364534430948954.png 480w, https://s0okju.github.io/p/server-setup-multinode-kubernetes/img2_hu1072079348600548737.png 1024w"
loading="lazy"
alt="Multipass Instance IP"
class="gallery-image"
data-flex-grow="367"
data-flex-basis="881px"
>&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-multinode-kubernetes/img3.png"
width="1213"
height="960"
srcset="https://s0okju.github.io/p/server-setup-multinode-kubernetes/img3_hu13672412589673510336.png 480w, https://s0okju.github.io/p/server-setup-multinode-kubernetes/img3_hu16918992997885760049.png 1024w"
loading="lazy"
alt="ì¿ ë²„ë„¤í‹°ìŠ¤ êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="126"
data-flex-basis="303px"
>&lt;/p>
&lt;p>ì‹¤ì œë¡œ íŒŒë“œë¥¼ ìƒì„±í•´ ì‹¤í–‰ì‹œì¼œ ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-multinode-kubernetes/img4.png"
width="856"
height="643"
srcset="https://s0okju.github.io/p/server-setup-multinode-kubernetes/img4_hu10148201750460987392.png 480w, https://s0okju.github.io/p/server-setup-multinode-kubernetes/img4_hu2067092380989503783.png 1024w"
loading="lazy"
alt="nginx íŒŒë“œ ìƒì„± ê²°ê³¼"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="319px"
>&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://physical-world.tistory.com/56" target="_blank" rel="noopener"
>https://physical-world.tistory.com/56&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://romillion.tistory.com/96" target="_blank" rel="noopener"
>https://romillion.tistory.com/96&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í™œìš©í•œ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ë°ë¸Œì˜µìŠ¤, ì¡´ ì–´ë Œë“¤, ì €ìŠ¤í‹´ ë„ë°ê±°ìŠ¤ ì§€ìŒ, í•œë¹› ë¯¸ë””ì–´&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:4">
&lt;p>&lt;a class="link" href="https://kim-dragon.tistory.com/176" target="_blank" rel="noopener"
>https://kim-dragon.tistory.com/176&lt;/a>&amp;#160;&lt;a href="#fnref:4" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:5">
&lt;p>&lt;a class="link" href="https://arstechnica.com/gadgets/2020/12/centos-shifts-from-red-hat-unbranded-to-red-hat-beta/" target="_blank" rel="noopener"
>https://arstechnica.com/gadgets/2020/12/centos-shifts-from-red-hat-unbranded-to-red-hat-beta/&lt;/a>&amp;#160;&lt;a href="#fnref:5" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:6">
&lt;p>&lt;a class="link" href="https://dobby-isfree.tistory.com/201" target="_blank" rel="noopener"
>https://dobby-isfree.tistory.com/201&lt;/a>&amp;#160;&lt;a href="#fnref:6" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>ê·¸ ë§ì€ ì„œë²„ ë””ìŠ¤í¬ ìš©ëŸ‰ì„ ëˆ„ê°€ ì¡ì•„ ë¨¹ì—ˆëŠ”ê°€?</title><link>https://s0okju.github.io/p/server-management-disk-1/</link><pubDate>Tue, 28 May 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/server-management-disk-1/</guid><description>&lt;p>Multipassë¥¼ êµ¬ë™í•˜ë ¤ê³  í•˜ëŠ” ì¤‘ ë””ìŠ¤í¬ ìš©ëŸ‰ì´ ê½‰ì°¼ë‹¤ëŠ” ë©”ì„¸ì§€ë¥¼ ì–»ê²Œ ë˜ì—ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cannot create temporary directory for the root file system: No space left on device
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì„œë²„ì—ì„œ ì‚¬ìš©ì¤‘ì¸ SSDëŠ” 1TBì¸ë° 5ê°œì˜ Multipass ì¸ìŠ¤í„´ìŠ¤ë¡œ ë‹¤ ì°¬ë‹¤ëŠ” ê²ƒì€ ë§ì´ ë˜ì§€ ì•Šì•˜ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-management-disk-1/img1.png"
width="752"
height="206"
srcset="https://s0okju.github.io/p/server-management-disk-1/img1_hu4358305747655751775.png 480w, https://s0okju.github.io/p/server-management-disk-1/img1_hu12255105040570970478.png 1024w"
loading="lazy"
alt="df -h ê²°ê³¼"
class="gallery-image"
data-flex-grow="365"
data-flex-basis="876px"
>&lt;/p>
&lt;p>ì‹¤ì œ í•˜ë“œì›¨ì–´ ìƒì—ì„œ ë¶€ì°©ëœ ìš©ëŸ‰ê³¼ ubuntu lvmì—ì„œ ì‚¬ìš©ë˜ëŠ” ìµœëŒ€ ìš©ëŸ‰ì´ ë‹¬ëë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì´ ìš©ëŸ‰ì„ ì ì ˆí•˜ê²Œ ì¡°ì ˆí•´ì•¼ í•œë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-management-disk-1/img2.png"
width="690"
height="115"
srcset="https://s0okju.github.io/p/server-management-disk-1/img2_hu1761293802765121170.png 480w, https://s0okju.github.io/p/server-management-disk-1/img2_hu2651603895067297581.png 1024w"
loading="lazy"
alt="lsblk ê²°ê³¼"
class="gallery-image"
data-flex-grow="600"
data-flex-basis="1440px"
>&lt;/p>
&lt;h2 id="í•´ê²°">í•´ê²°
&lt;/h2>&lt;p>LVì˜ ìš©ëŸ‰ì„ VGì˜ í¬ê¸°ë§Œí¼ ì¡°ì ˆí•œë‹¤. &lt;a class="link" href="https://askubuntu.com/questions/1106795/ubuntu-server-18-04-lvm-out-of-space-with-improper-default-partitioning" target="_blank" rel="noopener"
>Stack Exchange&lt;/a>ì—ì„œ ìš”êµ¬í•œëŒ€ë¡œ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ í•´ê²°ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">lvm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lvm&amp;gt; lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lvm&amp;gt; &lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">resize2fs /dev/ubuntu-vg/ubuntu-lv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ìì„¸í•˜ê²Œ ë´ë³´ì. ubuntu-vgëŠ” SSDì˜ ìš©ëŸ‰ë§Œí¼ ì ì ˆí•˜ê²Œ í• ë‹¹ ë°›ì•˜ë‹¤. ê·¸ëŸ¬ë‚˜ Alloc PEë¥¼ ë³´ë©´ 100 GB ë°–ì— ë‚¨ì§€ ì•Šì•˜ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-management-disk-1/img3.png"
width="640"
height="466"
srcset="https://s0okju.github.io/p/server-management-disk-1/img3_hu5352305729332303773.png 480w, https://s0okju.github.io/p/server-management-disk-1/img3_hu12214128087844497450.png 1024w"
loading="lazy"
alt="vgdisplay ê²°ê³¼"
class="gallery-image"
data-flex-grow="137"
data-flex-basis="329px"
>&lt;/p>
&lt;p>&lt;code>lvdisplay&lt;/code>ë¡œ lvë¥¼ í™•ì¸í•´ë³´ë©´ ubuntu-lvê°€ 100GBë¡œ í• ë‹¹ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-management-disk-1/img4.png"
width="406"
height="50"
srcset="https://s0okju.github.io/p/server-management-disk-1/img4_hu2348372353684853661.png 480w, https://s0okju.github.io/p/server-management-disk-1/img4_hu6674265677153158211.png 1024w"
loading="lazy"
alt="lvdisplay ê²°ê³¼"
class="gallery-image"
data-flex-grow="812"
data-flex-basis="1948px"
>&lt;/p>
&lt;p>ì—¬ê¸°ì„œ LVM(Logical Volume Manager)ì˜ ê°œë…ì„ ì•Œì•„ì•¼ í•˜ëŠ”ë°, íŒŒì¼ ì‹œìŠ¤í…œì— ì¶”ìƒí™” ê³„ì¸µì„ ì¶”ê°€í•˜ì—¬ ë…¼ë¦¬ì  ìŠ¤í† ë¦¬ì§€ë¥¼ ìƒì„±í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-management-disk-1/img5.png"
width="720"
height="671"
srcset="https://s0okju.github.io/p/server-management-disk-1/img5_hu506144144195363494.png 480w, https://s0okju.github.io/p/server-management-disk-1/img5_hu15074392179611611757.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://medium.com/@yhakimi/lvm-how-to-create-and-extend-a-logical-volume-in-linux-9744f27eacfe"
class="gallery-image"
data-flex-grow="107"
data-flex-basis="257px"
>&lt;/p>
&lt;p>ì €ìì˜ í™˜ê²½ì—ì„œëŠ” Root LVê°€ 100GBë¡œë§Œ í• ë‹¹ë˜ì–´ ìˆì–´, í•˜ë“œ ë””ìŠ¤í¬ì˜ ìš©ëŸ‰ ë§Œí¼ ì‚¬ìš©í•  ìˆ˜ ì—†ì—ˆë˜ ê²ƒì´ì—ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-management-disk-1/img6.png"
width="305"
height="375"
srcset="https://s0okju.github.io/p/server-management-disk-1/img6_hu3259120281413379806.png 480w, https://s0okju.github.io/p/server-management-disk-1/img6_hu3209157150400567175.png 1024w"
loading="lazy"
alt="VG, LV ê´€ê³„ë„"
class="gallery-image"
data-flex-grow="81"
data-flex-basis="195px"
>&lt;/p>
&lt;p>í˜„ì¬ í™˜ê²½ì—ì„œëŠ” í•˜ë‚˜ì˜ ë¬¼ë¦¬ ë””ìŠ¤í¬ë§Œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì„¤ì •í•˜ëŠ”ë° ë³µì¡í•œ ê²ƒì€ ì—†ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì¶”ê°€ì ìœ¼ë¡œ ubuntu-vgì— lvë¥¼ ì¶”ê°€í•˜ì§€ ì•ŠëŠ” í•œ Root lvë¥¼ vg í¬ê¸°ë§Œí¼ ì‚¬ì´ì¦ˆë¥¼ í‚¤ìš°ë©´ ëœë‹¤.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://tech.cloud.nongshim.co.kr/2018/11/23/lvmlogical-volume-manager-1-%EA%B0%9C%EB%85%90/" target="_blank" rel="noopener"
>https://tech.cloud.nongshim.co.kr/2018/11/23/lvmlogical-volume-manager-1-%EA%B0%9C%EB%85%90/&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>About</title><link>https://s0okju.github.io/about/</link><pubDate>Sun, 26 May 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/about/</guid><description>&lt;p>Hello world?&lt;/p></description></item><item><title>Entgo - Ent ORM</title><link>https://s0okju.github.io/p/entgo-1/</link><pubDate>Wed, 22 May 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/entgo-1/</guid><description>&lt;h2 id="orm-ì„ íƒ">ORM ì„ íƒ
&lt;/h2>&lt;p>Goì˜ ê²½ìš°ì—ëŠ” JAVAì™€ ë‹¬ë¦¬ ëŒ€í‘œì ì¸ ORM í”„ë ˆì„ì›Œí¬ê°€ ì—†ì–´, ê°œë°œìê°€ ì§ì ‘ ì„ íƒí•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>ë‹¤ì–‘í•œ Go ORM í”„ë ˆì„ì›Œí¬ ìˆœìœ„ë¥¼ ì•Œê³  ì‹¶ë‹¤ë©´ &lt;a class="link" href="https://ossinsight.io/collections/golang-orm/" target="_blank" rel="noopener"
>OSS Insight&lt;/a> ë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>ê¸°ë³¸ì ìœ¼ë¡œ mysql driver ì‚¬ìš©ì„ ìƒê°í–ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì •êµí•œ ì €ìˆ˜ì¤€ì˜ ì¿¼ë¦¬ë¥¼ ë‹¤ë£¨ëŠ” ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ORMë¥¼ ì ê·¹ì ìœ¼ë¡œ í™œìš©í•˜ê³  ì‹¶ì—ˆë‹¤.&lt;/p>
&lt;h3 id="ì¡°ê±´">ì¡°ê±´
&lt;/h3>&lt;ul>
&lt;li>ê¹”ë”í•œ ë„ë©”ì¸ ì •ì˜&lt;/li>
&lt;li>ì—¬ëŸ¬ ì¢…ë¥˜ì˜ DB ì§€ì›&lt;/li>
&lt;li>ì»´íŒŒì¼ ë ˆë²¨ì—ì„œ ë””ë²„ê¹… ê°€ëŠ¥&lt;/li>
&lt;/ul>
&lt;h2 id="ent">Ent
&lt;/h2>&lt;p>&lt;a class="link" href="https://entgo.io/docs/getting-started/" target="_blank" rel="noopener"
>Ent&lt;/a>ë€ Facebookì—ì„œ ê°œë°œí•œ Go ORMì´ë‹¤. ê³µì‹ ì„¤ëª…ì— ì˜í•˜ë©´ ê·¸ë˜í”„ êµ¬ì¡°ì˜ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, ì½”ë“œ ìƒì„±ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì •ì  íƒ€ì´í•‘ì„ ì§€ì›í•œë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> ì´ëŠ” ìœ„ì—ì„œ ë§í•œ ì¡°ê±´ì— ì–´ëŠ ì •ë„ ì¶©ì¡±ì´ ëœë‹¤.&lt;/p>
&lt;p>ë‹¤ë§Œ entëŠ” ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì— ì í•©í•˜ë©° NoSQL ê¸°ë°˜ ë°ì´í„°ë² ì´ìŠ¤ì—ëŠ” ì í•©í•˜ì§€ ì•Šì•˜ë‹¤.&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup> ORM ì„ íƒ ì¡°ê±´ì—ëŠ” ë¶€í•©í•˜ì§€ ì•Šì•˜ìœ¼ë‚˜ ëŒ€ë¶€ë¶„ì˜ ORMì´ RDB ìœ„ì£¼ë¡œ ì§€ì›í•œë‹¤ëŠ” ê²ƒ&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>ì„ ê°ì•ˆí–ˆì„ë•Œ entì€ RDB ì‚¬ìš© ì‹œ ê´œì°®ì€ ì„ íƒì´ë¼ê³  ìƒê°í•œë‹¤.&lt;/p>
&lt;p>ì´ˆë°˜ì— Gorm ì‚¬ìš©ë„ ê³ ë ¤í–ˆë‹¤. ê·¸ëŸ¬ë‚˜ ëª¨ë¸ì„ ì •ì˜í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” &lt;code>struct tag&lt;/code> ëŠ” ê°œì¸ì ìœ¼ë¡œ ê°€ë…ì„±ì´ ì¢‹ì§€ ì•Šë‹¤ëŠ” ì¸ìƒì´ ë“¤ì—ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Model&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ID&lt;/span> &lt;span class="kt">uint&lt;/span> &lt;span class="s">`gorm:&amp;#34;primaryKey&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">CreatedAt&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">UpdatedAt&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DeletedAt&lt;/span> &lt;span class="nx">gorm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DeletedAt&lt;/span> &lt;span class="s">`gorm:&amp;#34;index&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ì²«ì¸ìƒ">ì²«ì¸ìƒ
&lt;/h2>&lt;p>ORM ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ schemaë¥¼ ë³¸ ìˆœê°„ ê·¸ë˜í”„ ë°ì´í„°ë² ì´ìŠ¤ì¸ ì¤„ ì•Œì•˜ë‹¤. ê³¼ê±°ì— Neo4j&lt;sup id="fnref:4">&lt;a href="#fn:4" class="footnote-ref" role="doc-noteref">4&lt;/a>&lt;/sup>ë¼ëŠ” ê·¸ë˜í”„ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ë³¸ ì ì´ ìˆëŠ”ë°, ì´ ë…¸ë“œ, ê·¸ë˜í”„ë¥¼ ë³„ë„ë¡œ ì •ì˜í•´ì„œ êµ¬í˜„í•œ ì ì´ ìƒë‹¹íˆ ìœ ì‚¬í–ˆê¸° ë•Œë¬¸ì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Task&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Schema&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Fields of the Task.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">Task&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Fields&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Field&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Field&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;total_status&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Time&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;created_at&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Time&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;modified_at&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Edges of the Task.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">Task&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Edges&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Edge&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Edge&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">edge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">To&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;subtask&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">SubTask&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Type&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a class="link" href="https://entgo.io/docs/getting-started/" target="_blank" rel="noopener"
>ê³µì‹ í™ˆí˜ì´ì§€&lt;/a>ë¥¼ ì°¸ê³ í•´ë³´ë©´ Ent ORMì— ëŒ€í•´ ì´ë ‡ê²Œ ì„¤ëª…í–ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>Easily model database schema as a graph structure.&lt;/p>
&lt;/blockquote>
&lt;p>schema êµ¬ì¡°ë¥¼ ê·¸ë˜í”„ êµ¬ì¡°ë¡œ êµ¬í˜„ë˜ì–´ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì•„ë§ˆ entê°€ ê·¸ë˜í”„ íƒìƒ‰ì— ëŒ€í•œ ìì‹ ê°ì„ í‘œí˜„í•œ ê²ƒë„ êµ¬ì¡°ì ì¸ ì´ìœ ë•Œë¬¸ì´ì§€ ì•Šì„ê¹Œ ì‹¶ë‹¤.&lt;/p>
&lt;h2 id="ì ìš©í•˜ê¸°">ì ìš©í•˜ê¸°
&lt;/h2>&lt;h3 id="schema">Schema
&lt;/h3>&lt;p>entì˜ ì°¸ì¡° ë°©ì‹ì€ ë…íŠ¹í•˜ë‹¤. ê¸°ì¡´ì˜ ì°¸ì¡° ë°©ì‹ê³¼ ë°˜ëŒ€ì´ê¸° ë•Œë¬¸ì´ë‹¤.&lt;sup id="fnref:5">&lt;a href="#fn:5" class="footnote-ref" role="doc-noteref">5&lt;/a>&lt;/sup>
ent ê³µì‹ ë¬¸ì„œì— ì˜í•˜ë©´ edge.Toë¥¼ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë©´ ì„¤ì •í•œ Edgeë¥¼ ì†Œìœ í•œë‹¤ê³  ì •ì˜í•œë‹¤.&lt;sup id="fnref:6">&lt;a href="#fn:6" class="footnote-ref" role="doc-noteref">6&lt;/a>&lt;/sup>&lt;/p>
&lt;blockquote>
&lt;p>A schema that defines an edge using theÂ &lt;code>edge.To&lt;/code>Â builder owns the relation, unlike using theÂ &lt;code>edge.From&lt;/code>Â builder that gives only a back-reference for the relation (with a different name).&lt;/p>
&lt;/blockquote>
&lt;p>ğŸ¤” í•„ìì˜ ê²½ìš° ìœ„ì˜ ì •ì˜ë¥¼ ê³ ë ¤í•˜ê³  êµ¬í˜„í•˜ë‹ˆ ë” í—·ê°ˆë¦¬ê¸° ì‹œì‘í–ˆë‹¤. ê·¸ë˜ì„œ ê´€ê³„ ì†Œìœ ìì¸ schemaë§Œ ì •ì˜í•˜ê³ , ê·¸ ì™¸ì—ëŠ” ì„œë¡œì˜ ì—°ê´€ê´€ê³„ë¥¼ ì„¤ì •í•´ì¤€ë‹¤ëŠ” ë§ˆìŒìœ¼ë¡œ êµ¬í˜„í–ˆë‹¤.&lt;/p>
&lt;p>Member : Task Entityê°€ 1:N ì—°ê´€ ê´€ê³„ë¥¼ ê°€ì§„ë‹¤ê³  ê°€ì •í•´ë³´ì.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/entgo-1/img1.png"
width="474"
height="138"
srcset="https://s0okju.github.io/p/entgo-1/img1_hu1979994708511472876.png 480w, https://s0okju.github.io/p/entgo-1/img1_hu7853446638884962800.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="343"
data-flex-basis="824px"
>&lt;/p>
&lt;p>MemberëŠ” &lt;code>tasks&lt;/code>ë¼ëŠ” ê´€ê³„ì˜ ì†Œìœ ìì´ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ &lt;code>edge.To&lt;/code>ë¡œ ê´€ê³„ë¥¼ ì„¤ì •í•œë‹¤. í•˜ì§€ë§Œ TaskëŠ” manyì— í•´ë‹¹ë˜ê¸° ë•Œë¬¸ì— ì•„ë¬´ê²ƒë„ ì„¤ì •í•˜ì§€ ì•ŠëŠ”ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Fields of the Member.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">Member&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Fields&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Field&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Field&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;email&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;password&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Time&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;created_at&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Edges of the Member.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">Member&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Edges&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Edge&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Edge&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">edge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">To&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tasks&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Task&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Type&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Taskì—ì„œëŠ” Memberì—ì„œ ì†Œìœ í•œ ê´€ê³„(user)ë¥¼ ì—­ì°¸ì¡°í•´ì„œ ê´€ê³„ë¥¼ ì •ì˜í•˜ê²Œ ëœë‹¤. ì´ë•Œ MemberëŠ” ê´€ê³„ì—ì„œ Oneì— í•´ë‹¹ë˜ë‹ˆ &lt;code>Unique() í•¨ìˆ˜&lt;/code>ë¥¼ ë¶™ì´ê²Œ ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Fields of the Task.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">Task&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Fields&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Field&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Field&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;total_status&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Time&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;created_at&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Time&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;modified_at&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Now&lt;/span>&lt;span class="p">()),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Edges of the Task.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">Task&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Edges&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Edge&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Edge&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">edge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">From&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;member&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Member&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Type&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Ref&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tasks&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Unique&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì°¸ì¡°í•˜ëŠ” ì´ìœ ëŠ” ì–´ë–¤ schemaì™€ ì°¸ì¡°í•˜ëŠ”ì§€ë¥¼ ëª…ì‹œí•˜ê¸° ìœ„í•´ì„œë¼ê³  ë³´ë©´ ëœë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&amp;hellip; because there can be multiple references from one schema to other.&lt;/p>
&lt;/blockquote>
&lt;h3 id="ì˜ˆì œ---ë°ì´í„°-ìƒì„±-ì½”ë“œ">ì˜ˆì œ - ë°ì´í„° ìƒì„± ì½”ë“œ
&lt;/h3>&lt;p>ê·¸ëŸ¼ ë°ì´í„°ë¥¼ ìƒì„±í• ë•Œ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? ì°¸ì¡°í•˜ëŠ” Schema(Task)ì—ì„œ Member ì •ë³´ë¥¼ ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤.&lt;/p>
&lt;p>ê³µì‹ ë¬¸ì„œì—ì„œëŠ” ì§ì ‘ Queryí•´ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™”ì§€ë§Œ&lt;sup id="fnref:7">&lt;a href="#fn:7" class="footnote-ref" role="doc-noteref">7&lt;/a>&lt;/sup> , ê·¸ ì™¸ì—ë„ Schema ë°ì´í„°( ì˜ˆì œì—ì„œëŠ” ent.Member) í˜¹ì€ ì•„ì´ë””ë§Œìœ¼ë¡œë„ ì¶”ê°€ê°€ ê°€ëŠ¥í•˜ë‹ˆ ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Store&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="nx">request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">CreateTask&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// create Task
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Task&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nf">SetTitle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Title&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">SetTotalStatus&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nf">SetMemberID&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UserId&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Save&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì‹¤ì œë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë³´ë©´ {ì°¸ì¡°í•˜ëŠ” ê´€ê³„ëª…} _ {ì°¸ì¡°í•˜ëŠ” ê´€ê³„ëª…}ìœ¼ë¡œ ì´ë¤„ì ¸ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/entgo-1/img2.png"
width="1012"
height="254"
srcset="https://s0okju.github.io/p/entgo-1/img2_hu2709563176019758498.png 480w, https://s0okju.github.io/p/entgo-1/img2_hu1973805247732052792.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="398"
data-flex-basis="956px"
>&lt;/p>
&lt;p>ìœ„ì˜ ì˜ˆì œì—ì„œëŠ” 1:N(One-to-Many)ì¸ ê²½ìš°ì—ë©´ ì„¤ëª…í–ˆì§€ë§Œ (M:N)ì˜ ê²½ìš°ì—ëŠ” {ì°¸ì¡°í•˜ëŠ” ê´€ê³„ëª…} _ {ì°¸ì¡°í•˜ëŠ” ê´€ê³„ëª…}ì˜ ì´ë¦„ì„ ê°€ì§„ í…Œì´ë¸”ì´ ìƒì„±ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/entgo-1/img3.png"
width="372"
height="200"
srcset="https://s0okju.github.io/p/entgo-1/img3_hu8289960711306117976.png 480w, https://s0okju.github.io/p/entgo-1/img3_hu13381449982502672690.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="186"
data-flex-basis="446px"
>&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://entgo.io/docs/getting-started/" target="_blank" rel="noopener"
>https://entgo.io/docs/getting-started/&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>í•„ìëŠ” MongoDBì— ì ìš©ì‹œí‚¤ê³ ì ê²€ìƒ‰ì„ ì—¬ëŸ¬ë²ˆ í–ˆì§€ë§Œ ëë‚´ ì°¾ì§€ ëª»í–ˆë‹¤.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;a class="link" href="https://blog.billo.io/devposts/go_orm_recommandation/" target="_blank" rel="noopener"
>https://blog.billo.io/devposts/go_orm_recommandation/&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:4">
&lt;p>&lt;a class="link" href="https://neo4j.com/docs/getting-started/" target="_blank" rel="noopener"
>https://neo4j.com/docs/getting-started/&lt;/a>&amp;#160;&lt;a href="#fnref:4" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:5">
&lt;p>&lt;a class="link" href="https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/" target="_blank" rel="noopener"
>https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/&lt;/a>&amp;#160;&lt;a href="#fnref:5" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:6">
&lt;p>&lt;a class="link" href="https://entgo.io/docs/schema-edges#quick-summary" target="_blank" rel="noopener"
>https://entgo.io/docs/schema-edges#quick-summary&lt;/a>&amp;#160;&lt;a href="#fnref:6" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:7">
&lt;p>&lt;a class="link" href="https://entgo.io/docs/schema-edges#o2o-two-types" target="_blank" rel="noopener"
>https://entgo.io/docs/schema-edges#o2o-two-types&lt;/a>&amp;#160;&lt;a href="#fnref:7" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Todopoint ì„œë²„ì½”ë“œ ê°œì„ ê¸° - 1. ê³µë™ ì—ëŸ¬ ì²˜ë¦¬í•˜ê¸°</title><link>https://s0okju.github.io/p/go-code-refactor-error-1/</link><pubDate>Sat, 11 May 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/go-code-refactor-error-1/</guid><description>&lt;p>Goë¥¼ í™œìš©í•˜ì—¬ ì§ì ‘ 2~3ê°œì˜ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ê³  ë‚˜ë‹ˆ, êµ¬í˜„í• ë•Œ ì§€ë‚˜ì³¤ë˜ ì—ëŸ¬ë“¤ì´ í° ëˆˆë©ì´ë¡œ ë³€í•´ì„œ ë®ì³ì™”ë‹¤.
ë¬¸ì œê°€ ìƒê¸´ ì§€ì ì€ ëª…í™•í–ˆì§€ë§Œ, ê·¸ê²ƒë³´ë‹¤ëŠ” ë¬¸ì œ ë°œìƒì˜ ê·¼ë³¸ì ì¸ ì›ì¸ì„ ì°¾ê³ ì í–ˆì—ˆë‹¤. ë‚´ê°€ ìƒê°í•œ ê°€ì¥ í° ì›ì¸ì€ &lt;strong>í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ë¶€ì¬&lt;/strong>ì˜€ë‹¤.
í…ŒìŠ¤íŠ¸ì˜ ì¥ì ì€ ëˆ„êµ¬ë‚˜ ì•Œê³  ìˆì„ ê²ƒì´ë‹¤. ì½”ë“œì˜ ì•ˆì „ì„±ì„ í™•ë³´í•  ìˆ˜ ìˆìœ¼ë©° ë¬¸ì œ ë°œìƒ ì‹œ ë¹ ë¥´ê²Œ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. í˜„ì¬ ì½”ë“œì—ëŠ” ìˆ¨ê²¨ì§„ êµ¬ë©ë“¤ì´ ì¡´ì¬í•˜ëŠ”ë°, ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¨ìœ„ í…ŒìŠ¤íŠ¸, í†µí•© í…ŒìŠ¤íŠ¸ê°€ í•„ìš”í–ˆë‹¤.
ê¸°ì¡´ì— ìˆë˜ ì½”ë“œë¥¼ í™œìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ ì‘ì„±í•˜ë ¤ê³  ì‹œë„í–ˆìœ¼ë‚˜, ì§€ê¸ˆê¹Œì§€ ì ì€ Go ì½”ë“œëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ìš©ì´í•˜ë„ë¡ ì‘ì„±ë˜ì§€ ì•Šì•˜ë‹¤. íŠ¹íˆ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì ì ˆí•˜ê²Œ ì‚¬ìš©í•˜ì§€ ì•Šì•„ì„œ Mockë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ì–´ë ¤ì›€ì´ ìƒê¸°ê¸°ë„ í–ˆë‹¤.
ê·¸ë˜ì„œ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì œì‘í•˜ê³ ì í•œë‹¤.&lt;/p>
&lt;p>ë‚˜ëŠ” ë™ì¼í•œ ì½”ë“œì— ëŒ€í•´ ì´ë²ˆê¹Œì§€ í¬í•¨í•´ì„œ 2ë²ˆ ë³€ê²½í–ˆë‹¤. ì–´ë–»ê²Œ ë³€ê²½í–ˆëŠ”ì§€ ì•Œì•„ë³´ì&lt;/p>
&lt;h2 id="ì´ˆê¸°---go-í•œë‹¬ì°¨ì˜-ì ì‘ê¸°">ì´ˆê¸° - Go í•œë‹¬ì°¨ì˜ ì ì‘ê¸°
&lt;/h2>&lt;h3 id="ì—ëŸ¬-íƒ€ì…ê³¼-ìƒíƒœ-íƒ€ì…">ì—ëŸ¬ íƒ€ì…ê³¼ ìƒíƒœ íƒ€ì…
&lt;/h3>&lt;p>1ì°¨ì—ì„œëŠ” &lt;code>ErrorType&lt;/code>ìœ¼ë¡œ íŠ¹ì • ì—ëŸ¬ íƒ€ì…ì„ ì •ì˜í•˜ëŠ”ë° ì‚¬ìš©í•  íƒ€ì…ì„ ì§€ì •í•´ì¤¬ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">ErrorType&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Error&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Code is a custom error code
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">ErrorType&lt;/span> &lt;span class="nx">ErrorType&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Err is a error string
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Err&lt;/span> &lt;span class="kt">error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Description is a human-friendly message.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Description&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">ErrorRes&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Code is http status code
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Code&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="s">`json:&amp;#34;code&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ëª¨ë“  ì„œë¹„ìŠ¤ë“¤ì´ ì‚¬ìš©í•  ê²½ìš°, ê° ì„œë¹„ìŠ¤ê°€ ì‚¬ìš©í•  ì—ëŸ¬ ì½”ë“œë¥¼ ì¼ë¦¬ë¦¬ ì§€ì •í–ˆë‹¤. mapë¥¼ í™œìš©í•˜ì—¬ ì—ëŸ¬ íƒ€ì…ì— í•´ë‹¹ë˜ëŠ” ìƒíƒœ ì½”ë“œë¥¼ ë§¤í•‘í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Common
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">SUCCESS&lt;/span> &lt;span class="nx">ErrorType&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">INVALID_JSON_FORMAT&lt;/span> &lt;span class="nx">ErrorType&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">1001&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">INVALID_URI_FORMAT&lt;/span> &lt;span class="nx">ErrorType&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">1002&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Member
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">INVALID_MEMBER&lt;/span> &lt;span class="nx">ErrorType&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">2001&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ERROR_MEMBER_DB&lt;/span> &lt;span class="nx">ErrorType&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">2101&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Task
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">ERROR_TASK_DB&lt;/span> &lt;span class="nx">ErrorType&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">3101&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">codeMap&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">ErrorType&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Common
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">INVALID_JSON_FORMAT&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusBadRequest&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">INVALID_URI_FORMAT&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusBadRequest&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Member
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">INVALID_MEMBER&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusUnauthorized&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ERROR_MEMBER_DB&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusInternalServerError&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Task
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">ERROR_TASK_DB&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusInternalServerError&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ì—ëŸ¬-ë°˜í™˜">ì—ëŸ¬ ë°˜í™˜
&lt;/h3>&lt;p>ì§ì ‘ ì»¤ìŠ¤í…€í•œ ì—ëŸ¬ê°’ì„ ì…ë ¥ê°’ìœ¼ë¡œ í•´ì„œ contextë¥¼ í™œìš©í•´ Json í˜•íƒœë¡œ ë°˜í™˜í•´ì¤¬ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// getCode is get Status code from codeMap.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">getCode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">flag&lt;/span> &lt;span class="nx">ErrorType&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ErrorRes&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">ErrorRes&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Code&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">codeMap&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="p">]}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">ErrorFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">getCode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ErrorType&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AbortWithStatusJSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Code&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&amp;ldquo;ì €ë ‡ê²Œ í•˜ë©´ ì˜¤ë¥˜ê°€ ì œëŒ€ë¡œ ë°˜í™˜ë˜ì§€ ì•Šì„í…ë°?&amp;ldquo;ë¼ê³  ìƒê°í•˜ëŠ” ì‚¬ëŒì´ ìˆì„ ê²ƒì´ë‹¤. ì €ë•Œ ë‹¹ì‹œ ginì´ ì—ëŸ¬ë¥¼ ì‘ë‹µí•˜ëŠ” ë§¤ì»¤ë‹ˆì¦˜ì„ ì˜ ëª°ë¼ ë‹¨ìˆœí•˜ê²Œ AbortWithStatusJsonìœ¼ë¡œ ì‘ë‹µí•˜ë„ë¡ í–ˆë‹¤. ë¹„ë¡ ê²°ê³¼ëŠ” ì—ëŸ¬ json + ì„±ê³µ json ë‘˜ë‹¤ ë‚˜ì™”ì§€ë§Œ ë§ì´ë‹¤.&lt;/p>
&lt;h2 id="1ì°¨---middlewareê°€-ìˆì—ˆë‹¤ê³ ìš”">1ì°¨ - Middlewareê°€ ìˆì—ˆë‹¤ê³ ìš”?
&lt;/h2>&lt;p>ginì˜ ì˜¤ë¥˜ ì²˜ë¦¬ ë§¤ì»¤ë‹ˆì¦˜ì„ ì œëŒ€ë¡œ ì´í•´í•˜ì§€ ëª»í•´ ë‹¨ìˆœí•˜ê²Œ ì‘ë‹µì„ ì²˜ë¦¬í–ˆë‹¤. ì´ì œëŠ” Middlewareë¥¼ ì œì‘í•¨ìœ¼ë¡œì¨ ì—ëŸ¬ ì‘ë‹µ ë°˜í™˜ì´ ìˆ˜ì›”í•˜ë„ë¡ êµ¬í˜„í–ˆë‹¤.&lt;/p>
&lt;h3 id="ì—ëŸ¬-ìƒíƒœ-íƒ€ì…">ì—ëŸ¬ ìƒíƒœ íƒ€ì…
&lt;/h3>&lt;p>ErrorType -&amp;gt; WebCodeë¡œ ì´ë¦„ì„ ë³€ê²½í–ˆìœ¼ë©°, ì—ëŸ¬ë¿ë§Œ ì•„ë‹ˆë¼ ìƒíƒœ ì „ì²´ë¥¼ í‘œì‹œí–ˆë‹¤.
ì—¬ê¸°ì„œ ëˆˆì¹˜ ë¹ ë¥´ì‹  ë¶„ì€ ì•Œê² ì§€ë§Œ ì—ëŸ¬ íƒ€ì…ì—ëŠ” ìƒíƒœê°’ì„ ì§ì ‘ í¬í•¨í•˜ë„ë¡ êµ¬í˜„í–ˆë‹¤. ì™œëƒí•˜ë©´ ìƒíƒœ ì½”ë“œë¥¼ ì¶”ê°€í•  ì¼ì´ ë§ì€ë° ì‘ì—…ì„ ë‘ë²ˆí•´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">TaskCreationSuccess&lt;/span> &lt;span class="nx">WebCode&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">220101&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">SubtaskCreationSuccess&lt;/span> &lt;span class="nx">WebCode&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">220151&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì˜ˆë¡œ 220101 ì´ë¼ë©´ 2(Task Service)/201(Status code)/01(Unique number)ë¡œ êµ¬ì„±í•˜ë„ë¡ í–ˆë‹¤.&lt;/p>
&lt;h3 id="ì—ëŸ¬-íƒ€ì…ê³¼-ë°˜í™˜">ì—ëŸ¬ íƒ€ì…ê³¼ ë°˜í™˜
&lt;/h3>&lt;p>ì´ì „ì—ëŠ” ì—ëŸ¬ íƒ€ì…ì„ Errorë¼ê³  ì •í–ˆì§€ë§Œ gin ë‚´ë¶€ì˜ ì—ëŸ¬ë¥¼ ì“°ë©´ì„œ í—·ê°ˆë¦¬ê¸° ì‹œì‘í–ˆë‹¤. ê·¸ë˜ì„œ NetErrorë¡œ ì´ë¦„ì„ ë³€ê²½í–ˆìœ¼ë©°, Description fieldëŠ” ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒ ê°™ì•„ ì‚­ì œí–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">NetError&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Code&lt;/span> &lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WebCode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Err&lt;/span> &lt;span class="kt">error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewNetError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">code&lt;/span> &lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WebCode&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">NetError&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logrus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Code : %d, Error : %v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">code&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">NetError&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Code&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">code&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Err&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">NetError&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Code&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">code&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Err&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì—ëŸ¬ëŠ” ë™ì¼í•˜ê²Œ codeë§Œ ë°˜í™˜í•˜ë„ë¡ êµ¬í˜„í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Response
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">ErrorResponse&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Code&lt;/span> &lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WebCode&lt;/span> &lt;span class="s">`json:&amp;#34;codes&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewErrorResponse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">code&lt;/span> &lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WebCode&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ErrorResponse&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">ErrorResponse&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Code&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">code&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ì„±ê³µ">ì„±ê³µ
&lt;/h3>&lt;p>ì‘ë‹µê°’ì„ ìƒê°í•´ë³´ë©´ í¬ê²Œ ë‘ ê°€ì§€ê°€ ì¡´ì¬í•œë‹¤.&lt;/p>
&lt;ul>
&lt;li>ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°&lt;/li>
&lt;li>ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš°&lt;/li>
&lt;/ul>
&lt;p>ì´ ë‘ê°€ì§€ë¥¼ ë‚˜ëˆ ì„œ ë³„ë„ì˜ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì—ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">SuccessWith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">code&lt;/span> &lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WebCode&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span> &lt;span class="nx">any&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">status&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetStatus&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">code&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewSuccessResponseWith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">code&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Header&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Content-Type&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;application/json&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AbortWithStatusJSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">status&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">Success&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">code&lt;/span> &lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WebCode&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">status&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetStatus&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">code&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Header&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Content-Type&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;application/json&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewSuccessResponse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">code&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">status&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì—ëŸ¬ ë°˜í™˜ ë¡œì§ì€ gin Middlewareë¥¼ ì‚¬ìš©í–ˆë‹¤. ìì„¸í•œ ì‚¬í•­ì€ [[Gin - ì˜ˆì™¸ì²˜ë¦¬ 2. ì»¤ìŠ¤í…€ ì˜ˆì™¸ì²˜ë¦¬ êµ¬í˜„í•˜ê¸°]] ë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.&lt;/p>
&lt;h2 id="2ì°¨---í”„ë¡ íŠ¸ì—”ë“œë¥¼-í•˜ê³ ë‚˜ë‹ˆ">2ì°¨ - í”„ë¡ íŠ¸ì—”ë“œë¥¼ í•˜ê³ ë‚˜ë‹ˆ&amp;hellip;
&lt;/h2>&lt;p>ì™œ ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œê°€ ì§ê¿ì´ ë§ì•„ì•¼ í•˜ëŠ”ì§€ ì•Œ ê²ƒ ê°™ì•˜ë‹¤.
í”ŒëŸ¬í„°ì˜ ê²½ìš°ì—ëŠ” ì‘ë‹µê°’ê³¼ ë˜‘ê°™ì€ í•„ë“œë¥¼ ê°€ì§„ ëª¨ë¸ë¡œ ë°˜í™˜í•´ì•¼ í•œë‹¤. ë§Œì•½ì— ì •í™•í•˜ê²Œ ë°›ì§€ ëª»í•˜ë©´, ì•„ë¬´ëŸ° ê°’ë„ ë°›ì„ ìˆ˜ ì—†ë‹¤.(ì‹¬ì§€ì–´ ìƒíƒœê°’ë„ ë§ì´ë‹¤.) í”ŒëŸ¬í„°ë¡œì¨ëŠ” í•´ê²° ë°©ì•ˆì„ ì°¾ì§€ ëª»í•´ì„œ &lt;strong>ì„œë²„ì¸¡ì—ì„œ ì„±ê³µì´ë“  ì˜¤ë¥˜ë“  ëª¨ë‘ ë™ì¼í•œ í˜•íƒœë¡œ ë°˜í™˜í•˜ë„ë¡ êµ¬í˜„í•´ì•¼ í–ˆì—ˆë‹¤.&lt;/strong>&lt;/p>
&lt;h3 id="response-format">Response Format
&lt;/h3>&lt;p>ìœ„ì—ì„œ 1ì°¨, 2ì°¨ë¥¼ ë³´ë©´ êµ¬ì²´ì ì¸ ë©”ì„¸ì§€ê°€ ì—†ì—ˆë‹¤. ë©”ì„¸ì§€ë¥¼ ë„£ì§€ ì•Šì€ ì´ìœ ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì €ëŸ°ê²ƒê¹Œì§€ ë³´ì—¬ì¤„ í•„ìš”ê°€ ì—†ë‹¤ê³  ìƒê°í•´ì„œì˜€ë‹¤. ê·¸ëŸ¬ë‚˜ ì•±ê°œë°œí•˜ë©´ì„œ ì •ë³´ê°€ ì—†ì–´ì„œ ì •ë§ í˜ë“¤ì—ˆë‹¤. ğŸ˜¥&lt;br>
Error Responseì˜ Best Practiceë¥¼ ì°¾ì•„ë³´ë‹ˆ ëŒ€ë¶€ë¶„ ìì²´ì ì¸ codeì™€ ì´ë¥¼ ì„¤ëª…í•˜ëŠ” ë©”ì„¸ì§€ê°€ í¬í•¨ë˜ì–´ ìˆì—ˆë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> ì´ë²ˆì— ìˆ˜ì •í•œ ì‘ë‹µì—ì„œëŠ” ë©”ì„¸ì§€ë¥¼ ì¶”ê°€í•˜ê¸°ë¡œ í–ˆë‹¤.&lt;/p>
&lt;h3 id="ì—ëŸ¬-ìƒíƒœ-íƒ€ì…-1">ì—ëŸ¬ ìƒíƒœ íƒ€ì…
&lt;/h3>&lt;p>ì¼ë‹¨ ì§€ê¸ˆê¹Œì§€ ì‚¬ìš©í–ˆë˜ ì—ëŸ¬ ì½”ë“œë³´ë‹¤ ê¸¸ì´ë¥¼ ë” ì¶•ì†Œì‹œì¼°ë‹¤. ê·¸ë˜ì„œ ìì£¼ ì‚¬ìš©í•˜ëŠ” ìƒíƒœ ì½”ë“œë¥¼ ë°±ì˜ ìë¦¬ë¡œ ë‘ê³ , 1ì”© ì¹´ìš´íŠ¸ë¥¼ ì¶”ê°€í•˜ë©´ì„œ ì—ëŸ¬ ì½”ë“œë¥¼ ì •ì˜í–ˆë‹¤.
ë˜í•œ ì—ëŸ¬ì½”ë“œì— ë§¤í•‘ë˜ëŠ” ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ì¶”ê°€í•¨ìœ¼ë¡œì¨, ë™ì¼í•œ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë°˜í™˜í•˜ë„ë¡ í–ˆë‹¤. ë©”ì„¸ì§€ëŠ” ì •í™•í•˜ê²Œ ì ì§€ ì•Šê³ , ë¬¸ì œë¥¼ ì „ë°˜ì ìœ¼ë¡œ ë³´ì—¬ì¤„ ìˆ˜ ìˆë„ë¡ ì‘ì„±í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 1xx is Bad Request error code
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">InvalidHeader&lt;/span> &lt;span class="nx">ErrorCode&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">101&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">InvalidBody&lt;/span> &lt;span class="nx">ErrorCode&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">102&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">InvalidQuery&lt;/span> &lt;span class="nx">ErrorCode&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">103&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 2xx is Unauthorized error code
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">BadAuthenticationData&lt;/span> &lt;span class="nx">ErrorCode&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">201&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TokenExpired&lt;/span> &lt;span class="nx">ErrorCode&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">202&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">errorMessage&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">ErrorCode&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">InvalidHeader&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;The provided header values are invalid.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">InvalidBody&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;The body of the request is invalid.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">InvalidQuery&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;The query parameters are invalid.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ì—ëŸ¬-íƒ€ì…">ì—ëŸ¬ íƒ€ì…
&lt;/h3>&lt;p>&lt;code>netErrorOptions&lt;/code> ë¼ëŠ” ì˜µì…˜ì„ ì¶”ê°€ì‹œì¼°ëŠ”ë°, ì—¬ê¸°ì—ëŠ” ì„œë¹„ìŠ¤ì˜ ë©”íƒ€ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// NetError have options and ErrorCode that contains status code.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">NetError&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// options is metadata about service options
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">netErrorOptions&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Type is a unique data that contains http status code.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Code&lt;/span> &lt;span class="nx">ErrorCode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Description is an error details.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Description&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Err is an error message.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Err&lt;/span> &lt;span class="kt">error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ë©”íƒ€ ì •ë³´ë¡œì¨ íƒœê·¸ê°€ ìˆëŠ”ë°, ì„œë¹„ìŠ¤ ì´ë¦„ì„ ë¬¸ìì—´ë¡œ í‘œì‹œí•˜ëŠ” ê²ƒì´ë‹¤.
íƒœê·¸ëŠ” ì„œë²„ì—ì„œ ë””ë²„ê¹…ì„ ì¡°ê¸ˆë” ìˆ˜ì›”í•˜ê²Œ í•˜ê¸° ìœ„í•´ì„œ ë„ì…í–ˆë‹¤. ì˜¤ë¥˜ì½”ë“œê°€ ëª¨ë‘ ë™ì¼í•´ì„œ ì–´ë–¤ ì„œë¹„ìŠ¤ì˜ ì˜¤ë¥˜ì¸ì§€ ëª…ì‹œí•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// netErrorOptions is meta data about service
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">netErrorOptions&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// tag is the service name
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">tag&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì´ íƒœê·¸ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹œì‘í• ë•Œ í•œë²ˆë§Œ ì„¤ì •í•˜ë„ë¡ í•¨ìœ¼ë¡œì¨, ëª¨ë“  NetErrorê°€ í•´ë‹¹ tagë¥¼ ê°€ì§€ë„ë¡ êµ¬í˜„í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">opts&lt;/span> &lt;span class="nx">netErrorOptions&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// netErrorOptions is meta data about service
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">netErrorOptions&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// tag is the service name
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">tag&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// SetTag sets the service name
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">SetTag&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tag&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mu&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">sync&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Mutex&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Lock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">defer&lt;/span> &lt;span class="nx">mu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Unlock&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">opts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tag&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">tag&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ì—ëŸ¬-ë°˜í™˜-1">ì—ëŸ¬ ë°˜í™˜
&lt;/h3>&lt;p>ì—ëŸ¬ëŠ” í¬ê²Œ ë‘ ê°€ì§€ë¡œ ë‚˜ëˆ ì ¸ ìˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Status: ì‘ë‹µì˜ íƒ€ì… (&amp;ldquo;Success&amp;rdquo; or &amp;ldquo;Error&amp;rdquo;)&lt;/li>
&lt;li>Data : ì—ëŸ¬ ë°ì´í„° í˜¹ì€ ì„±ê³µ ì‹œ ë°˜í™˜í•  ë°ì´í„°&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// BaseResponse is common response that use in success and failed
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">BaseResponse&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Status&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`json:&amp;#34;status&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Data&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{}&lt;/span> &lt;span class="s">`json:&amp;#34;data&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ë‹¤ë§Œ ìƒì„±ìë¥¼ ë§Œë“¤ë•Œ ì„±ê³µ, ì‹¤íŒ¨ ì—¬ë¶€ë¥¼ ë”°ë¡œ ë§Œë“¤ì—ˆë‹¤. ê·¸ ì´ìœ ëŠ” ì…ë ¥í•˜ëŠ” ê°’ì´ ë‹¤ ë‹¬ëê¸° ë•Œë¬¸ì´ë‹¤.&lt;/p>
&lt;p>ì„±ê³µí•œ ê²½ìš° ë°˜í™˜í•˜ê³ ì í•˜ëŠ” ë°ì´í„°ë¥¼ Data í•„ë“œì— ë„£ê¸°ë§Œ í•˜ë©´ ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewSuccessBaseResponse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span> &lt;span class="kd">interface&lt;/span>&lt;span class="p">{})&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">BaseResponse&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">BaseResponse&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Success&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Data&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê·¸ëŸ¬ë‚˜ ì˜¤ë¥˜ì¸ ê²½ìš°ëŠ” ë‹¤ë¥´ë‹¤. ë°˜í™˜í•  ì˜¤ë¥˜ íƒ€ì…ì€ í˜•ì‹í™”ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, &lt;code>ErrorResponse&lt;/code> êµ¬ì¡°ì²´ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì„œ Data í•„ë“œì— ì €ì¥í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ErrorResponse is the error response format
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">ErrorResponse&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Code&lt;/span> &lt;span class="nx">ErrorCode&lt;/span> &lt;span class="s">`json:&amp;#34;code&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Message&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="s">`json:&amp;#34;message&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewErrorBaseResponse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span> &lt;span class="nx">NetError&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">BaseResponse&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ErrorResponse&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Code&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Code&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Message&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nf">GetErrorMsg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Code&lt;/span>&lt;span class="p">)}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">BaseResponse&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Error&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Data&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>BaseResponseê°€ ë°˜í™˜ë˜ë©´, ë©”ì†Œë“œë¡œ ì‘ë‹µê°’ì„ ë°˜í™˜í•˜ë„ë¡ êµ¬í˜„í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Failed response failed formatted response.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// It converts NetError to ErrorResponse to extract necessary things.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="nx">BaseResponse&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Failed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetErrorData&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">status&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">parseStatusCode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Code&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AbortWithStatusJSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">status&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// OKSuccess uses when status code is 200
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span> &lt;span class="nx">BaseResponse&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">OKSuccess&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Header&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Content-Type&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;application/json&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AbortWithStatusJSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="í…ŒìŠ¤íŠ¸">í…ŒìŠ¤íŠ¸
&lt;/h2>&lt;p>gin í…ŒìŠ¤íŠ¸ ì‚¬ë¡€&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>ë¥¼ ì°¸ê³ í•´ì„œ ì„±ê³µí–ˆì„ ê²½ìš°ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì•˜ë‹¤.
í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” í…Œì´ë¸” ì¤‘ì‹¬ í…ŒìŠ¤íŠ¸(Table-Driven Test) ë°©ì‹&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>ì„ ì±„íƒí–ˆë‹¤. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ê°€ ë¹„ìŠ·í•œ êµ¬ì¡°ë¡œ ì´ë¤„ì ¸ ìˆëŠ” ê²½ìš°, í…Œì´ë¸” ì¤‘ì‹¬ í…ŒìŠ¤íŠ¸ë¡œ ìˆ˜í–‰í•˜ë©´ ì½”ë“œ ì¤‘ë³µì„ í”¼í•  ìˆ˜ ìˆì–´ ë¡œì§ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ì¼€ì´ìŠ¤ë¥¼ ì¶”ê°€í•˜ê¸° ì‰½ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.
ì‘ì„±í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ëŠ” í…ŒìŠ¤íŠ¸ êµ¬ì¡°ê°€ ë¹„ìŠ·í•˜ê³ , ë¼ìš°íŒ… ì„¤ì • ë“± ê³µí†µëœ ë¶€ë¶„ì´ ë§ì•„ì„œ í…Œì´ë¸” ì¤‘ì‹¬ í…ŒìŠ¤íŠ¸ë¥¼ ì„ íƒí•˜ê²Œ ë˜ì—ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">setupRouter&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Engine&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Use&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">errorutils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ErrorMiddleware&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">r&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">TestSuccessResponse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">setupRouter&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">errorutils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewSuccessBaseResponse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Set table
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">tests&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">description&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fn&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">expectedCode&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">path&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Ok Success
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">description&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;OKSuccess&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fn&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">OKSuccess&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">expectedCode&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">path&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;/test/ok&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Created Success
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">description&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;CreatedSuccess&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fn&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreatedSuccess&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">expectedCode&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">201&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">path&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;/test/created&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tc&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">tests&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">description&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">t&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">testing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">T&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">w&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">httptest&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewRecorder&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewRequest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;GET&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Specific handler function and serve
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ServeHTTP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">w&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Code&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nx">tc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">expectedCode&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Expected %d, got %d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">expectedCode&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">w&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Code&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/image1.png"
loading="lazy"
>&lt;/p>
&lt;h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°
&lt;/h2>&lt;p>í•˜ë‚˜ì˜ ê°„ë‹¨í•œ CRUDê°€ ìˆëŠ” ì„œë¹„ìŠ¤ 2ê°œë¥¼ ê°€ì§€ê³  ì½”ë“œë¥¼ ì—¬ëŸ¬ë²ˆ ìˆ˜ì •í–ˆë‹¤. ê·¸ ê³¼ì •ì—ì„œ ë‹¤ì–‘í•œ ì˜¤ë¥˜ë¥¼ ë§Œë‚¬ê³ , í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ì¤‘ìš”ì„±ë„ í™•ì‹¤íˆ ì•Œì•˜ë‹¤.
íŠ¹íˆ ì´ë²ˆì— í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ì„œ ì˜¤ë¥˜ë¥¼ ë§ì´ ë§ˆì£¼ í–ˆëŠ”ë°, ì´ë¥¼ ì¬ë¹ ë¥´ê²Œ ìˆ˜ì •í•˜ë©´ì„œ í…ŒìŠ¤íŠ¸ì˜ ì¤‘ìš”ì„±ì„ ëŠë¼ê²Œ ë˜ì—ˆë‹¤.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://pjh3749.tistory.com/273" target="_blank" rel="noopener"
>https://pjh3749.tistory.com/273&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://gin-gonic.com/docs/testing/" target="_blank" rel="noopener"
>https://gin-gonic.com/docs/testing/&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;a class="link" href="https://bugoverdose.github.io/development/go-table-driven-tests/" target="_blank" rel="noopener"
>https://bugoverdose.github.io/development/go-table-driven-tests/&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>AWS - EKSë€ ë¬´ì—‡ì¸ê°€</title><link>https://s0okju.github.io/p/what-is-eks/</link><pubDate>Wed, 01 May 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/what-is-eks/</guid><description>&lt;h2 id="eks">EKS
&lt;/h2>&lt;p>Amazon Web Services(AWS)ì—Â KubernetesÂ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì„ ì„¤ì¹˜, ìš´ì˜ ë° ìœ ì§€ ê´€ë¦¬í•  í•„ìš”ê°€ ì—†ëŠ” ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ì´ë‹¤&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>.&lt;/p>
&lt;h2 id="ecs-vs-eks">ECS vs EKS
&lt;/h2>&lt;ul>
&lt;li>ë‘˜ ë‹¤ ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì´ë¼ëŠ” ì ì—ì„œ ê³µí†µì ì„ ê°€ì§&lt;/li>
&lt;li>ECSëŠ” AWSê°€ ë§Œë“  ìì²´ì ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ êµ¬ì¡°ë¡œ K8S êµ¬ì¡°ì™€ ì™„ì „ ë‹¤ë¦„&lt;/li>
&lt;li>K8SëŠ” ì˜¤í”ˆì†ŒìŠ¤ê°€ í¬ê²Œ í™œì„±í™”ë˜ì–´ ìˆê³ , ë‹¤ì–‘í•œ í”ŒëŸ¬ê·¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ&lt;/li>
&lt;li>ECSëŠ” ì˜¤í”ˆì†ŒìŠ¤ê°€ í¬ê²Œ í™œì„±í™”ë˜ì–´ ìˆì§€ ì•ŠìŒ.&lt;/li>
&lt;li>Auto-scaling ì¸¡ë©´ì—ì„œ EKSëŠ” ìˆ˜ë™ ë° ìë™ ë°°í¬ê°€ ê°€ëŠ¥í•˜ì§€ë§Œ ECSëŠ” ìˆ˜ë™ìœ¼ë¡œë§Œ ê°€ëŠ¥í•˜ë‹¤.&lt;/li>
&lt;li>ì˜¤ë¥˜ ìˆ˜ì •í•˜ëŠ”ë° ECSëŠ” ì „ë¬¸ê°€ê°€ í•„ìš”í•¨&lt;/li>
&lt;/ul>
&lt;p>ğŸ“Œ ìì„¸í•œ ì‚¬í•­ì€ &lt;a class="link" href="https://timewizhan.tistory.com/entry/AWS-ECS-vs-Kubernetes" target="_blank" rel="noopener"
>ë¬¼í†µê¿€ê¿€ì´ë‹˜ì˜ ë¸”ë¡œê·¸, [AWS] ECS vs Kubernetes&lt;/a>ë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ëŒ.&lt;/p>
&lt;p>ğŸ¤” EKSê°€ ë¬´ì¡°ê±´ ì •ë‹µì€ ì•„ë‹ˆë‹¤. í”„ë¡œì íŠ¸ì— ë”°ë¼ì„œëŠ” ECSê°€ ë” ì í•©í•œ ì„ íƒì§€ì¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://velog.io/@tanggu01/%EB%B0%8D%EA%B8%80-ECS-vs-EKS-EC2-vs-Fargate-%EB%B0%B0%ED%8F%AC-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%B9%84%EA%B5%90%ED%95%B4%EB%B3%B4%EA%B8%B0" target="_blank" rel="noopener"
>ECS ì ìš© ì‚¬ë¡€ - ë°ê¸€&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="ì™œ-eks-ì„¤ì¹˜ëŠ”-ì–´ë ¤ìš´ê°€">ì™œ EKS ì„¤ì¹˜ëŠ” ì–´ë ¤ìš´ê°€?
&lt;/h3>&lt;p>ìš°ë¦¬ê°€ ì•Œê³  ìˆëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ êµ¬ì¡°ì™€ ë‹¬ë¦¬ ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì¼ë¶€ ë„êµ¬ë§Œ ì œê³µí•˜ê³ , ë‚˜ë¨¸ì§€ëŠ” ë³„ë„ì˜ ì„¤ì¹˜ê°€ í•„ìš”í•˜ë‹¤. ì´ëŸ° ì´ìœ ë¡œ ë²„ì „ ê´€ë¦¬ê°€ ì–´ë ¤ì›Œì§€ê¸°ë„ í•œë‹¤.&lt;/p>
&lt;ul>
&lt;li>ì¿ ë²„ë„¤í‹°ìŠ¤ ì œê³µ : kube-proxy, kubelet&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://www.cncf.io/projects/" target="_blank" rel="noopener"
>CNCF Graduated Project&lt;/a>ë¥¼ ë³´ë©´ etcd, coreDNS ë“±ì„ ë³¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h2 id="eks-êµ¬ì¡°">EKS êµ¬ì¡°
&lt;/h2>&lt;p>ì•ì„œ ë§í–ˆë“¯ì´ ì§ì ‘ êµ¬ì¶•í•˜ê²Œ ë˜ë©´, ê´€ë¦¬í•´ì•¼ í•˜ëŠ” ìš”ì†Œë“¤ì´ ë§ë‹¤. ì´ëŸ¬í•œ ì–´ë ¤ì›€ì„ ëœì–´ë‚´ê³ ì EKSë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. EKSëŠ” ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ë¡œì„œ Control Planeë¥¼ ì§ì ‘ êµ¬ì„±í•˜ì§€ ì•Šê³  K8Së¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
&lt;img src="https://s0okju.github.io/p/what-is-eks/image1.png"
width="1402"
height="882"
srcset="https://s0okju.github.io/p/what-is-eks/image1_hu9865107203521681606.png 480w, https://s0okju.github.io/p/what-is-eks/image1_hu8282878434912451480.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://kubernetes.io/docs/concepts/architecture/"
class="gallery-image"
data-flex-grow="158"
data-flex-basis="381px"
>&lt;/p>
&lt;h2 id="eks-íŠ¹ì§•">EKS íŠ¹ì§•
&lt;/h2>&lt;ul>
&lt;li>EKS CNIë¥¼ í™œìš©í•˜ì—¬ VPC ë„¤íŠ¸ì›Œí¬ ìƒì—ì„œ íŒŒë“œê°„ í†µì‹  ê°€ëŠ¥&lt;/li>
&lt;li>IAMì„ í™œìš©í•˜ì—¬ ê¶Œí•œ ì„¤ì • ê°€ëŠ¥&lt;/li>
&lt;li>AWSê°€ ê°€ìš© ì˜ì—­ë³„ API Server ,etcd ë°°í¬í•˜ì—¬ ê³ ê°€ìš©ì„± ë³´ì¥&lt;/li>
&lt;li>eksctlë¥¼ í™œìš©í•˜ì—¬ ì›Œì»¤ë…¸ë“œë¥¼ customí•  ìˆ˜ ìˆìŒ.&lt;/li>
&lt;/ul>
&lt;p>ğŸ“Œ ìì„¸í•œ ì‚¬í•­ì€ &lt;a class="link" href="https://nearhome.tistory.com/128" target="_blank" rel="noopener"
>Jaden Parkë‹˜ì˜ ë¸”ë¡œê·¸, Amazon EKS ë€?&lt;/a>ë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.&lt;/p>
&lt;h2 id="aws-side-workflow">AWS Side Workflow
&lt;/h2>&lt;p>&lt;img src="https://s0okju.github.io/p/what-is-eks/image2.png"
width="684"
height="235"
srcset="https://s0okju.github.io/p/what-is-eks/image2_hu14504090499705716568.png 480w, https://s0okju.github.io/p/what-is-eks/image2_hu8407817082554187440.png 1024w"
loading="lazy"
alt="ì¶œì²˜- https://nearhome.tistory.com/128"
class="gallery-image"
data-flex-grow="291"
data-flex-basis="698px"
>&lt;/p>
&lt;ul>
&lt;li>ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ api ì„œë²„ë¥¼ ê° ê°€ìš©ì˜ì—­ì— ë°°í¬&lt;/li>
&lt;li>api ë°ì´í„°, ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ìƒíƒœ ë°ì´í„°ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ etcdë¥¼ ê°™ì´ ë°°í¬&lt;/li>
&lt;li>ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì˜¤ëŠ” call ì— ëŒ€í•œ IAM êµ¬ì„±&lt;/li>
&lt;li>ì¿ ë²„ë„¤í‹°ìŠ¤ ë§ˆìŠ¤í„° ë…¸ë“œì˜ ì˜¤í† ìŠ¤ì¼€ì¼ë§ ì„¤ì •&lt;/li>
&lt;li>í´ëŸ¬ìŠ¤í„°ê°€ ì•ˆì •ì ìœ¼ë¡œ êµ¬í˜„í•˜ë„ë¡ ì—¬ê¸°ì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” ë¡œë“œë°¸ëŸ°ì„œë¥¼ êµ¬ì„±&lt;/li>
&lt;/ul>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://devocean.sk.com/blog/techBoardDetail.do?ID=163578" target="_blank" rel="noopener"
>ì´ˆë³´ìë¥¼ ìœ„í•œ EKS ë§› ë³´ê¸°&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://timewizhan.tistory.com/entry/AWS-ECS-vs-Kubernetes" target="_blank" rel="noopener"
>ECS vs Kubernetes&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/what-is-eks.html" target="_blank" rel="noopener"
>https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/what-is-eks.html&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>AWS - IAM ê·¸ë¦¬ê³  Profile</title><link>https://s0okju.github.io/p/iam-and-profile/</link><pubDate>Tue, 16 Apr 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/iam-and-profile/</guid><description>&lt;h2 id="introduction">Introduction
&lt;/h2>&lt;p>Terraform ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ìˆì—ˆë‹¤. ì–´ë””ì—ì„œëŠ” IAMì„ ì“°ê³ , ì–´ë””ì—ì„œëŠ” Profileì„ ì“´ë‹¤. ê³¼ì—° ê·¸ ë‘˜ì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¼ê¹Œ? ì•Œì•„ë³´ë„ë¡ í•˜ì!&lt;/p>
&lt;h2 id="profile">Profile
&lt;/h2>&lt;p>Amazon Ec2ëŠ” IAM roleì„ ê°€ì§„ profileì„ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.&lt;/p>
&lt;h3 id="ì§ˆë¬¸-1-awsclië¥¼-í†µí•´-profileì„-ì§€ì •í• -ìˆ˜-ìˆëŠ”ë°-ì´ê²ƒë„-instance-profileì¸ê°€">ì§ˆë¬¸ 1. awsclië¥¼ í†µí•´ profileì„ ì§€ì •í•  ìˆ˜ ìˆëŠ”ë°, ì´ê²ƒë„ Instance Profileì¸ê°€?
&lt;/h3>&lt;blockquote>
&lt;p>If you use the AWS CLI, API, or an AWS SDK to create a role, you create the role and instance profile as separate actions, with potentially different names. If you then use the AWS CLI, API, or an AWS SDK to launch an instance with an IAM role or to attach an IAM role to an instance, specify the instance profile name.
ì¶œì²˜ - &lt;a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html" target="_blank" rel="noopener"
>ê³µì‹ ë¬¸ì„œ&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>ì§ˆë¬¸ì´ ì˜ëª»ë˜ì—ˆë‹¤. EC2ëŠ” í•´ë‹¹ IAM Roleì„ ê°€ì§„ Profileì„ ì‚¬ìš©í•œë‹¤. ê·¸ë˜ì„œ awscliì˜ ê²½ìš° &amp;ndash;profileì„ í†µí•´ ì§ì ‘ profile ì´ë¦„ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.&lt;/li>
&lt;/ul>
&lt;h2 id="ì™œ-í•„ìš”í• ê¹Œ">ì™œ í•„ìš”í• ê¹Œ?
&lt;/h2>&lt;blockquote>
&lt;p>aws clië¥¼ ì‚¬ìš©í•  ë•Œ profile ê¸°ëŠ¥ì„ ì´ìš©í•˜ë©´ ì—¬ëŸ¬ê°œì˜ ìê²© ì¦ëª…ì„ ë“±ë¡í•˜ê³  ìŠ¤ìœ„ì¹­í•´ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì¶œì²˜ - &lt;a class="link" href="https://cloudest.oopy.io/posting/101" target="_blank" rel="noopener"
>https://cloudest.oopy.io/posting/101&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;h3 id="ì§ˆë¬¸-2-iam-roleê³¼ì˜-ì°¨ì´ì ì€">ì§ˆë¬¸ 2. IAM Roleê³¼ì˜ ì°¨ì´ì ì€?
&lt;/h3>&lt;p>Profileì´ í•„ìš”í•œ ì´ìœ ëŠ” ì—¬ëŸ¬ê°œì˜ ìê²© ì¦ëª…ì„ ë“±ë¡í•˜ê³  ìŠ¤ìœ„ì¹­í•´ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•¨ì´ë¼ê³  í–ˆë‹¤. íŠ¹ì§•ì„ ë´¤ì„ë•Œ IAMì˜ Roleê³¼ ë¹„ìŠ·í•´ ë³´ì˜€ë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>Roles are designed to be â€œassumedâ€ by other principals&lt;/strong> which do define â€œwho am I?â€, such as users, Amazon services, and EC2 instances
&lt;strong>An instance profile, on the other hand, defines â€œwho am I?â€&lt;/strong> Just like an IAM user represents a person, an instance profile represents EC2 instances. The only permissions an EC2 instance profile has is the power to assume a role.&lt;/p>
&lt;p>ì¶œì²˜ - &lt;a class="link" href="https://www.quora.com/In-AWS-what-is-the-difference-between-a-role-and-an-instance-profile" target="_blank" rel="noopener"
>https://www.quora.com/In-AWS-what-is-the-difference-between-a-role-and-an-instance-profile&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>IAM Roleì€ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•œ í–‰ìœ„ë¥¼ ì •ì˜í•˜ëŠ” ê²ƒì´ë¼ë©´ &lt;mark class="hltr-dark-green">Profile InstanceëŠ” &amp;ldquo;ëˆ„ê°€ ë§Œë“¤ì—ˆëŠ”ì§€ë¥¼ ì •ì˜í•˜ê¸°&amp;rdquo; ìœ„í•¨&lt;/mark>ì´ë¼ë©´ ë³´ë©´ ëœë‹¤.&lt;/p>
&lt;h2 id="conclusion">Conclusion
&lt;/h2>&lt;ul>
&lt;li>ë‚´ê°€ ì´ëŸ¬í•œ ê¶ê¸ˆì¦ì„ ê°€ì§€ê²Œ ëœ ê²ƒì€ IAMì„ í•œì‚¬ëŒì—ê²Œë§Œ ë¶€ì—¬ëœë‹¤ê³  ìƒê°í–ˆê¸° ë•Œë¬¸ì´ì—ˆë‹¤. ê·¸ëŸ° ë§¥ë½ì—ì„œëŠ” profileì´ í•„ìš” ì—†ê¸° ë•Œë¬¸ì´ë‹¤.&lt;/li>
&lt;/ul>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html" target="_blank" rel="noopener"
>https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html" target="_blank" rel="noopener"
>https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Gin ì˜ˆì™¸ì²˜ë¦¬ - 2. ì»¤ìŠ¤í…€ ì˜ˆì™¸ì²˜ë¦¬</title><link>https://s0okju.github.io/p/gin-error-handling-2/</link><pubDate>Wed, 10 Apr 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/gin-error-handling-2/</guid><description>&lt;p>ì´ì „ì—ëŠ” Ginì´ ì–´ë–»ê²Œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•˜ëŠ”ì§€ ì–¸ê¸‰í–ˆë‹¤. ì´ì œë¶€í„° ì§ì ‘ êµ¬í˜„í•˜ê³ ì í•œë‹¤.&lt;/p>
&lt;h2 id="error-wrapping">Error Wrapping
&lt;/h2>&lt;p>ì§ì ‘ ì œì‘í•œ ì—ëŸ¬ ì½”ë“œì¸ WebCodeì™€ ì—ëŸ¬ë¥¼ ê°ì‹¼ &lt;code>NetError&lt;/code>ë¥¼ ë§Œë“¤ì—ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">NetError&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Code&lt;/span> &lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WebCode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Err&lt;/span> &lt;span class="kt">error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>í”„ë¡œì íŠ¸ êµ¬í˜„í• ë•Œ ì£¼ë¡œ gin í˜¹ì€ ent ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì“´ë‹¤. ë³„ë„ì˜ Error êµ¬ì¡°ì²´(NetError)ë¥¼ ì •ì˜í•¨ìœ¼ë¡œì¨ &lt;code>Err&lt;/code>ì— gin í˜¹ì€ ent ì—ëŸ¬ë¥¼ ë‹´ê² ë‹¤ëŠ” ì˜ë¯¸ì¸ ê²ƒì´ë‹¤.&lt;/p>
&lt;h2 id="ginì—ì„œì˜-ì˜ˆì™¸-ì²˜ë¦¬">Ginì—ì„œì˜ ì˜ˆì™¸ ì²˜ë¦¬
&lt;/h2>&lt;p>&lt;a class="link" href="https://pkg.go.dev/github.com/gin-gonic/gin#Context.Error" target="_blank" rel="noopener"
>Gin Error() í•¨ìˆ˜&lt;/a>ì— ì˜í•˜ë©´ Ginì˜ Contextì— Errorë¥¼ ë‹´ì€ í›„ì— Middlewareì—ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ê³  ìˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>Error attaches an error to the current context. The error is pushed to a list of errors. &lt;strong>It&amp;rsquo;s a good idea to call Error for each error that occurred during the resolution of a request.&lt;/strong> A middleware can be used to collect all the errors and push them to a database together, print a log, or append it in the HTTP response. Error will panic if err is nil.&lt;/p>
&lt;/blockquote>
&lt;p>ë¼ì´ë¸ŒëŸ¬ë¦¬ ì½”ë“œë¥¼ ë³´ë©´ &lt;code>Errors&lt;/code> í•„ë“œê°€ ì •ì˜ë˜ì–´ ìˆëŠ”ë°, errorMsgëŠ” &lt;code>[]*Error&lt;/code> ì—ëŸ¬ ë¦¬ìŠ¤íŠ¸ë¡œ íƒ€ì…ì„ ê°€ì§€ê³  ìˆë‹¤. ìœ„ì˜ ì„¤ëª…ëŒ€ë¡œ errorì˜ ë¦¬ìŠ¤íŠ¸ê°€ Context ë‚´ë¶€ì— êµ¬í˜„ë˜ì–´ ìˆëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// gin/context.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">Context&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Errors&lt;/span> &lt;span class="nx">errorMsgs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ..
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// gin/errors.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">errorMsgs&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">Error&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì¦‰, ctx.Errorë¥¼ í™œìš©í•˜ì—¬ ì…ë ¥ë°›ì€ ì—ëŸ¬ë¥¼ Ginì˜ ì—ëŸ¬ë¡œ ê°ì‹¼ í›„ì— Contextì˜ Errors ë¦¬ìŠ¤íŠ¸ì— ë„£ê²Œ ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// gin/context.go
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Error attaches an error to the current context. The error is pushed to a list of errors.// It&amp;#39;s a good idea to call Error for each error that occurred during the resolution of a request.// A middleware can be used to collect all the errors and push them to a database together,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// print a log, or append it in the HTTP response.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Error will panic if err is nil.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;err is nil&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">parsedError&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ok&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">As&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">parsedError&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">ok&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">parsedError&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Error&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Err&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">ErrorTypePrivate&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Errors&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Errors&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">parsedError&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">parsedError&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Context ë‚´ë¶€ì— ìˆëŠ” Error ë¦¬ìŠ¤íŠ¸ëŠ” Middlewareì—ì„œ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤.&lt;/p>
&lt;p>Ginì—ì„œëŠ” &lt;a class="link" href="https://pkg.go.dev/github.com/gin-gonic/gin#HandlerFunc" target="_blank" rel="noopener"
>HandlerFunc&lt;/a>ë¥¼ sliceë¡œ êµ¬í˜„ëœ &lt;a class="link" href="https://pkg.go.dev/github.com/gin-gonic/gin#HandlersChain" target="_blank" rel="noopener"
>HandlerChain&lt;/a>ì´ ìˆëŠ”ë°, ì´ëŠ” Ginì´ ê°ê°€ì§€ì˜ Handlerë¥¼ Chainë‚´ì— ë„£ê³  ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">HandlersChain&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">HandlerFunc&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê·¸ëŸ¼ ì˜¤ë¥˜ë¥¼ ì–´ë–»ê²Œ ë°œìƒì‹œí‚¤ë©´ ë ê¹Œ? HandlerChain ë‚´ì— ìˆëŠ” ëŒ€ê¸° ì¤‘ì¸(Pending) Handlerë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šë„ë¡ í•˜ë©´ëœë‹¤. ì¦‰, Contextë¥¼ &lt;a class="link" href="https://pkg.go.dev/github.com/gin-gonic/gin#Context.Abort" target="_blank" rel="noopener"
>Abort&lt;/a>í•˜ë©´ ë˜ëŠ” ê²ƒì´ë‹¤. ê·¸ ì´í›„ì— ì²˜ë¦¬í•  Handlerê°€ ì—†ì–´ì§€ë©´ì„œ ì¢…ë£Œê°€ ëœë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>Abort prevents pending handlers from being called. Note that this will not stop the current handler. Let&amp;rsquo;s say you have an authorization middleware that validates that the current request is authorized. If the authorization fails (ex: the password does not match), &lt;strong>call Abort to ensure the remaining handlers for this request are not called.&lt;/strong>&lt;/p>
&lt;/blockquote>
&lt;h2 id="í”„ë¡œì íŠ¸ì—-ì ìš©í•˜ê¸°">í”„ë¡œì íŠ¸ì— ì ìš©í•˜ê¸°
&lt;/h2>&lt;h3 id="ì ˆì°¨">ì ˆì°¨
&lt;/h3>&lt;p>ìœ„ì˜ ë‚´ìš©ì„ ê°€ì§€ê³  ì‹¤ì œë¡œ ì ìš©í•´ë³´ì.
í”„ë¡œì íŠ¸ êµ¬ì„±ì€ 3ê³„ì¸µìœ¼ë¡œ ì»¤ìŠ¤í…€ ì—ëŸ¬ ê°ì‹¸ê¸°ëŠ” ì„œë¹„ìŠ¤ ë¡œì§ì— ìˆ˜í–‰í•˜ë„ë¡ í–ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>Service ê³„ì¸µì— Error Wrappingì„ í•œë‹¤.&lt;/li>
&lt;li>Controllerì— context ë‚´ì— ìˆëŠ” ì—ëŸ¬ ë¦¬ìŠ¤íŠ¸ì— ì˜ˆì™¸ë¥¼ ë„£ëŠ”ë‹¤.&lt;/li>
&lt;li>Middlewareì— Error Wrappingí•œ ê²ƒì„ Unwrapping í•˜ë©´ì„œ ì˜ˆì™¸ íƒ€ì…ì„ í•™ì¸í•œë‹¤.&lt;/li>
&lt;li>ì»¤ìŠ¤í…€ ì—ëŸ¬ë¼ë©´ WebCodeì— ë”°ë¥¸ ì‘ë‹µê°’ì„ ë°˜í™˜í•œë‹¤.&lt;/li>
&lt;/ol>
&lt;p>ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ìë©´ ì•„ë˜ì™€ ê°™ë‹¤.
&lt;img src="https://s0okju.github.io/p/gin-error-handling-2/image.png"
width="1365"
height="538"
srcset="https://s0okju.github.io/p/gin-error-handling-2/image_hu2187163634688892380.png 480w, https://s0okju.github.io/p/gin-error-handling-2/image_hu4391662667096093906.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="253"
data-flex-basis="608px"
>&lt;/p>
&lt;h3 id="ì½”ë“œ">ì½”ë“œ
&lt;/h3>&lt;p>ì½”ë“œëŠ” ì•„ë˜ì˜ ë‘ ì‚¬ì´íŠ¸ë¥¼ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://d2.naver.com/helloworld/2690202" target="_blank" rel="noopener"
>Naver D2, Golang, ê·¸ëŒ€ë“¤ì€ ì–´ë–»ê²Œ í•  ê²ƒì¸ê°€ - 3. error ë˜í•‘&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://d2.naver.com/helloworld/6507662" target="_blank" rel="noopener"
>Naver D2, Golang, ê·¸ëŒ€ë“¤ì€ ì–´ë–»ê²Œ í•  ê²ƒì¸ê°€ - 4. error í•¸ë“¤ë§&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="service-layer">Service Layer
&lt;/h4>&lt;p>Persistence Layerì—ì„œ ì–»ì€ ì—ëŸ¬ ê°’ì„ ì§ì ‘ ë°›ì€ í›„ì— Service ê³„ì¸µì—ì„œ ì ì ˆí•˜ê²Œ NetErrorë¡œ ê°ì‹¼ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// service
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">MemberService&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">CreateMember&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RegisterReq&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Member&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">errorutils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NetError&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Check member Exist
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">existedMem&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetMemberByEmail&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Email&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">errorutils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NetError&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Code&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">MemberInternalServerError&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Err&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">ent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">IsNotFound&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mem&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err2&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">errorutils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NetError&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Code&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">MemberCreationError&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Err&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">err2&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">mem&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">existedMem&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="controller-layer">Controller Layer
&lt;/h4>&lt;p>ControllerëŠ” Service ê³„ì¸µì—ì„œ ê°ì‹¼ ì»¤ìŠ¤í…€ ì—ëŸ¬ë¥¼ ë°›ì€ í›„ì— Contextì˜ ì—ëŸ¬ ë¦¬ìŠ¤íŠ¸ì— ë„£ëŠ”ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">controller&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">MemberController&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">RegisterMember&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">req&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RegisterReq&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ShouldBindJSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">errorutils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewNetError&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">MemberInvalidJson&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Create member
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">mem&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">controller&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">service&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateMember&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err2&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Service ê³„ì¸µì—ì„œ ë°›ì€ ì—ëŸ¬ë¥¼ Context ë‚´ ì—ëŸ¬ ë¦¬ìŠ¤íŠ¸ì— ë„£ëŠ”ë‹¤.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mid&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">MemberId&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">MemberId&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">mem&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ID&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SuccessWith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">MemberCreationSuccess&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">mid&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="middleware">Middleware
&lt;/h4>&lt;p>ì—ëŸ¬ ì‘ë‹µê°’ì„ ë°˜í™˜í•  HandlerFuncë¥¼ êµ¬í˜„í•œë‹¤.&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="https://pkg.go.dev/github.com/gin-gonic/gin#Context.Next" target="_blank" rel="noopener"
>Next&lt;/a>ë¥¼ í™œìš©í•˜ì—¬ ëŒ€ê¸° ì¤‘ì¸ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.&lt;/li>
&lt;li>&lt;a class="link" href="https://pkg.go.dev/errors#example-As" target="_blank" rel="noopener"
>errors.As&lt;/a>ë¥¼ í™œìš©í•˜ì—¬ Context ì—ëŸ¬ ë¦¬ìŠ¤íŠ¸ì— ìˆëŠ” ì—ëŸ¬ê°€ ì»¤ìŠ¤í…€ ì—ëŸ¬ì¸ì§€ í™•ì¸í•œë‹¤. ì •í™•íˆ ë§í•˜ìë©´ ì—ëŸ¬ë¥¼ unwrappingí•˜ë©´ì„œ ì»¤ìŠ¤í…€ ì—ëŸ¬ì¸ì§€ í™•ì¸í•œ í›„ì— ìˆë‹¤ë©´ &lt;code>netError&lt;/code>ì— ë„£ê²Œ ëœë‹¤.&lt;/li>
&lt;li>WebCodeë¥¼ í™œìš©í•˜ì—¬ ì‘ë‹µê°’ì„ ì–»ì€ í›„ &lt;a class="link" href="https://pkg.go.dev/github.com/gin-gonic/gin#Context.AbortWithStatusJSON" target="_blank" rel="noopener"
>AbortWithStatusJson&lt;/a> ë¥¼ í™œìš©í•˜ì—¬ Response jsonì„ ì „ì†¡í•œë‹¤.&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">ErrorHandler&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HandlerFunc&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Pending ì¤‘ì¸ í•¸ë“¤ëŸ¬ ì‹¤í–‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// JSONì´ ë‘ë²ˆ ì“°ì´ëŠ” ê²ƒì„ ëŒ€ë¹„í•´ì„œ Body í™•ì¸
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">isBodyWritten&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Written&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Last&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ì»¤ìŠ¤í…€ ì—ëŸ¬ì¸ì§€ í™•ì¸
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">var&lt;/span> &lt;span class="nx">netErr&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">errorutils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NetError&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">As&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">netErr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">code&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">netErr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetCode&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">statusCode&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GetStatus&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">code&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewErrorResponse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">code&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">isBodyWritten&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AbortWithStatusJSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">statusCode&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewErrorResponse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">codes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">GlobalInternalServerError&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">isBodyWritten&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AbortWithStatusJSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusInternalServerError&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ë§ˆë¬´ë¦¬">ë§ˆë¬´ë¦¬
&lt;/h2>&lt;p>Goì˜ ì˜ˆì™¸ ë§¤ì»¤ë‹ˆì¦˜ì€ ë‹¤ë¥¸ ì–¸ì–´ì™€ ë‹¬ë¼ì„œ í‹€ì„ ì¡ëŠ”ë° ë§ì€ ì‹œê°„ì„ ì‚¬ìš©í–ˆë‹¤. ê³µì‹ ë¬¸ì„œë‚˜ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ì˜ˆì œ ì½”ë“œë¥¼ ë¶„ì„í•˜ë©´ì„œ, Go ìŠ¤ëŸ¬ì›€ì´ ë¬´ì—‡ì¸ì§€ ìì¸° ë°°ì›Œê°„ë‹¤ëŠ” ëŠë‚Œì´ë‹¤. ê·¸ëŸ¬ë‚˜ ì½”ë“œì–‘ì´ ë§ì•„ì§€ë©´ì„œ ì˜¤íˆë ¤ ì½”ë“œê°€ ë³µì¡í•´ì§€ëŠ” ê²ƒ ê°™ê¸°ë„ í•˜ë‹¤.&lt;/p></description></item><item><title>Gin ì˜ˆì™¸ì²˜ë¦¬ - 1. Go Error</title><link>https://s0okju.github.io/p/gin-error-handling-1/</link><pubDate>Wed, 03 Apr 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/gin-error-handling-1/</guid><description>&lt;h2 id="goì™€-ì˜ˆì™¸ì²˜ë¦¬">Goì™€ ì˜ˆì™¸ì²˜ë¦¬
&lt;/h2>&lt;h3 id="goì—ì„œì˜-ì˜ˆì™¸ì²˜ë¦¬">Goì—ì„œì˜ ì˜ˆì™¸ì²˜ë¦¬
&lt;/h3>&lt;p>Goì—ì„œëŠ” í•¨ìˆ˜ì—ì„œ ë°˜í™˜ëœ &lt;a class="link" href="https://go.dev/blog/error-handling-and-go" target="_blank" rel="noopener"
>ì—ëŸ¬ ê°ì²´(error)&lt;/a>ë¡œ ì²˜ë¦¬í•œë‹¤. ë‹¤í–‰íˆë„ multi-returnì´ ê°€ëŠ¥í•˜ê¸°ì— ì—ëŸ¬ ë°˜í™˜ì„ ë”ìš± ìˆ˜ì›”í•˜ê²Œ í•´ì¤„ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">f&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">Sqrt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="try--catchê°€-ì—†ëŠ”-ì´ìœ ">try ~ catchê°€ ì—†ëŠ” ì´ìœ 
&lt;/h3>&lt;p>&lt;a class="link" href="https://go.dev/doc/faq#exceptions" target="_blank" rel="noopener"
>ê³µì‹ ë¬¸ì„œ&lt;/a>ì— ì˜í•˜ë©´ try ~ catchëŠ” ë‚œí•´í•œ ì½”ë“œë¥¼ ìƒì„±í•˜ë©°, ê°œë°œìì—ê²Œ ë„ˆë¬´ë§ì€ ì¼ë°˜ì ì¸ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ ì¥ë ¤í•œë‹¤ê³  í•œë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>We believe that coupling exceptions to a control structure, as in theÂ &lt;code>try-catch-finally&lt;/code>Â idiom, results in convoluted code. It also tends to encourage programmers to label too many ordinary errors, such as failing to open a file, as exceptional.&lt;/p>
&lt;/blockquote>
&lt;p>ë‹¤ë¥¸ ì–¸ì–´ì²˜ëŸ¼ try ~ catch ë¥¼ ì–´ë ´í’‹ì´ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. ì¤‘ê°„ì— ì‹¤í–‰ì˜ íë¦„ì„ ëŠëŠ” &lt;code>panic&lt;/code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ë°˜ëŒ€ë¡œ ìƒê°í•˜ìë©´ &lt;strong>ëª¨ë“  ì—ëŸ¬ë“¤ì„ panicìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í• ê¹Œ?&lt;/strong> Goì—ì„œëŠ” ê·¸ê²ƒì´ ì•„ë‹ˆë¼ëŠ” ê²ƒì´ë‹¤.
ì´ëŸ° ì´ìœ ë¡œ GoëŠ” ì‹œì˜ì ì ˆí•˜ê¸° ì˜ˆì™¸ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ errorë¥¼ ë°˜í™˜í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤.&lt;/p>
&lt;h3 id="error---wrapping">Error - Wrapping
&lt;/h3>&lt;p>Goì—ì„œëŠ” ì—ëŸ¬ì²˜ë¦¬í•  ë•Œ Error ê°ì²´ë¥¼ ë„˜ê²¨ì¤€ë‹¤ê³  í•œë‹¤. ë¬¼ë¡  ì¼ë°˜ ì—ëŸ¬ ê°ì²´ë¥¼ ë„˜ê²¨ì¤„ ìˆ˜ ìˆì§€ë§Œ ê°œë°œìê°€ ì§ì ‘ ë§Œë“  ì—ëŸ¬ë¥¼ ë§Œë“¤ì–´ì„œ ë„˜ê²¨ì¤„ ìˆ˜ ìˆë‹¤. Error Wrappingì´ë€ ì‰½ê²Œ ë§í•˜ìë©´ error ê°ì²´ë¥¼ ê°ì‹¸ëŠ” ë˜ë‹¤ë¥¸ êµ¬ì¡°ì²´ë¥¼ ë§Œë“œëŠ” ê²ƒì´ë¼ê³  ë³´ë©´ ëœë‹¤.&lt;/p>
&lt;p>ginì—ì„œì˜ Errorë¥¼ ë´ë³´ì. ginì˜ Error ë‚´ì— í•„ë“œë¡œ errorê°€ ì¡´ì¬í•œë‹¤. ì´ëŸ¬í•œ ê³¼ì •ì„ Error Wrappingì´ë¼ê³  ë³´ë©´ ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Error represents a error&amp;#39;s specification.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">Error&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Err&lt;/span> &lt;span class="kt">error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Type&lt;/span> &lt;span class="nx">ErrorType&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Meta&lt;/span> &lt;span class="nx">any&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê·¸ëŸ¼ ì˜ˆë¥¼ ë“¤ì–´ë³´ì. ctx.Errorë¥¼ ì‹¤í–‰í–ˆëŠ”ë° ì˜ë„ì¹˜ ì•Šê²Œ errors.Asê°€ ì ì ˆí•˜ê²Œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤ê³  ê°€ì •í•´ë³´ì. error.AsëŠ” Error Typeì„ í™•ì¸í•˜ëŠ” í•¨ìˆ˜ì¸ë°, ë§Œì•½ì— íƒ€ì…ì´ ì ì ˆí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ì…ë ¥í•œ errorì„ ê°ì‹¼ Errorë¥¼ ë°˜í™˜í•˜ê²Œ ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;err is nil&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">parsedError&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ok&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">As&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">parsedError&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">ok&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">parsedError&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Error&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Err&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">ErrorTypePrivate&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Errors&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Errors&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">parsedError&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">parsedError&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê·¸ëŸ¼ ì›ë³¸ ì—ëŸ¬(error)ì— ì ‘ê·¼í•  ìˆ˜ ìˆì„ê¹Œ? ë°”ë¡œ Unwrapë¥¼ í†µí•´ ì–»ì„ ìˆ˜ ìˆì€ ê²ƒì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Unwrap returns the wrapped error, to allow interoperability with errors.Is(), errors.As() and errors.Unwrap()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">msg&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Unwrap&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Err&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/gin-error-handling-1/img1.png"
width="551"
height="317"
srcset="https://s0okju.github.io/p/gin-error-handling-1/img1_hu7361807817120932448.png 480w, https://s0okju.github.io/p/gin-error-handling-1/img1_hu1676088839423243947.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="173"
data-flex-basis="417px"
>&lt;/p>
&lt;h2 id="ê¸°ì¡´ì˜-ë¬¸ì œì ">ê¸°ì¡´ì˜ ë¬¸ì œì 
&lt;/h2>&lt;h3 id="gin-contextì˜-ì˜ëª»ëœ-í™œìš©ë²•">Gin Contextì˜ ì˜ëª»ëœ í™œìš©ë²•
&lt;/h3>&lt;p>&lt;a class="link" href="https://pkg.go.dev/context#pkg-overview" target="_blank" rel="noopener"
>ê³µì‹ ë¬¸ì„œ&lt;/a>ì—ì„œ ë§í•˜ëŠ” ContextëŠ” ë°ë“œë¼ì¸, ì·¨ì†Œ ì‹œê·¸ë„, APIì— ëŒ€í•œ ê²½ê³„ê°’ì„ ê°€ì§€ëŠ” ê°’ìœ¼ë¡œ ì •ì˜ëœë‹¤. ê·¸ë˜ì„œ ì¡°ê±´ì— ë”°ë¼ ì‹¤í–‰ì´ ì¤‘ë‹¨ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒìœ¼ë¡œ ì´í•´í–ˆë‹¤.
ginì€ ìì²´ì ì¸ Contextë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, contextë¥¼ ì¤‘ë‹¨ì‹œí‚¬ ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ í•¨ìˆ˜ë“¤ì´ ì¡´ì¬í•œë‹¤.&lt;/p>
&lt;p>Service Layerì—ì„œ ì»¤ìŠ¤í…€ ì—ëŸ¬ íƒ€ì…ìœ¼ë¡œ ë°˜í™˜í•˜ë„ë¡ êµ¬í˜„í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">controller&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">MemberController&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">RegisterMember&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span> &lt;span class="nx">request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RegisterReq&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">req&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RegisterReq&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ShouldBindJSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Create member
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">err2&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">controller&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">service&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">CreateMember&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err2&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">errorutils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ErrorFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">webutils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Success&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì»¤ìŠ¤í…€ ì—ëŸ¬ íƒ€ì…ì„ ìì„¸íˆ ë³´ë©´, ìì²´ì ìœ¼ë¡œ ì œì‘í•œ ì—ëŸ¬ ì½”ë“œì™€ errorì„ ë‹´ì„ Err í•„ë“œê°€ ì¡´ì¬í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Error&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Code is a custom error codes
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">ErrorType&lt;/span> &lt;span class="nx">ErrorType&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Err is a error string
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Err&lt;/span> &lt;span class="kt">error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Description is a human-friendly message.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Description&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì˜¤ë¥˜ ë°œìƒì‹œ í˜„ì¬ ì‹¤í–‰ì„ ë©ˆì¶”ê³ , ì‘ë‹µê°’ì„ ë³´ë‚´ëŠ” ErrorFuncë„ ë§Œë“¤ì—ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">ErrorFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">getCode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ErrorType&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AbortWithStatusJSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Code&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a class="link" href="https://pkg.go.dev/github.com/gin-gonic/gin#Context.Abort" target="_blank" rel="noopener"
>ê³µì‹ ë¬¸ì„œ&lt;/a> ì— ì˜í•˜ë©´&lt;code>AbortWithStatusJSON&lt;/code>ì—ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ Contextë¥¼ ì¤‘ë‹¨ì‹œí‚¬ ìˆ˜ ìˆëŠ”&lt;code>Abort&lt;/code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤. êµ¬ì²´ì ìœ¼ë¡œ &lt;a class="link" href="https://pkg.go.dev/github.com/gin-gonic/gin#Context.Abort" target="_blank" rel="noopener"
>Abort í•¨ìˆ˜&lt;/a>ëŠ” í˜„ì¬ì˜ handlerëŠ” ê·¸ëŒ€ë¡œ ë‚¨ì§€ë§Œ, ê·¸ ì´í›„ì˜ handlerë¥¼ ì²˜ë¦¬í•˜ì§€ ì•Šê² ë‹¤ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>Abort prevents pending handlers from being called. Note that this will not stop the current handler. Let&amp;rsquo;s say you have an authorization middleware that validates that the current request is authorized. If the authorization fails (ex: the password does not match), call Abort to ensure the remaining handlers for this request are not called.&lt;/p>
&lt;/blockquote>
&lt;p>ë¬¸ì¥ì„ ë³´ë©´ì„œ ë‚´ê°€ Gin í”„ë ˆì„ì›Œí¬ì˜ ì—ëŸ¬ì²˜ë¦¬ë¥¼ ì™„ì „íˆ ì˜ëª»í–ˆìŒì„ ê¹¨ë‹«ê²Œ ë˜ì—ˆë‹¤.&lt;/p>
&lt;h3 id="gin-error-ë¯¸ì‚¬ìš©">Gin Error ë¯¸ì‚¬ìš©
&lt;/h3>&lt;p>&lt;a class="link" href="https://pkg.go.dev/github.com/gin-gonic/gin#Context.Error" target="_blank" rel="noopener"
>ê³µì‹ ë¬¸ì„œ&lt;/a>ì— ì˜í•˜ë©´ Ginì€ ìì‹ ë“¤ì˜ Errorë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ë©°, middlewareê°€ ì´ë¥¼ ì²˜ë¦¬í•˜ì—¬ ì˜¤ë¥˜ responseë¥¼ ì²˜ë¦¬í•˜ë¼ê³  ëª…ì‹œë˜ì–´ ìˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>Error attaches an error to the current context. The error is pushed to a list of errors. It&amp;rsquo;s a good idea to call Error for each error that occurred during the resolution of a request. A middleware can be used to collect all the errors and push them to a database together, print a log, or append it in the HTTP response. Error will panic if err is nil.&lt;/p>
&lt;/blockquote>
&lt;p>ì¦‰, ì˜¤ë¥˜ê°€ ë°œìƒí• ë•Œë§ˆë‹¤ ginì˜ Contextì—ì„œ ì œê³µí•´ì£¼ëŠ” Errorë¡œ ê°ì‹¸ë©°, Middlewareì— ìˆëŠ” Handlerê°€ ì´ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;h2 id="2ë¶€ì—ì„œëŠ”">2ë¶€ì—ì„œëŠ”
&lt;/h2>&lt;p>ì§€ê¸ˆê¹Œì§€ëŠ” ë‚´ê°€ ë§Œë“¤ì—ˆë˜ ì˜ˆì™¸ì²˜ë¦¬ì—ëŠ” ì–´ë– í•œ ë¬¸ì œì ì´ ìˆëŠ”ì§€ í™•ì¸í•´ë´¤ë‹¤. 2ë¶€ì—ì„œëŠ” ìœ„ì—ì„œ ì„¤ëª…í•œ ì˜ëª»ëœ ì—ëŸ¬ì²˜ë¦¬ë¥¼ ê³µì‹ë¬¸ì„œì—ì„œ ì œì‹œí•œ ì˜¬ë°”ë¥¸ ì—ëŸ¬ì²˜ë¦¬ë¥¼ êµ¬í˜„í•˜ê³ ì í•œë‹¤.&lt;/p>
&lt;ul>
&lt;li>Middlewareì— Handler êµ¬í˜„&lt;/li>
&lt;li>gin.Errorë¥¼ í™œìš©í•˜ì—¬ Errorë¥¼ wrappingí•˜ê³ , Middlewareì—ì„œ ì²˜ë¦¬í•˜ê¸°&lt;/li>
&lt;/ul></description></item><item><title>TodoPoint - ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ DBëŠ” ì–´ë–»ê²Œ êµ¬ì„±í•˜ì§€?</title><link>https://s0okju.github.io/p/todopoint-db-design/</link><pubDate>Wed, 13 Mar 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/todopoint-db-design/</guid><description>&lt;h1 id="ë„ì»¤ì™€-ë°ì´í„°ë² ì´ìŠ¤">ë„ì»¤ì™€ ë°ì´í„°ë² ì´ìŠ¤
&lt;/h1>&lt;p>í•œì°¸ ì»¨í…Œì´ë„ˆë¥¼ ê³µë¶€ë¥¼ í–ˆì„ ë‹¹ì‹œ ë„ì»¤ì˜ ì£¼ ëª©ì ì´ ë¹ ë¥¸ ë°°í¬/ê°œë°œ í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ì˜ì†ì„±ì„ ê°€ì§„ ë°ì´í„°ë² ì´ìŠ¤ì—ëŠ” ì í•©í•˜ì§€ ì•Šì•˜ë‹¤ê³  ì•Œê³  ìˆë‹¤.
ì´ì— ëŒ€í•œ ë¬¸ì œì ìœ¼ë¡œ DB ë°ì´í„° ì†ì‹¤ì„ ì–¸ê¸‰í•œë‹¤. ê·¸ëŸ°ë° ë„ì»¤ë¥¼ ìƒê°í•´ë³´ë©´ volume ê¸°ëŠ¥ì´ ì¡´ì¬í•œë‹¤. ì¦‰, ë°ì´í„°ë¥¼ ì˜ì†ì ìœ¼ë¡œ ë³´ê´€í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.
&lt;a class="link" href="https://hyeon9mak.github.io/why-does-not-run-database-on-docker/" target="_blank" rel="noopener"
>í˜„êµ¬ë§‰ ê¸°ìˆ  ë¸”ë¡œê·¸&lt;/a>ì—ì„œ ë³´ë©´ ì´ë¡ ì ìœ¼ë¡œëŠ” ë„ì»¤ë¥¼ ì‚¬ìš©í•´ë„ ë˜ì—ˆìœ¼ë‚˜, ì„œë¹„ìŠ¤ ìš´ì˜ ì¸¡ë©´ì—ì„œëŠ” ë„ì»¤ë¼ëŠ” ê¸°ìˆ ì´ ë¶ˆì•ˆì •í•´ ì“°ì´ì§€ ì•ŠëŠ”ë‹¤ê³  ì–¸ê¸‰ë˜ì–´ ìˆë‹¤.&lt;/p>
&lt;h1 id="ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œëŠ”ìš”">ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œëŠ”ìš”?
&lt;/h1>&lt;p>ê·¸ëŸ°ë° ì €ê±´ ë„ì»¤ì— í•œì •ëœ ì´ì•¼ê¸°ì¸ ê²ƒ ê°™ë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ íŠ¹ì§•ì„ ì˜ ì‚´í´ë³´ë©´ ìƒíƒœë¥¼ ì‚¬ì „ì— ì •ì˜í•˜ê³ , ì •ì˜ëœ ìƒíƒœë¡œ ìš´ì˜ëœë‹¤. ìš´ì˜ ì¸¡ë©´ì—ì„œ í¸ë¦¬í•´ ë³´ì´ê³ , ì•ˆì „ì„±ì´ ë¬¸ì œë¼ê³  í•œë‹¤ë©´ ë‹¤ì¤‘í™”ë¥¼ í•˜ë©´ ëœë‹¤.
&lt;a class="link" href="https://jerryljh.medium.com/%EC%8B%A4%EC%82%AC%EB%A1%80%EB%A1%9C-%EB%B3%B8-db-on-kubernetes-%ED%9A%A8%EA%B3%BC-eaed8e4e5811" target="_blank" rel="noopener"
>ì´ì •í›ˆë‹˜ì˜ medium - ì‹¤ì œë¡œ ë³¸ DB on Kubernetes íš¨ê³¼&lt;/a>ì—ì„œ ì–¸ê¸‰í–ˆë‹¤ì‹¶ì´ ì¼ë¶€ ì„±ëŠ¥ í–¥ìƒë„ ë³´ì´ê¸°ë„ í–ˆë‹¤ê³  í•œë‹¤.&lt;/p>
&lt;h1 id="todopointì—ì„œëŠ”-ì–´ë–»ê²Œ-êµ¬ì„±í•˜ì§€">TodoPointì—ì„œëŠ” ì–´ë–»ê²Œ êµ¬ì„±í•˜ì§€?
&lt;/h1>&lt;p>StatefulSetì„ ì‚¬ìš©í•˜ìê°€ ê²°ë¡ ì´ë‹¤. StatefulSetì€ ìƒíƒœ ì •ë³´ë¥¼ êµ¬ì„±í• ë•Œ ì£¼ë¡œ ì‚¬ìš©ëœë‹¤.
ì•„ë˜ì˜ ë¸”ë¡œê·¸ì²˜ëŸ¼ CronJobì„ í™œìš©í•´ì„œ ë°±ì—…ì„ êµ¬ì„±í•˜ë„ë¡ ì„¤ê³„í•´ì•¼ ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.
&lt;img src="https://s0okju.github.io/p/todopoint-db-design/img1.png"
width="916"
height="884"
srcset="https://s0okju.github.io/p/todopoint-db-design/img1_hu5143896541017209607.png 480w, https://s0okju.github.io/p/todopoint-db-design/img1_hu7296588791112915779.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://nangman14.tistory.com/79"
class="gallery-image"
data-flex-grow="103"
data-flex-basis="248px"
>&lt;/p>
&lt;h1 id="reference">Reference
&lt;/h1>&lt;ul>
&lt;li>&lt;a class="link" href="https://nangman14.tistory.com/79" target="_blank" rel="noopener"
>https://nangman14.tistory.com/79&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Go-DBì— ë§ˆê·¸ì´ì…˜í•˜ê¸°</title><link>https://s0okju.github.io/p/go-db-migration/</link><pubDate>Sat, 09 Mar 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/go-db-migration/</guid><description>&lt;p>Java ì§„ì˜ì—ì„œ ìì£¼ ì‚¬ìš©ë˜ëŠ” ORMì€ JPAì´ë‹¤. í•˜ì§€ë§Œ Goì—ì„œëŠ” ëŒ€í‘œì ì¸ ORMì€ ì—†ëŠ”ë“¯í•˜ë‹¤. ê·¸ëŸ°íƒ“ì— ì´ëŸ°ì €ëŸ° ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë§ì€ë°, ìƒí™©ì— ë§ê²Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì“°ì„¸ìš” ì‹ì˜ GoìŠ¤ëŸ¬ì›€ì„ ë§ì´ ë³¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;h1 id="ì–´ë–¤-ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼-ì‚¬ìš©í• -ê²ƒì¸ê°€">ì–´ë–¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•  ê²ƒì¸ê°€?
&lt;/h1>&lt;h2 id="gorm">gorm
&lt;/h2>&lt;p>ê³¼ê±°ì—ëŠ” gormì´ ë§ì´ ì“°ì¸ë‹¤ê³  í•˜ë˜ë°, ì—¬ëŸ¬ ë¬¸ì œì ì´ ì¡´ì¬í•œë‹¤ê³  í•œë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>ê°œì¸ì ìœ¼ë¡œ ìµœì•…ì˜ ê¸°ëŠ¥ì€ ì„¤ì •ë“¤ì„ struct tagë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ë¼ê³  ìƒê°í•œë‹¤.&lt;/p>
&lt;h2 id="ent">ent
&lt;/h2>&lt;p>ìš”ì¦˜ ëœ¨ê³  ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” FaceBookì—ì„œ ìì²´ì ìœ¼ë¡œ ê°œë°œí•œ &lt;a class="link" href="https://entgo.io/docs/getting-started/" target="_blank" rel="noopener"
>ent&lt;/a>ì´ë‹¤. GO ì½”ë“œë¡œ ìŠ¤í‚¤ë§ˆë¥¼ ì‘ì„±í•˜ë©´ DBì— ëª¨ë¸ë§ì„ í•´ì£¼ë©°, íŠ¹íˆ Graph íƒìƒ‰ì— íŠ¹í™”ë˜ì–´ ìˆë‹¤.&lt;/p>
&lt;h2 id="ë‚˜ì˜-ì„ íƒì€">ë‚˜ì˜ ì„ íƒì€
&lt;/h2>&lt;p>ë‚˜ì˜ ì„ íƒì€ entì´ë‹¤. ì¼ë‹¨ ëŒ€ê¸°ì—…ì´ ê°œë°œí–ˆë‹¤ëŠ” ì ì—ì„œ 1ì°¨ì ìœ¼ë¡œ ì‹ ë¢°ê°€ ê°„ë‹¤. &lt;a class="link" href="https://github.com/volatiletech/sqlboiler" target="_blank" rel="noopener"
>sqlboiler&lt;/a>ê°€ í™”ë ¤í•œ ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼ë¥¼ ë³´ì—¬ì¤˜ì„œ ê¶ê¸ˆí•˜ê¸´ í•˜ì§€ë§Œ ë¬¸ì„œí™”ê°€ ì˜ëœ entë¥¼ ìš°ì„ ì ìœ¼ë¡œ í•´ë³´ê³ ì í•œë‹¤.&lt;/p>
&lt;h3 id="orm-ê¼­-í•„ìš”í•œ-ê²ƒì¸ê°€">ORM ê¼­ í•„ìš”í•œ ê²ƒì¸ê°€?
&lt;/h3>&lt;p>ì›¹ê°œë°œ ìì²´ë¥¼ ì–•ê²Œ í•´ì˜¤ë©´ì„œ ORMì— ìµìˆ™í•´ì¡Œë‹¤. ê·¸ëŸ¬ë©´ì„œ ORMì€ ì„ íƒì´ ì•„ë‹Œ í•„ìˆ˜ë¼ê³  ì—¬ê¸°ë©´ì„œ ì‚¬ìš©í–ˆë˜ ê²ƒ ê°™ë‹¤. í•˜ì§€ë§Œ ORM ì¶”ì²œê¸€ì„ ì½ìœ¼ë©´ì„œ ê¼­ í•„ìš”í•œê°€ì— ëŒ€í•´ ìƒê°í•˜ê²Œ ëœ ê³„ê¸°ê°€ ë˜ì—ˆë˜ ê²ƒ ê°™ë‹¤.&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>
ê°œë°œì ì…ì¥ì—ì„œëŠ” CRUDë¥¼ ì¶”ìƒí™”ëœ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©° êµ¬í˜„ì´ ìš©ì´í•˜ê³ , ê°€ë…ì„±ì´ ìˆëŠ” ì½”ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ORMì— ëŒ€í•œ ë¶€ì •ì ì¸ ì…ì¥ì˜ ëŒ€ë¶€ë¶„ì˜ ê³¼ë‹¤í•˜ê²Œ ì‚¬ìš©í–ˆì„ ë•Œë¥¼ ê°€ì •í•œë‹¤.
ê°œì¸ì ìœ¼ë¡œëŠ” ì–´ë– í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“  ê³¼ë‹¤í•˜ê²Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì˜¤ë²„í—¤ë“œê°€ ë”°ë¥¸ë‹¤ê³  ìƒê°í•œë‹¤. ë˜í•œ DB ì„¤ê³„ ìì²´ê°€ ì˜ëª»ë˜ì–´ì„œ ì¼ ìˆ˜ ìˆë‹¤.
ë‚˜ì™€ ê°™ì€ ì†Œê·œëª¨ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¼ë©´ ê¸°ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ìˆëŠ” ëª¨ë“  ê¸°ëŠ¥ì„ ì“¸ ì¼ì´ ì—†ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ORMì„ ì“°ë ¤ê³  í•œë‹¤. ê·¸ë¦¬ê³  ê°œë°œìê°€ ì“°ê¸° í¸í•´ì•¼ ìœ ì§€ë³´ìˆ˜í•˜ê¸° í¸í•  ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë” ë§ì´ ë“ ë‹¤.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/" target="_blank" rel="noopener"
>https://umi0410.github.io/blog/golang/how-to-backend-in-go-db/&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://www.reddit.com/r/golang/comments/t3bp79/a_good_orm_for_golang/" target="_blank" rel="noopener"
>https://www.reddit.com/r/golang/comments/t3bp79/a_good_orm_for_golang/&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Spring - Spring Boot ê°„ëµí•˜ê²Œ ì•Œì•„ë³´ê¸°</title><link>https://s0okju.github.io/p/basic-spring-1/</link><pubDate>Sat, 03 Feb 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/basic-spring-1/</guid><description>&lt;h2 id="ìŠ¤í”„ë§-ë¶€íŠ¸">ìŠ¤í”„ë§ ë¶€íŠ¸
&lt;/h2>&lt;p>ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ íŠ¹ì§•ì€ ì•„ë˜ì˜ ë¬¸ì¥ìœ¼ë¡œ ì •ë¦¬ ê°€ëŠ¥í•˜ë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ëŠ” IoC/DIë¥¼ í†µí•´ ê°ì²´ ê°„ì˜ ì˜ì¡´ ê´€ê³„ë¥¼ ì„¤ì •í•˜ê³ , AOPë¥¼ í†µí•´ í•µì‹¬ ê´€ì ê³¼ ë¶€ê°€ ê´€ì ì„ ë¶„ë¦¬í•´ ê°œë°œí•˜ë©°, PSAë¥¼ í†µí•´ ì¶”ìƒí™”ëœ ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ë“¤ì„ ì¼ê´€ëœ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤.&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>IoC : ê°ì²´ì˜ ìƒì„±ê³¼ ê´€ë¦¬ë¥¼ ê°œë°œìê°€ í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í”„ë ˆì„ì›Œí¬ê°€ ëŒ€ì‹ í•˜ëŠ” ê²ƒ&lt;/li>
&lt;li>DI : ì™¸ë¶€ì—ì„œ ê°ì²´ë¥¼ ì£¼ì…ë°›ì•„ ì‚¬ìš©í•˜ëŠ” ê²ƒ&lt;/li>
&lt;li>AOP : í”„ë¡œê·¸ë˜ë°ì„ í•  ë•Œ í•µì‹¬ ê´€ì ê³¼ ë¶€ê°€ ê´€ì ì„ ë‚˜ëˆ„ì–´ì„œ ê°œë°œí•˜ëŠ” ê²ƒ&lt;/li>
&lt;li>PSA : ì–´ëŠ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ë˜ ì¼ê´€ëœ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒ&lt;/li>
&lt;/ul>
&lt;p>IoC/DIë¥¼ í†µí•´ ê°ì²´ ê°„ì˜ ì˜ì¡´ ê´€ê³„ë¥¼ ì„¤ì •í•˜ê³ , AOPë¥¼ í†µí•´ í•µì‹¬ ê´€ì (service)ê³¼ ë¶€ê°€ ê´€ì (Repository)ë¥¼ ë¶„ë¦¬í•´ ê°œë°œí•˜ë©°, PSA(JpaRepository)ë¥¼ í†µí•´ ì¶”ìƒí™”ëœ ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ë“¤ì„ ì¼ê´€ëœ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">interface&lt;/span> &lt;span class="nc">UserService&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">createUser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">UserRegisterCommand&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">User&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">getUserById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Long&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">userId&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">UserLoginResponse&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">loginUserByEmail&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Boolean&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">logoutById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">userId&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">UserServiceImp&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">implements&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">UserService&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Autowired&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// IoC/DI&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">UserRepository&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">userRepository&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Autowired&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">UserMapper&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">userMapper&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Override&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">createUser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">UserRegisterCommand&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">try&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">userRepository&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">UserEntity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getEmail&lt;/span>&lt;span class="p">(),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getPassword&lt;/span>&lt;span class="p">(),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getUsername&lt;/span>&lt;span class="p">()));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DataAccessException&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">throw&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">DefaultException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ResponseMessage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">DATA_ACCESS_ERROR&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Exception&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">throw&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">DefaultException&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ResponseMessage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">DB_UNEXPECTED_ERROR&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;user&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// UserRepository&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// Crudì—ì„œ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ê°€ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ë‹¤.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// PSA&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">interface&lt;/span> &lt;span class="nc">UserRepository&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">extends&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">JpaRepository&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">UserEntity&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Long&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">UserCustomRepository&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ì˜ì¡´ì„±-ì£¼ì…">ì˜ì¡´ì„± ì£¼ì…
&lt;/h3>&lt;p>ì˜ì¡´ì„± ì£¼ì…ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìƒì„±í•œ ê°ì²´(ë¹ˆ)ì„ ì£¼ì…ë°›ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì´ë•Œ ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê°ì²´ë¥¼ ì˜ë¯¸í•œë‹¤.&lt;/p>
&lt;p>ì£¼ì…ì„ ë°›ì„ë•ŒëŠ” @Autowiredë¥¼ ì‚¬ìš©í•˜ê³ , ë¹ˆì„ ë“±ë¡í•˜ê³  ì‹¶ìœ¼ë©´ @Componentë¥¼ ì„ ì–¸í•˜ë©´ ëœë‹¤. í”„ë ˆì„ì›Œí¬ì— ì‚¬ìš©ë˜ëŠ” ëŒ€ë¶€ë¶„ì˜ í•µì‹¬ ì–´ë…¸í…Œì´ì…˜ì€(@Repository, @Service ë“±) @Componentê°€ í¬í•¨ë˜ì–´ ìˆë‹¤.&lt;/p>
&lt;p>ì˜ì¡´ì„± ì£¼ì…ì— ëŒ€í•´ì„œëŠ” &lt;a class="link" href="https://velog.io/@ung6860/Spring%EC%8A%A4%ED%94%84%EB%A7%81-%EA%B8%B0%EC%B4%88-DIDependency-Injection" target="_blank" rel="noopener"
>inung_92ë‹˜ì˜ velog, [Spring]ìŠ¤í”„ë§ ê¸°ì´ˆ - DI&lt;/a>ì„ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.&lt;/p>
&lt;h2 id="ìŠ¤í”„ë§-ì›¹-ê³„ì¸µ">ìŠ¤í”„ë§ ì›¹ ê³„ì¸µ
&lt;/h2>&lt;p>&lt;img src="https://s0okju.github.io/p/basic-spring-1/spring_layered_arch.png"
width="1280"
height="854"
srcset="https://s0okju.github.io/p/basic-spring-1/spring_layered_arch_hu9429696108598489652.png 480w, https://s0okju.github.io/p/basic-spring-1/spring_layered_arch_hu321650804355008881.png 1024w"
loading="lazy"
alt="ì¶œì²˜-https://devlog-wjdrbs96.tistory.com/209"
class="gallery-image"
data-flex-grow="149"
data-flex-basis="359px"
>&lt;/p>
&lt;ul>
&lt;li>presentation ê³„ì¸µ
&lt;ul>
&lt;li>HTTP ìš”ì²­ ë° ì‘ë‹µ ì²˜ë¦¬&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì¸µ
&lt;ul>
&lt;li>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>í¼ì‹œìŠ¤í„´íŠ¸ ê³„ì¸µ
&lt;ul>
&lt;li>ìŠ¤í† ë¦¬ì§€ ê´€ë ¨ ë¡œì§ ì¶”ê°€&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ìœ„ì™€ ê°™ì€ êµ¬ì¡°ëŠ” Layered Architectureë¼ê³  í•œë‹¤. ì´ë•Œ ë ˆì´ì–´ ê°„ ì‘ì§‘ì„±ì„ ë†’ì´ê³  ì˜ì¡´ë„ë¥¼ ë‚®ì¶”ê¸° ìœ„í•´ì„œëŠ” ê³„ì¸µ ê°„ í˜¸ì¶œ ì‹œ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ í˜¸ì¶œí•´ì•¼ í•œë‹¤. ì¦‰, ìƒìœ„ ê³„ì¸µì€ ì§ì ‘ì ìœ¼ë¡œ í•˜ìœ„ ê³„ì¸µì„ í˜¸ì¶œí•˜ì§€ ì•Šê³  ì¶”ìƒì ì¸ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•œë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>Q. ì‘ì§‘ë„ë€?&lt;/p>
&lt;p>ì‘ì§‘ë„ë€ í•œ ëª¨ë“ˆ ë‚´ë¶€ì˜ ì²˜ë¦¬ ìš”ì†Œë“¤ì´ ì„œë¡œ ê´€ë ¨ë˜ì–´ ìˆëŠ” ì •ë„ë¥¼ ë§í•œë‹¤. ì¦‰, ëª¨ë“ˆì´ ë…ë¦½ì ì¸ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ì§€ ë˜ëŠ” í•˜ë‚˜ì˜ ê¸°ëŠ¥ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì±…ì„ì´ ì˜ ë­‰ì³ìˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ë©° ëª¨ë“ˆì´ ë†’ì€ ì‘ì§‘ë„ë¥¼ ê°€ì§ˆìˆ˜ë¡ ì¢‹ë‹¤.&lt;/p>
&lt;p>ì¶œì²˜ - &lt;a class="link" href="https://madplay.github.io/post/coupling-and-cohesion-in-software-engineering" target="_blank" rel="noopener"
>https://madplay.github.io/post/coupling-and-cohesion-in-software-engineering&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Q. ì˜ì¡´ì„±ì„ ì™œ ë‚®ì¶°ì•¼ í•˜ëŠ” ê±¸ê¹Œ?&lt;/p>
&lt;p>A. ì˜ì¡´ì„±ì´ë€ ë‹¤ë¥¸ ê°ì²´ì˜ ì˜í–¥ì„ ë°›ê³ , ë‹¤ë¥¸ ê°ì²´ì— ë”°ë¼ ê²°ê³¼ê°€ ì¢Œìš°ë˜ëŠ” ê²ƒì´ë‹¤. ì˜ì¡´ì„±ì„ ë‚®ì¶° ê°ì²´ë“¤ ê°„ ì „íŒŒë˜ëŠ” ë³€ê²½ì— ëŒ€í•œ ì˜í–¥ì„ ìµœì†Œí™” ì‹œì¼œ, ìœ ì§€ë³´ìˆ˜ ì‹œ ì›í™œí•˜ê²Œ í•˜ê¸° ìœ„í•´ì„œì´ë‹¤.&lt;/p>
&lt;p>ì¶œì²˜ - &lt;a class="link" href="https://velog.io/@ung6860/Spring%EC%8A%A4%ED%94%84%EB%A7%81-%EA%B8%B0%EC%B4%88-DIDependency-Injection" target="_blank" rel="noopener"
>&lt;/a>&lt;a class="link" href="https://velog.io/@ung6860/Spring%EC%8A%A4%ED%94%84%EB%A7%81-%EA%B8%B0%EC%B4%88-DIDependency-Injection" target="_blank" rel="noopener"
>https://velog.io/@ung6860/SpringìŠ¤í”„ë§-ê¸°ì´ˆ-DIDependency-Injection&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Q. ì˜ì¡´ì„±ì„ ë‚®ì¶”ëŠ” ë°©ë²•?&lt;/p>
&lt;p>A. ê¸°ë³¸ì ìœ¼ë¡œ ì˜ì¡´ì„±ì„ í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ new ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì™¸ë¶€ë¡œë¶€í„° ê°ì²´ì˜ ì˜ì¡´ì„±ì„ ì£¼ì…ë°›ì•„ì•¼í•œë‹¤. ì™¸ë¶€ë¡œë¶€í„° ì˜ì¡´ì„±ì„ ì£¼ì…ë°›ëŠ” ê²ƒì˜ ì˜ë¯¸ëŠ” &amp;lsquo;ì˜ì¡´ì„± ì£¼ì…&amp;rsquo;ì— ì´ˆì ì„ ë§ì¶”ëŠ”ê²Œ ì•„ë‹ˆë¼ &amp;lsquo;ì˜ì¡´ì„± íƒˆí”¼ë¥¼ ìœ„í•˜ì—¬ ì™¸ë¶€ë¡œë¶€í„° ì£¼ì…&amp;rsquo;ì´ë¼ëŠ” ë¶€ê°€ì ì¸ ì„¤ëª…ì— ì´ˆì ì„ ë§ì¶”ì–´ì•¼í•œë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h3 id="presentation">Presentation
&lt;/h3>&lt;p>ì›¹ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ ë° ì‘ë‹µ ì²˜ë¦¬í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@RestController&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@RequestMapping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/membership/&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">RegisterMembershipController&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@Autowired&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">private&lt;/span> &lt;span class="n">MembershipService&lt;/span> &lt;span class="n">membershipService&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nd">@PostMapping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;register&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">public&lt;/span> &lt;span class="n">Membership&lt;/span> &lt;span class="n">createmembership&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nd">@RequestBody&lt;/span> &lt;span class="n">MembershipRequest&lt;/span> &lt;span class="n">request&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">MembershipCommand&lt;/span> &lt;span class="n">command&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">MembershipCommand&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;hello&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">membershipService&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">createMembership&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ë³´í†µì€ @Controllerë¥¼ í†µí•´ controllerë¥¼ ì§€ì •í•´ì¤„ ìˆ˜ ìˆë‹¤. rest apië¥¼ êµ¬í˜„í–ˆëŠ”ë°, ì´ì— ì í•©í•œ @RestControllerê°€ ìˆë‹¤. &lt;code>@RestController&lt;/code>ëŠ” @Controller + @ResponseBodyë¼ê³  ë³´ë©´ ëœë‹¤. ìì„¸í•œ ì‚¬í•­ì€ &lt;a class="link" href="https://mangkyu.tistory.com/49" target="_blank" rel="noopener"
>ë§ë‚˜ë‹ˆ ê°œë°œìë‹˜ì˜ ë¸”ë¡œê·¸&lt;/a>ë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.&lt;/p>
&lt;h3 id="service">Service
&lt;/h3>&lt;p>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ê³„ì¸µì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">interface&lt;/span> &lt;span class="nc">MembershipService&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Membership&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">createMembership&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MembershipCommand&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">MembershipServiceImp&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">implements&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">MembershipService&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Autowired&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">MembershipRepository&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">membershipRepository&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Override&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Membership&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">createMembership&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MembershipCommand&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">membershipRepository&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ì—°ì‚°ìœ¼ë¡œ êµ¬ì„±ëœ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•˜ê³  ê·¸ì— ëŒ€í•œ êµ¬í˜„ì„ ë”°ë¡œ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ê·¸ë˜ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ê²Œ ë˜ëŠ”ë°, ë‚˜ì¤‘ì—ì„œ ì„œë¹„ìŠ¤ êµ¬í˜„ì´ ë³€ê²½ë˜ë”ë¼ë„ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´ë¼ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë³€ê²½í•  í•„ìš”ê°€ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;h3 id="repository">Repository
&lt;/h3>&lt;p>ì €ì¥ì†Œì— ì ‘ê·¼í•˜ëŠ” ì˜ì—­ìœ¼ë¡œ DAO(Data Access Object) ì˜ì—­ì´ë¼ê³  ë¶€ë¥¸ë‹¤. @Repositoryë¥¼ ì‚¬ìš©í•˜ì—¬ Spring repositoryë¥¼ ì§€ì •í•´ì¤€ë‹¤. ì£¼ëª©í•  ì ì€ ì¸í„°í˜ì´ìŠ¤ ë‚´ìš©ì´ ë¹„ì–´ ìˆë”ë¼ë„ ìŠ¤í”„ë§ ë°ì´í„°ê°€ JPA ëŸ°íƒ€ì„ì— ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@Repository&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">interface&lt;/span> &lt;span class="nc">MembershipRepository&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">extends&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CrudRepository&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Membership&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Long&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="dto">DTO
&lt;/h3>&lt;p>ê³„ì¸µ ê°„ì— ë°ì´í„° êµí™˜ì„ ìœ„í•œ ê°ì²´ë¥¼ ì˜ë¯¸í•œë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/basic-spring-1/dto.png"
width="1280"
height="299"
srcset="https://s0okju.github.io/p/basic-spring-1/dto_hu7031278554960056191.png 480w, https://s0okju.github.io/p/basic-spring-1/dto_hu4485137895459497654.png 1024w"
loading="lazy"
alt="ì¶œì²˜-https://loosie.tistory.com/296"
class="gallery-image"
data-flex-grow="428"
data-flex-basis="1027px"
>&lt;/p>
&lt;p>ì²˜ìŒ ê³µë¶€ í–ˆì„ ë•Œ â€œDto ë‹¤ ë˜‘ê°™ì€ ê°ì²´ê² êµ°â€¦ ì˜¤ë¥˜ ë°œìƒí•˜ë©´ ë‚œë¦¬ë‚˜ê² ë„¤â€ë¼ê³  ìƒê°í–ˆë‹¤. &lt;strong>ê° ê³„ì¸µë§ˆë‹¤ Dtoê°€ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤.&lt;/strong>
ì•„ë˜ì˜ ì˜ˆì‹œë¥¼ ë³´ë©´ Controller â†’ Serviceì—ì„œëŠ” Dtoê°€ Membership ê°ì²´ë¥¼ ì‚¬ìš©í–ˆë‹¤. í•˜ì§€ë§Œ Membership ë„ë©”ì¸ê³¼ ì‹¤ì œ ì—”í‹°í‹°ì™€ ë‹¤ë¥¼ ê²½ìš°ë¼ë©´ ì–´ë–¨ê¹Œ? Service â†’ Repositoryì—ì„œëŠ” Dtoê°€ MembershipEntityê°€ ë˜ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Controller&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">membershipService&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">createMembership&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">member&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// MembershipService&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">interface&lt;/span> &lt;span class="nc">MembershipService&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Membership&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">createMembership&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Membership&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">member&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@Component&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">MembershipMapper&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">MembershipEntity&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">MapToEntity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Membership&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">member&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">MembershipEntity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// ... ìƒëµ&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">MembershipServiceImp&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">implements&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">MembershipService&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Autowired&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">MembershipRepository&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">MembershipRepository&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Override&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Membership&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">createMembership&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Membership&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">membership&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">MembershipRepository&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MembershipMapper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">MapToEntity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">membership&lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="í…ŒìŠ¤íŠ¸">í…ŒìŠ¤íŠ¸
&lt;/h2>&lt;p>ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ì‹œ í…ŒìŠ¤íŠ¸ ë‹¨ê³„ëŠ” í•„ìˆ˜ë‹¤. ì´ ë‹¨ê³„ì—ì„œëŠ” ì‘ì„±í•œ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê²€ì¦í•œë‹¤. í…ŒìŠ¤íŠ¸ëŠ” í¬ê²Œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì™€ í†µí•© í…ŒìŠ¤íŠ¸ê°€ ì¡´ì¬í•œë°, ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì§‘ì¤‘ì ìœ¼ë¡œ ì„¤ëª…í•˜ê³ ì í•œë‹¤.&lt;/p>
&lt;p>ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë€ í•˜ë‚˜ì˜ ëª¨ë“ˆì„ ê¸°ì¤€ìœ¼ë¡œ ë…ë¦½ì ìœ¼ë¡œ ì§„í–‰ë˜ëŠ” ê°€ì¥ ì‘ì€ ë‹¨ìœ„ì˜ í…ŒìŠ¤íŠ¸ì´ë‹¤. íŠ¹ì • ë¶€ë¶„ë§Œ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ê¸° ë•Œë¬¸ì— ë¹ ë¥´ê²Œ ë¬¸ì œ ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆê²Œ ëœë‹¤.&lt;/p>
&lt;p>ìì„¸í•œ ì‚¬í•­ì€ &lt;a class="link" href="https://mangkyu.tistory.com/143" target="_blank" rel="noopener"
>ë§ë‚˜ë‹ˆ ê°œë°œìë‹˜ì˜ ë¸”ë¡œê·¸&lt;/a>ë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.&lt;/p>
&lt;h2 id="ë°ì´í„°ë² ì´ìŠ¤">ë°ì´í„°ë² ì´ìŠ¤
&lt;/h2>&lt;p>&lt;img src="https://s0okju.github.io/p/basic-spring-1/spring_database.png"
width="1992"
height="1312"
srcset="https://s0okju.github.io/p/basic-spring-1/spring_database_hu2750262592927299865.png 480w, https://s0okju.github.io/p/basic-spring-1/spring_database_hu10049145414792805877.png 1024w"
loading="lazy"
alt="ì¶œì²˜-https://velog.io/@murphytklee/Spring-ORM-JPA-Hibernate-JDBC-%EC%B4%9D%EC%A0%95%EB%A6%AC/"
class="gallery-image"
data-flex-grow="151"
data-flex-basis="364px"
>&lt;/p>
&lt;h3 id="jpajava-persistent-api">JPA(Java Persistent API)
&lt;/h3>&lt;p>ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•œ ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. ì´ë¥¼ êµ¬í˜„í•œ ORM í”„ë ˆì„ì›Œí¬ë¡œëŠ” hibernateê°€ ìˆë‹¤.&lt;/p>
&lt;p>JPAëŠ” ë‹¤ì–‘í•œ ì¿¼ë¦¬ ë°©ë²•ì„ ì§€ì›í•œë‹¤.&lt;/p>
&lt;ul>
&lt;li>JPQL&lt;/li>
&lt;li>QueryDSL&lt;/li>
&lt;li>Native SQL&lt;/li>
&lt;li>JDBC API ì§ì ‘ ì‚¬ìš©&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ìš”ì¦˜ì€ QueryDSLë¥¼ ì‚¬ìš©í•˜ëŠ” ì¶”ì„¸ë¼ê³  í•œë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h3 id="ì•¤í‹°í‹°">ì•¤í‹°í‹°
&lt;/h3>&lt;p>DBì˜ í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ëŠ” ê°ì²´ë¡œ DB í…Œì´ë¸”ê³¼ ì§ì ‘ ì—°ê²°ëœë‹¤.&lt;/p>
&lt;h4 id="ì˜ì†ì„±-ì»¨í…ìŠ¤íŠ¸">ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸
&lt;/h4>&lt;p>ì—”í‹°í‹°ë¥¼ ê´€ë¦¬í•˜ëŠ” ê°€ìƒ ê³µê°„ì´ë‹¤.&lt;/p>
&lt;ul>
&lt;li>1ì°¨ ìºì‹œ
&lt;ul>
&lt;li>ìºì‹œí‚¤ëŠ” ì—”í‹°í‹°ì˜ í‚¤ë¡œ ë‘¬ì„œ, ì¡°íšŒì‹œ 1ì°¨ì ìœ¼ë¡œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ë‚´ì— ìˆëŠ” ê°’ì„ ë°˜í™˜í•œë‹¤.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ì“°ê¸° ì§€ì—°
&lt;ul>
&lt;li>ë¹ˆë²ˆí•œ context swtichingì— ëŒ€í•œ overheadë¥¼ ì¤„ì—¬ì£¼ê¸° ìœ„í•´ í•œêº¼ë²ˆì— ëª¨ì•˜ë‹¤ê°€ ì²˜ë¦¬í•œë‹¤.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ë³€ê²½ ê°ì§€
&lt;ul>
&lt;li>ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ë‚´ì— ìˆëŠ” ìºì‹œì™€ ë³€ê²½ëœ entityê°’ì„ ë¹„êµí•´ì„œ ì—”í‹°í‹° ë³€ê²½ ê°ì§€ í›„ DBì— ìë™ ë°˜ì˜&lt;/li>
&lt;li>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, DB ìƒì— ìˆëŠ” ë¡œì§ì˜ ê¼¬ì´ëŠ” ê²ƒì„ ë°©ì§€&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>Q. ì™œ ì˜ì†ì„± í…ŒìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì¸ê°€?&lt;/p>
&lt;p>A. íŠ¸ëœì­ì…˜ì˜ íšŸìˆ˜ë‚˜ ë°©ì‹ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•´ ì„œë²„ì˜ ì†ë„ë¥¼ ëŠ˜ë¦¬ê³ , ì¤‘ë³µë˜ëŠ” ì¿¼ë¦¬ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>WASê°€ ì‹œì‘ë˜ë©´ EntityMangerFactoryê°€ ìƒì„±ë˜ê³ , íŠ¸ëœì­ì…˜ë§ˆë‹¤ ìƒì„±ë˜ëŠ” EntityManagerë¥¼ ê´€ë¦¬í•œë‹¤. ì´ë•Œ EntityManagerëŠ” Entityì˜ ìƒëª… ì£¼ê¸°ë¥¼ ê´€ë¦¬í•œë‹¤.(ê´€ë¦¬ ìƒíƒœ, ë¹„ì˜ì† ìƒíƒœ, ì‚­ì œëœ ìƒíƒœ)&lt;/p>
&lt;blockquote>
&lt;p>ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” EntityManagerFactoryë¥¼ í•˜ë‚˜ë§Œ ìƒì„±í•´ì„œ ê´€ë¦¬í•˜ê³ , ì˜ì¡´ì„± ì£¼ì…í•´ì„œ ì‚¬ìš©í•¨. ë¹ˆì„ í•˜ë‚˜ë§Œ ìƒì„±í•´ì„œ ë™ì‹œì„± ë¬¸ì œë¥¼ í•´ì†Œí–ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://s0okju.github.io/p/basic-spring-1/persistenceContext.png"
width="705"
height="441"
srcset="https://s0okju.github.io/p/basic-spring-1/persistenceContext_hu1941818389389842220.png 480w, https://s0okju.github.io/p/basic-spring-1/persistenceContext_hu8166744446909822863.png 1024w"
loading="lazy"
alt="ì¶œì²˜-https://iyoungman.github.io/jpa/EntityManagerFactory-EntityManager-PersistenceContext/"
class="gallery-image"
data-flex-grow="159"
data-flex-basis="383px"
>&lt;/p>
&lt;h3 id="spring-data-api">Spring data api
&lt;/h3>&lt;p>ì¸í„°í˜ì´ìŠ¤ ë° ì£¼ì„ ì„¸íŠ¸ë¥¼ ì œê³µí•´ì„œ ë°ì´í„° ì•¡ì„¸ìŠ¤ ê³„ì¸µì„ ì‰½ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. JPAë¥¼ í•œ ë‹¨ê³„ ì¶”ìƒí™”ì‹œí‚¨ Repositoryë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•¨ìœ¼ë¡œì¨ ì´ë¤„ì§„ë‹¤.&lt;/p>
&lt;p>ìŠ¤í”„ë§ ë°ì´í„°ì˜ ê³µí†µì ì¸ ê¸°ëŠ¥ì—ì„œ JPAì˜ ìœ ìš©í•œ ê¸°ìˆ ì´ ì¶”ê°€ (ìŠ¤í”„ë§ ë°ì´í„° ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ì•„ì„œ ê°„ë‹¨í•œ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ê°€ëŠ¥)&lt;/p>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://velog.io/@murphytklee/Spring-ORM-JPA-Hibernate-JDBC-%EC%B4%9D%EC%A0%95%EB%A6%AC" target="_blank" rel="noopener"
>Spring - ORM, JPA, Hibernate, JDBC ì´ì •ë¦¬&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://ict-nroo.tistory.com/116" target="_blank" rel="noopener"
>[JPA] ê°ì²´ì§€í–¥ ì¿¼ë¦¬, JPQL&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://mangkyu.tistory.com/143" target="_blank" rel="noopener"
>[TDD] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸(Unit Test) ì‘ì„±ì˜ í•„ìš”ì„± (1/3)&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://velog.io/@ung6860/Spring%EC%8A%A4%ED%94%84%EB%A7%81-%EA%B8%B0%EC%B4%88-DIDependency-Injection" target="_blank" rel="noopener"
>[Spring]ìŠ¤í”„ë§ ê¸°ì´ˆ - DI(Dependency Injection)&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Terraform ê¸°ì´ˆ ë§›ë³´ê¸° - 1. ê¸°ë³¸ ë¬¸ë²• ìµíˆê¸°</title><link>https://s0okju.github.io/p/basic-terraform-1/</link><pubDate>Thu, 25 Jan 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/basic-terraform-1/</guid><description>&lt;h2 id="terraform-ì´ë€">Terraform ì´ë€
&lt;/h2>&lt;p>HashiCorpì—ì„œ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ê°œë°œì¤‘ì¸, í´ë¼ìš°ë“œ ë° ì˜¨í”„ë¡œë¯¸ìŠ¤ ì¸í”„ë¼ë¥¼ ì½”ë“œë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì½”ë“œì´ë‹¤. ì¸í”„ë¼ í™˜ê²½ êµ¬ì„± ì‹œ ì„ ì–¸ì  ì½”ë“œí˜•ì‹ì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±, ìˆ˜ì •, ì‚­ì œí•˜ì—¬ ê´€ë¦¬ê°€ ê°€ëŠ¥í•œ laC(Infrastructure as Code) í”„ë¡œë¹„ì €ë‹ ë„êµ¬ì´ë‹¤.&lt;/p>
&lt;h2 id="terraform-ì‘ë™-ë°©ì‹">Terraform ì‘ë™ ë°©ì‹
&lt;/h2>&lt;p>ì£¼ë¡œ Write, Plan, Apply ì ˆì°¨ë¡œ ì´ë¤„ì§„ë‹¤.&lt;/p>
&lt;ol>
&lt;li>Write : Hashicorpì—ì„œ ìì²´ ê°œë°œí•œ HCL ì–¸ì–´ë¡œ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±&lt;/li>
&lt;li>Plan : ìƒíƒœë¥¼ ë¹„êµí•˜ë©° ë³€ê²½ì ì„ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤Œ&lt;/li>
&lt;li>Apply : ì‹¤í–‰í•˜ëŠ” ë‹¨ê³„, ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰
&lt;ol>
&lt;li>ì˜ì¡´ ê´€ê³„ì— ë”°ë¼ ìˆœì„œë¥¼ ëª…ì‹œí•  ìˆ˜ ìˆë‹¤.&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;p>ìƒíƒœ ë¹„êµë¥¼ í†µí•´ íœ´ë¨¼ ì—ëŸ¬ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ì½”ë“œì˜ ë¬´ê²Œê°€ ë¬´ê±°ì›Œì§€ë©´, ì‹¤í–‰í•˜ëŠ”ë° ì˜¤ë˜ê±¸ë¦¬ëŠ” ì›ì¸ì´ ë  ìˆ˜ ìˆë‹¤. ê·¸ ì™¸ì—ë„ ë‹¤ì–‘í•œ ë‹¨ì ì´ ì¡´ì¬í•  ê²ƒì´ë‹¤. ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ìƒì‚°ì„± ì¸¡ë©´, ì¢…ì†ì„± ê·¸ë˜í”„ ë“± ì¥ì ë“¤ì´ ë” í¬ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>í´ë¼ìš°ë“œ ì»´í“¨íŒ… í™˜ê²½ì€ ì°¸ì¡°ëœ ë¦¬ì†ŒìŠ¤ê°€ ì²˜ìŒì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¸ì¡°í•˜ëŠ” ìˆœí™˜ë£¨í”„ ë¬¸ì œë¥¼ ì§€ë‹ˆê³  ìˆë‹¤. ë¬´í•œí•œ ë°˜ë³µìœ¼ë¡œ ì¸í•´ ì‹œìŠ¤í…œì´ ë¹ ë¥´ê²Œ ê³ ê°ˆë˜ê³ , ì„±ëŠ¥ì´ ì €í•˜ëœë‹¤. Terraformì—ì„œëŠ” ë¦¬ì†ŒìŠ¤ì˜ ì°¸ì¡° ë‚´ìš©ì„ ê·¸ë˜í”„ë¡œ ë³´ì—¬ì£¼ëŠ” Resource Graphë¥¼ ì œê³µí•´ì£¼ëŠ”ë°, ì´ë¥¼ í™œìš©í•´ ìˆœí™˜ë£¨í”„ ë¬¸ì œë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h2 id="ì—°ìŠµ">ì—°ìŠµ
&lt;/h2>&lt;blockquote>
&lt;p>ìì„¸í•œ ë¬¸ë²•ì€ &lt;strong>&lt;a class="link" href="https://developer.hashicorp.com/terraform/language" target="_blank" rel="noopener"
>Terraform Language Documentation&lt;/a>ì„ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.&lt;/strong>&lt;/p>
&lt;/blockquote>
&lt;h3 id="ì‹œë‚˜ë¦¬ì˜¤">ì‹œë‚˜ë¦¬ì˜¤
&lt;/h3>&lt;ol>
&lt;li>AWSë¥¼ í™œìš©í•œë‹¤.&lt;/li>
&lt;li>ê°œë°œ, ìš´ì˜ VPCë¥¼ êµ¬ì¶•í•œë‹¤.
&lt;ul>
&lt;li>ê° VPCì—ì„œ private, public subnetì´ ì¡´ì¬í•œë‹¤.&lt;/li>
&lt;li>ì™¸ë¶€ì™€ í†µì‹ ì„ ìœ„í•´ internet gatewayì™€ ë‚´ë¶€ ë¦¬ì†ŒìŠ¤ë¼ë¦¬ë§Œ í†µì‹ í•  ìˆ˜ ìˆëŠ” NAT gatewayë¥¼ ì„¤ì¹˜í•œë‹¤.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://s0okju.github.io/p/basic-terraform-1/20240128_aws.png"
width="361"
height="331"
srcset="https://s0okju.github.io/p/basic-terraform-1/20240128_aws_hu13700044031481774170.png 480w, https://s0okju.github.io/p/basic-terraform-1/20240128_aws_hu11175959190268745839.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - ì €ì"
class="gallery-image"
data-flex-grow="109"
data-flex-basis="261px"
>&lt;/p>
&lt;h3 id="êµ¬í˜„">êµ¬í˜„
&lt;/h3>&lt;ol>
&lt;li>AWSë¥¼ í™œìš©í•œë‹¤.&lt;/li>
&lt;/ol>
&lt;p>&lt;a class="link" href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs" target="_blank" rel="noopener"
>&lt;strong>Terraform AWS Registry&lt;/strong>&lt;/a>ì—ì„œ ì œê³µí•´ì£¼ëŠ” ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•œë‹¤. ë‚˜ì˜ ê²½ìš° regionì„ &lt;code>ap-northeast-2&lt;/code> ë¡œ ì„¤ì •í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="k">terraform&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">required_providers&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> aws&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;hashicorp/aws&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;~&amp;gt; 5.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Configure the AWS Provider
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">provider&lt;/span> &lt;span class="s2">&amp;#34;aws&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> region&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ap-northeast-2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>ê°œë°œ ìš´ì˜ vpcë¥¼ êµ¬ì¶•í•œë‹¤.&lt;/li>
&lt;/ol>
&lt;p>vpc ëª¨ë“ˆì„ ë³„ë„ë¡œ ë§Œë“¤ì–´ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í–ˆê³ , envë¥¼ ë³€ìˆ˜ë¡œ ì‚¼ì•„ ë¦¬ì†ŒìŠ¤ì˜ ì´ë¦„ì— ê°œë°œ í™˜ê²½ì„ ëª…ì‹œí•˜ë„ë¡ í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="err">//&lt;/span> &lt;span class="k">For&lt;/span> &lt;span class="k">Dev&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">module&lt;/span> &lt;span class="s2">&amp;#34;dev_vpc&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;./vpc.d&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> env&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;dev&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">//&lt;/span> &lt;span class="k">For&lt;/span> &lt;span class="k">Production&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">module&lt;/span> &lt;span class="s2">&amp;#34;prd_vpc&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;./vpc.d&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> env&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;prd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ëª¨ë“ˆì˜ main.tfì—ëŠ” public, private Subnet ê·¸ë¦¬ê³  NAT gateway, Internet gatewayë¥¼ ìƒì„±í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤.&lt;/p>
&lt;p>Private Subnetì„ êµ¬ì„±í•˜ê¸° ìœ„í•´ì„œëŠ” ë¼ìš°íŒ… í…Œì´ë¸”ì´ í•„ìš”í•˜ì§€ë§Œ, ì„ì‹œì´ë¯€ë¡œ Private NAT Gatewayë§Œ ì‘ì„±í–ˆë‹¤. ì—¬ê¸°ì„œ &lt;strong>ì£¼ëª©í•´ì•¼ í•  ì ì€ NAT, Internet Gatewayì˜ ê²½ìš° Subnetì´ ìš°ì„ ì ìœ¼ë¡œ ë§Œë“¤ì–´ì ¸ì•¼ ì‹¤í–‰ëœë‹¤&lt;/strong>.(ë§Œì•½ì— ê·¸ëŸ¬ì§€ ì•ŠëŠ”ë‹¤ë©´ ì˜¤ë¥˜ê°€ ëœ¬ë‹¤.) ê·¸ëŸ¬ë¯€ë¡œ ì½”ë“œë¥¼ ì‘ì„±í• ë•Œ ê° ë¦¬ì†ŒìŠ¤ì˜ ì˜ì¡´ì„±ì„ ê³ ë ¤í•´ì„œ ì‘ì„±í•´ì•¼ í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="k">terraform&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">required_providers&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> aws&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;hashicorp/aws&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;~&amp;gt; 5.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">//&lt;/span> &lt;span class="k">Configure&lt;/span> &lt;span class="k">the&lt;/span> &lt;span class="k">AWS&lt;/span> &lt;span class="k">Provider&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">provider&lt;/span> &lt;span class="s2">&amp;#34;aws&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> region&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ap-northeast-2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">//&lt;/span> &lt;span class="k">Create&lt;/span> &lt;span class="k">a&lt;/span> &lt;span class="k">VPC&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;aws_vpc&amp;#34; &amp;#34;default&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> cidr_block&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;10.0.0.0/16&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> tags&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> Name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;terraform_default_vpc_${var.env}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">//&lt;/span> &lt;span class="k">public&lt;/span> &lt;span class="k">subnet&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;aws_subnet&amp;#34; &amp;#34;public_subnet_1&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vpc_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">aws_vpc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> cidr_block&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;10.0.0.0/24&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> tags&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> Name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;terraform_public_subnet_1_${var.env}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">//&lt;/span> &lt;span class="k">private&lt;/span> &lt;span class="k">subnet&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;aws_subnet&amp;#34; &amp;#34;private_subnet_1&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vpc_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">aws_vpc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> cidr_block&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;10.0.10.0/24&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> tags&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> Name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;terraform_private_subnet_1_${var.env}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">//&lt;/span> &lt;span class="k">private&lt;/span> &lt;span class="k">NAT&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;aws_nat_gateway&amp;#34; &amp;#34;private_nat&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> connectivity_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;private&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> subnet_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">aws_subnet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">private_subnet_1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> tags&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> Name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;terraform_nat_${var.env}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">//&lt;/span> &lt;span class="k">Internet&lt;/span> &lt;span class="k">gateway&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;aws_internet_gateway&amp;#34; &amp;#34;igw&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> vpc_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">aws_vpc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> tags&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> Name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;terraform_igw_${var.env}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="terraform-ë„ì…ê³¼-ê´€ë ¨ëœ-ê¸°ìˆ -ë¸”ë¡œê·¸">Terraform ë„ì…ê³¼ ê´€ë ¨ëœ ê¸°ìˆ  ë¸”ë¡œê·¸
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://techblog.woowahan.com/2646/" target="_blank" rel="noopener"
>ì¢Œì¶©ìš°ëŒ Terraform ì…ë¬¸ê¸°, ìš°ì•„í•œí˜•ì œë“¤ ê¸°ìˆ ë¸”ë¡œê·¸&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://helloworld.kurly.com/blog/terraform-adventure/" target="_blank" rel="noopener"
>DevOpsíŒ€ì˜ Terraform ëª¨í—˜&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://saramin.github.io/2022-10-21-terraform/" target="_blank" rel="noopener"
>Terraform IaC ë„êµ¬ë¥¼ í™œìš©í•œ AWS ì›¹ì½˜ì†” í´ë¦­ ë…¸ê°€ë‹¤ í•´ë°©ê¸°&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>â†’ ë‹¤ë“¤ ì›¹ì½˜ì†”ì—ì„œì˜ í•´ë°©ì„ ì™¸ì¹˜ê³  ìˆì—ˆë‹¤..&lt;/p></description></item><item><title>Archives</title><link>https://s0okju.github.io/archives/</link><pubDate>Tue, 28 May 2019 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/archives/</guid><description/></item><item><title>Links</title><link>https://s0okju.github.io/links/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/links/</guid><description/></item><item><title>Search</title><link>https://s0okju.github.io/search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/search/</guid><description/></item></channel></rss>