<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Openstack on S0okJu.dev</title><link>https://s0okju.github.io/tags/openstack/</link><description>Recent content in Openstack on S0okJu.dev</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Tue, 01 Oct 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://s0okju.github.io/tags/openstack/index.xml" rel="self" type="application/rss+xml"/><item><title>ì„œë²„ êµ¬ì¶•ê¸° - 4. Kolla-ansible ì„¤ì¹˜ ì‹œ ë§ˆì£¼í•œ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ</title><link>https://s0okju.github.io/p/server-setup-4/</link><pubDate>Tue, 01 Oct 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/server-setup-4/</guid><description>&lt;h2 id="devstackì˜-í•œê³„">DevStackì˜ í•œê³„
&lt;/h2>&lt;p>DevStackìœ¼ë¡œ Openstackì„ ë°°í¬í•˜ë©´ì„œ í° ë¬¸ì œì ì„ ëŠë¼ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Nova Instanceì— ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì–´ë µë‹¤.&lt;/li>
&lt;li>ë¦¬ì†ŒìŠ¤ë¥¼ ì¶”ê°€ ë° ì‚­ì œí•˜ëŠ” ê²ƒì´ ì–´ë µë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ìœ„ì˜ ë¬¸ì œì ì€ &lt;strong>ë„¤íŠ¸ì›Œí¬ë¡œ ì¸í•´ ë°œìƒ&lt;/strong>í•œ ê²ƒì…ë‹ˆë‹¤.
ì˜ˆë¡œ ì œê°€ Nova Instanceë¥¼ ìƒì„±í•´ Floating ipë¥¼ í• ë‹¹í•œë‹¤ê³  ê°€ì •í•´ ë´…ì‹œë‹¤. External Networkì˜ IP ë²”ìœ„ê°€ ì™¸ë¶€ì™€ ì—°ê²°ì´ ë¶ˆê°€ëŠ¥í•´ ì§ì ‘ì ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤. ê·¸ëŸ¼ sshë¡œ ì„œë²„ì— ì§ì ‘ ì ‘ì†í•´ì„œ ê´€ë¦¬í•˜ëŠ” ë°©ì•ˆë„ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¼ Openstackì„ ì™œ ì“´ê±°ì§€? í‚¤ëŠ” ì–´ë–»ê²Œ ê´€ë¦¬í•˜ì§€? ë“± ë‹¤ì–‘í•œ ê¼¬ë¦¬ ì§ˆë¬¸ì´ ë”°ë¼ì˜¤ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="kolla-ansible">Kolla Ansible
&lt;/h2>&lt;p>ë°©ì•ˆì„ ëª¨ìƒ‰í•˜ëŠ” ì¤‘ Openstackì€ DevStack ì´ì™¸ì—ë„ ë‹¤ì–‘í•œ ë°°í¬ ë°©ì•ˆì´ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-4/image.png"
width="1083"
height="609"
srcset="https://s0okju.github.io/p/server-setup-4/image_hu6281986499923772551.png 480w, https://s0okju.github.io/p/server-setup-4/image_hu17404451910012511713.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://docs.openstack.org/contributors/ko_KR/common/introduction.html"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;blockquote>
&lt;p>Kolla Ansibleì´ë€ Ansible í”Œë ˆì´ë¶ì„ í†µí•´ OpenStackì˜ ëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ &lt;strong>ì»¨í…Œì´ë„ˆë¡œ ë°°í¬&lt;/strong>í•˜ê³  ìœ ì§€ ë³´ìˆ˜í•˜ë©° ìš´ì˜í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” í”„ë¡œì íŠ¸ì´ë‹¤. ì´ë¥¼ í†µí•´ ë³µì¡í•œ ì„¤ì¹˜ ê³¼ì •ê³¼ ìˆ˜ë™ ì„¤ì •ì„ ìµœì†Œí™”í•˜ê³ , ì¬í˜„ ê°€ëŠ¥í•œ í™˜ê²½ì„ ì œê³µí•˜ì—¬ íš¨ìœ¨ì ì´ë©° ì•ˆì •ì ì¸ í´ë¼ìš°ë“œ ì¸í”„ë¼ ìš´ì˜ì„ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;/blockquote>
&lt;p>ì¦‰ ìš°ë¦¬ê°€ ì„¤ì •í•œ ì‹œìŠ¤í…œ ì„œë¹„ìŠ¤ë¥¼ ì»¨í…Œì´ë„ˆ í˜•íƒœë¡œ êµ¬ì¶•ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-4/image-1.png"
width="983"
height="925"
srcset="https://s0okju.github.io/p/server-setup-4/image-1_hu7892018536490297472.png 480w, https://s0okju.github.io/p/server-setup-4/image-1_hu5755813560970344651.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://velog.io/@larshavin/Kolla-Ansible%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-OpenStack-%EC%84%A4%EC%B9%98-1"
class="gallery-image"
data-flex-grow="106"
data-flex-basis="255px"
>&lt;/p>
&lt;h2 id="ì„¤ì¹˜">ì„¤ì¹˜
&lt;/h2>&lt;blockquote>
&lt;p>ì„¤ì¹˜ëŠ” &lt;a class="link" href="https://parandol.tistory.com/72" target="_blank" rel="noopener"
>íŒŒë€ëŒë‹˜ì˜ ë¸”ë¡œê·¸ - Kolla-ansibleë¡œ Openstack All-in-one ì„¤ì¹˜í•˜ê¸°(Installing Openstack All-in-one with Kolla-ansible)&lt;/a>ë¥¼ ì ê·¹ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h3 id="ì„¤ì¹˜-ëª©ë¡">ì„¤ì¹˜ ëª©ë¡
&lt;/h3>&lt;p>Kolla-ansibleì˜ ì¥ì ì€ ì›í•˜ëŠ” ë¦¬ì†ŒìŠ¤ ì„ íƒê³¼ ì„¤ì •ì´ ì‰½ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ëŠ” ê¸°ë³¸ì ì¸ ë¦¬ì†ŒìŠ¤ë¥¼ ì„ íƒí•˜ì—¬ ì„¤ì¹˜í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;strong>ì„¤ì¹˜í•  ë¦¬ì†ŒìŠ¤&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Keystone&lt;/li>
&lt;li>Glance&lt;/li>
&lt;li>Nova&lt;/li>
&lt;li>Neutron&lt;/li>
&lt;li>Cinder&lt;/li>
&lt;li>Swift&lt;/li>
&lt;li>Horizon&lt;/li>
&lt;/ul>
&lt;h3 id="all-in-one-or-node">all-in-one or node?
&lt;/h3>&lt;p>ì˜¤í”ˆìŠ¤íƒì€ í¬ê²Œ 3ê°€ì§€ ë…¸ë“œê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Controller node : ì „ì²´ ì˜¤í”ˆìŠ¤íƒ ì„œë¹„ìŠ¤ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì»¨íŠ¸ë¡¤ëŸ¬ ê´€ë¦¬ ë° ë…¸ë“œ ê°„ ì—°ê²°ì„ ì˜í•´ì„œëŠ” ìµœì†Œí•œ 2ê°œ ì´ìƒì˜ ì¸í„°ë„· ì¸í„°í˜ì´ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤.&lt;/li>
&lt;li>Compute node : Nova ê¸°ë°˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‘ë™í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” í•˜ì´í¼ë°”ì´ì €ë¥¼ ì‹¤í–‰í•˜ëŠ” ë…¸ë“œì…ë‹ˆë‹¤.&lt;/li>
&lt;li>Network node : ë‹¤ì–‘í•œ ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ ì—ì´ì „íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©°, ì´ë¥¼ ê°€ìƒ ë„¤íŠ¸ì›Œí¬ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-4/image-2.png"
width="626"
height="686"
srcset="https://s0okju.github.io/p/server-setup-4/image-2_hu4232316961094443982.png 480w, https://s0okju.github.io/p/server-setup-4/image-2_hu13564817206507154081.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://docs.oracle.com/cd/E36784_01/html/E54155/archover.html"
class="gallery-image"
data-flex-grow="91"
data-flex-basis="219px"
>&lt;/p>
&lt;p>ì—¬ëŸ¬ ê°€ì´ë“œë¥¼ ë³´ë©´ ë…¸ë“œë“¤ì€ ë¬¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì„œë²„ ë‚´ ê°€ìƒë¨¸ì‹ ì„ êµ¬ì¶•í•˜ì—¬ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë³µì¡í•œ ê´€ê³„ë¡œ &lt;strong>ì„œë¹„ìŠ¤ ê¸°ëŠ¥ì„ í•˜ë‚˜ì˜ í˜¸ìŠ¤íŠ¸ì— ì„¤ì¹˜í•  ìˆ˜ ìˆëŠ” all-in-one&lt;/strong>&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>ì„ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="openstack-ë„¤íŠ¸ì›Œí¬">Openstack ë„¤íŠ¸ì›Œí¬
&lt;/h2>&lt;p>&lt;strong>ê°€ì¥ ì–´ë µê³  ì•ìœ¼ë¡œ ê³„ì† ê³µë¶€í•´ì•¼ í•˜ëŠ” ë¶„ì•¼&lt;/strong>ì¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì™„ì „íˆ ì´í•´í•œ ê²ƒì€ ì•„ë‹ˆì§€ë§Œ ì•Œê³  ìˆëŠ” ê·¸ëŒ€ë¡œ ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì˜¤í”ˆ ìŠ¤íƒì—ì„œ ë„¤íŠ¸ì›Œí¬ëŠ” Management, Tunnel, External ë„¤íŠ¸ì›Œí¬ê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Management Network : ê´€ë¦¬ìš© ë„¤íŠ¸ì›Œí¬ë¡œ ê° ì»´í¬ë„ŒíŠ¸ì™€ ê´€ë ¨ëœ APIë¥¼ í˜¸ì¶œí•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.&lt;/li>
&lt;li>Tunnel Network : vm instance ê°„ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì¶•í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.&lt;/li>
&lt;li>External Network : vm instanceê°€ ì¸í„°ë„·ê³¼ í†µì‹ í•˜ê¸° ìœ„í•œ ë„¤íŠ¸ì›Œí¬ì…ë‹ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;p>ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ëŠ” í¬ê²Œ ë‘ ê°€ì§€ ì˜µì…˜ì´ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Provider Network : ê°€ìƒ ë„¤íŠ¸ì›Œí¬ë¥¼ ë¬¼ë¦¬ì  ë„¤íŠ¸ì›Œí¬ë¡œ ì—°ê²°í•©ë‹ˆë‹¤. ì¦‰ ë¬¼ë¦¬ì ì¸ ë„¤íŠ¸ì›Œí¬ê°€ vm ì¸ìŠ¤í„´ìŠ¤ê°€ í™œìš©í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ê°€ ë©ë‹ˆë‹¤.&lt;/li>
&lt;li>Self-Service Network : ì˜¤í”ˆìŠ¤íƒì„ ì‚¬ìš©í•˜ëŠ” ì‚¬ìš©ìê°€ ì§ì ‘ ìì‹ ë§Œì˜ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆëŠ” ë„¤íŠ¸ì›Œí¬ ì…ë‹ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>Provider ë„¤íŠ¸ì›Œí¬ëŠ” ë¶€í•˜ë¶„ì‚° ì„œë¹„ìŠ¤ í˜¹ì€ ë°©í™”ë²½ ì„œë¹„ìŠ¤ ë“± ê³ ê¸‰ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>ì œê°€ ì‚¬ìš©í•˜ëŠ” ì˜µì…˜ì€ ë¹„êµì  ê°„ë‹¨í•œ Provider Network ì…ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="í…ŒìŠ¤íŠ¸ìš©-openstack-ì„œë²„ì˜-ë„¤íŠ¸ì›Œí¬-ì ‘ê·¼-ë¬¸ì œ">í…ŒìŠ¤íŠ¸ìš© Openstack ì„œë²„ì˜ ë„¤íŠ¸ì›Œí¬ ì ‘ê·¼ ë¬¸ì œ
&lt;/h2>&lt;p>kolla-ansibleì—ì„œ ì œê³µí•´ì£¼ëŠ” &lt;code>globals.yml&lt;/code> ë¥¼ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤. í™˜ê²½ íŒŒì¼ì„ ë³´ë©´ Internal, External Networkë¡œ êµ¬ë¶„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.&lt;br>
network_interfaceëŠ” Internal networkì— í•´ë‹¹ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒìœ¼ë¡œ ì €ëŠ” ì™¸ë¶€ ì¸í„°ë„·ê³¼ ì—°ê²°ë˜ì§€ ì•ŠëŠ” &lt;code>enp2s0&lt;/code> ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ë°˜ë©´ neutron_external_interfaceëŠ” providerë¡œ ì œê³µí•  ì¸í„°í˜ì´ìŠ¤ë¡œ ì¸í„°ë„·ê³¼ ì—°ê²°í•  ìˆ˜ ìˆëŠ” &lt;code>enp3s0&lt;/code> ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c">##############################&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># Neutron - Networking Options&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">##############################&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># followed for other types of interfaces.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">network_interface&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;enp2s0&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">neutron_external_interface&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;enp3s0&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ê·¸ë¦¼ì„ ê·¸ë ¤ë³´ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.&lt;br>
(ì•„ë˜ì˜ ê·¸ë¦¼ì€ &lt;code>172.17.0.250/24&lt;/code>ì´ ì•„ë‹ˆë¼ &lt;code>172.16.0.250/24&lt;/code> ì…ë‹ˆë‹¤. )&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-4/image-3.png"
width="504"
height="423"
srcset="https://s0okju.github.io/p/server-setup-4/image-3_hu13983546864251427236.png 480w, https://s0okju.github.io/p/server-setup-4/image-3_hu4321421939863526325.png 1024w"
loading="lazy"
alt="ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€"
class="gallery-image"
data-flex-grow="119"
data-flex-basis="285px"
>&lt;/p>
&lt;p>í•˜ì§€ë§Œ ì´ë²ˆ ì˜¤í”ˆìŠ¤íƒ ì„œë²„ëŠ” ì–´ë””ê¹Œì§€ë‚˜ ê°œì¸ìœ¼ë¡œë§Œ ì‚¬ìš©ë˜ëŠ” ê³µê°„ì…ë‹ˆë‹¤. ì¦‰ &lt;strong>í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¥¼ ì“°ëŠ” ê²ƒë„ ì € í˜¼ìì´ê³ , ê´€ë¦¬í•˜ëŠ” ê²ƒë„ ì € í˜¼ìì¸ ê²ƒì…ë‹ˆë‹¤&lt;/strong>. ê´€ë¦¬ë¥¼ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ ì ‘ì†(Internal Network)ë„, ì˜¤í”ˆìŠ¤íƒ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë„¤íŠ¸ì›Œí¬ ì ‘ì†(External Network)ë„ ê°€ëŠ¥í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ê·¸ëŸ¬ë‚˜ ì €ëŠ” í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ì˜ APIë¥¼ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì„œë¡œ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­ì„ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/server-setup-4/image-4.png"
width="615"
height="510"
srcset="https://s0okju.github.io/p/server-setup-4/image-4_hu13221316638916593638.png 480w, https://s0okju.github.io/p/server-setup-4/image-4_hu16394758169030640411.png 1024w"
loading="lazy"
alt="ë„¤íŠ¸ì›Œí¬ êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="120"
data-flex-basis="289px"
>&lt;/p>
&lt;p>ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ë¼ìš°íŒ… í…Œì´ë¸”ì„ ì„¤ì •í•´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤. ë¼ìš°í„°ì— ì§ì ‘ ì„¤ì •í•˜ëŠ” ë°©ë²•ê³¼ ìš´ì˜ì²´ì œì—ì„œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì´ ìˆëŠ”ë°, ë¬¼ë¦¬ì ìœ¼ë¡œ ë¼ìš°í„°ê°€ í•˜ë‚˜ë§Œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ìš´ì˜ì²´ì œì—ì„œ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ì €ëŠ” ip forwardë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>IP-Forwardë€ ì»¤ë„ ê¸°ë°˜ ë¼ìš°íŒ… í¬ì›Œë”©ìœ¼ë¡œ í•˜ë‚˜ì˜ ì¸í„°í˜ì´ìŠ¤ë¡œ ë“¤ì–´ì˜¨ íŒ¨í‚·ì„ ë‹¤ë¥¸ ì„œë¸Œë„·ì„ ê°€ì§„ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¡œ íŒ¨í‚·ì„ í¬ì›Œë”©ì‹œí‚¤ëŠ” ê²ƒì´ë‹¤.&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Kernel parameter update&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo sysctl -w net.ipv4.conf.all.forwarding&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo sysctl net.ipv4.conf.all.forwarding net.ipv4.conf.all.forwarding &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>br-ex ì†¡ì‹ ë˜ì–´ enp2s0 ì¸í„°í˜ì´ìŠ¤ì— ìˆ˜ì‹ ë˜ëŠ” ê²ƒì„ í—ˆë½í•œë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>br-exì€ OpenVSwitch(OVS) ì ìš©ì‹œ ë¬¼ë¦¬ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì™€ ì§ì ‘ ì—°ê²°ë˜ëŠ” ê°€ìƒ ìŠ¤ìœ„ì¹˜ì…ë‹ˆë‹¤. ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ì—ì„œ ê°€ìƒ ë¨¸ì‹ ì„ ì ‘ê·¼í• ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo iptables -I FORWARD -i br-ex -o enp2s0 -j ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -nL FORWARD
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>í´ë¼ì´ì–¸íŠ¸ë„ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.&lt;br>
192.168.50.27ë¥¼ í†µí•´ 172.16.0.0/24(enp2s0)ì— ì ‘ê·¼í•œë‹¤ëŠ” routing ruleë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo route -n add 172.16.0.0/24 192.168.50.27
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì—¬ê¸°ì„œ ì™œ 192.168.50.27ë¥¼ í†µí•´ 172.16.0.0/24 ë„¤íŠ¸ì›Œí¬ì— ì ‘ê·¼í•œë‹¤ê³  ì„¤ì •í•œ ê²ƒì¼ê¹Œìš”?&lt;br>
ì˜¤í”ˆ ìŠ¤íƒ ì„œë²„ì—ì„œ ip_forwardë¥¼ ì‹œì¼°ìŠµë‹ˆë‹¤. ì¦‰ ì„œë²„ê°€ ë¼ìš°í„°ì˜ ì—­í• ì„ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë¼ìš°íŒ… ë£°ì„ ì„¤ì •í•  ë•Œì—ëŠ” 172.16.0.250/24ì— í¬ì›Œë”©ì„ ì‹œí‚¨ ì„œë²„ì˜ ip ì£¼ì†Œë¡œ ì„¤ì •í•´ì•¼ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì •ë¦¬">ì •ë¦¬
&lt;/h2>&lt;p>í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ Openstack ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. êµ¬ì¶• ì‹œ ìš”êµ¬ì‚¬í•­ì€ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë©´ì„œ ë¦¬ì†ŒìŠ¤ APIì— ì ‘ê·¼ ê°€ëŠ¥í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.
ì„œë¡œ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­ì„ ê°€ì ¸ ë¦¬ì†ŒìŠ¤ APIì— ì ‘ê·¼í•˜ì§€ ëª»í–ˆìœ¼ë‚˜ ì„œë²„ì— ip forwardë¥¼ ìˆ˜í–‰í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë¬¸ì œë¥¼ í•´ê²°í•´ ë³´ë‹ˆ Neutronì— ëŒ€í•´ ëª¨ë¥´ê³  ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ í¬ìŠ¤íŒ…ì€ Neutron í†±ì•„ë³´ê¸°ë¡œ ëŒì•„ì˜¤ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://velog.io/@lijahong/0%EB%B6%80%ED%84%B0-%EC%8B%9C%EC%9E%91%ED%95%98%EB%8A%94-Linux-%EA%B3%B5%EB%B6%80-%EB%B0%A9%ED%99%94%EB%B2%BD-%EC%BB%B4%ED%93%A8%ED%84%B0" target="_blank" rel="noopener"
>https://velog.io/@lijahong/0%EB%B6%80%ED%84%B0-%EC%8B%9C%EC%9E%91%ED%95%98%EB%8A%94-Linux-%EA%B3%B5%EB%B6%80-%EB%B0%A9%ED%99%94%EB%B2%BD-%EC%BB%B4%ED%93%A8%ED%84%B0&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://velog.io/@larshavin/Kolla-Ansible%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-OpenStack-%EC%84%A4%EC%B9%98-1" target="_blank" rel="noopener"
>https://velog.io/@larshavin/Kolla-Ansible%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-OpenStack-%EC%84%A4%EC%B9%98-1&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.naver.com/love_tolty/220237750951" target="_blank" rel="noopener"
>https://blog.naver.com/love_tolty/220237750951&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://tech.osci.kr/openstack_cinder/" target="_blank" rel="noopener"
>https://tech.osci.kr/openstack_cinder/&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://blog.naver.com/love_tolty/220237750951" target="_blank" rel="noopener"
>https://blog.naver.com/love_tolty/220237750951&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>OpsAthlan 2 - 2. Advanced echo server ë©”íŠ¸ë¦­ ë¶„ì„</title><link>https://s0okju.github.io/p/opsathlan-2-2/</link><pubDate>Sun, 29 Sep 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/opsathlan-2-2/</guid><description>&lt;h2 id="jvmì˜-ë©”ëª¨ë¦¬-ì‚¬ìš©-í˜•íƒœ">JVMì˜ ë©”ëª¨ë¦¬ ì‚¬ìš© í˜•íƒœ
&lt;/h2>&lt;p>JVMì—ëŠ” 3ê°€ì§€ ë©”ëª¨ë¦¬ ì‚¬ìš© í˜•íƒœê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>used: JVMì´ ì‚¬ìš© ì¤‘ì¸ ë©”ëª¨ë¦¬ ì–‘&lt;/li>
&lt;li>committed: JVMì´ ì‹œìŠ¤í…œì—ê²Œ ìš”ì²­í•œ ë©”ëª¨ë¦¬ ì–‘&lt;/li>
&lt;li>max : ì‹¤í–‰ ì¤‘ì¸ í™˜ê²½ì—ì„œ ìµœëŒ€ë¡œ í• ë‹¹í•  ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬ ì–‘&lt;/li>
&lt;/ul>
&lt;p>ë©”ëª¨ë¦¬ ìš©ëŸ‰ì€ used &amp;lt;= committed &amp;lt;= maxë¥¼ ë”°ë¥´ëŠ”ë°, used ë©”ëª¨ë¦¬ ì–‘ì´ committed, max ë©”ëª¨ë¦¬ë³´ë‹¤ í¬ê²Œ ëœë‹¤ë©´ OOM(Out Of Memory)ì´ ë°œìƒ&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image.png"
width="1280"
height="658"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image_hu17137007185295859528.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image_hu16220424698731232167.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://swmobenz.tistory.com/37"
class="gallery-image"
data-flex-grow="194"
data-flex-basis="466px"
>&lt;/p>
&lt;p>ê·¸ë¼íŒŒë‚˜ë¥¼ í™•ì¸í•´ë³´ë©´ 3ê°€ì§€ì˜ ë©”ëª¨ë¦¬ í˜•íƒœë¥¼ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-1.png"
width="1132"
height="298"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-1_hu10908424606683754404.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-1_hu4937573240029493458.png 1024w"
loading="lazy"
alt="ê·¸ë¼íŒŒë‚˜ì—ì„œ í™•ì¸í•œ JVM Memory"
class="gallery-image"
data-flex-grow="379"
data-flex-basis="911px"
>&lt;/p>
&lt;h3 id="committed-memoryì˜-ì—­í• ">Committed Memoryì˜ ì—­í• 
&lt;/h3>&lt;blockquote>
&lt;p>&lt;a class="link" href="https://swmobenz.tistory.com/37" target="_blank" rel="noopener"
>YGwanë‹˜ì˜ ë¸”ë¡œê·¸: JVM Memoryì˜ 3ê°€ì§€ ë©”íŠ¸ë¦­ ì§€í‘œ - Committed Memoryë€?&lt;/a>ë¥¼ ì½ì–´ë³´ëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ê³  í•´ì œí•˜ëŠ”ë° í•„ìš”í•œ ì˜¤ë²„í—¤ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤ëŠ” íŠ¹ì§•&lt;/strong>ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.&lt;br>
JVMì´ ì‹œìŠ¤í…œì„ í†µí•´ ë¯¸ë¦¬ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ì—¬ ì‚¬ìš© ì‹œ ê°€ì§€ê³  ìˆëŠ” ì—¬ìœ  ë©”ëª¨ë¦¬ ê³µê°„ì„ í™œìš©í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë©”ëª¨ë¦¬ë¥¼ ì¦‰ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©° ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ëŠ”ë° ë°œìƒí•˜ëŠ” ì˜¤ë²„í—¤ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="advanced-echo-server-jvm-ë©”íŠ¸ë¦­-íŠ¹ì§•">Advanced echo server jvm ë©”íŠ¸ë¦­ íŠ¹ì§•
&lt;/h2>&lt;p>ì´ì „ ê¸€ì—ì„œ ìŠ¤í”„ë§ë¶€íŠ¸ ì»¨í…Œì´ë„ˆì˜ ë©”ëª¨ë¦¬ê°€ ì§€ì†ì ìœ¼ë¡œ ì¦ê°€í•œë‹¤ê³  ì–¸ê¸‰í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ëŠ” jvmì— ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì–´ ê´€ë ¨ ì§€í‘œë¥¼ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;br>
ì²˜ìŒì— ëˆˆì—¬ê²¨ ë´¤ë˜ ê²ƒì€ JVMì˜ committed ë©”ëª¨ë¦¬ ì–‘ì´ ì ì§„ì ìœ¼ë¡œ ì¦ê°€í•˜ê³  ìˆë‹¤ëŠ” ì ì´ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ğŸ˜‚ ì‚¬ì§„ì—ì„œëŠ” ì˜ ë³´ì´ì§€ ì•Šì§€ë§Œ ìì„¸íˆ ë³´ë©´ 1MBì”© ìƒìŠ¹í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-2.png"
width="393"
height="278"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-2_hu3739438328806858467.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-2_hu2158101082316816296.png 1024w"
loading="lazy"
alt="JVM ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰"
class="gallery-image"
data-flex-grow="141"
data-flex-basis="339px"
>&lt;/p>
&lt;p>ìì„¸íˆ ì•Œì•„ë³´ê¸° ì „ì— heapê³¼ non-heap ë©”ëª¨ë¦¬ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤.&lt;/p>
&lt;ul>
&lt;li>Java Heap : Instanceì™€ ê°ì²´ê°€ ì €ì¥ë˜ëŠ” ê³µê°„ìœ¼ë¡œ ëª¨ë“  Threadì— ì˜í•´ ê³µìœ ë˜ëŠ” ì˜ì—­&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/li>
&lt;li>Native Area(non-heap) : OSë ˆë²¨ì—ì„œ ê´€ë¦¬í•˜ëŠ” ì˜ì—­ìœ¼ë¡œ JVM í¬ê¸°ì— ê°•ì œë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— &lt;strong>í”„ë¡œì„¸ìŠ¤ê°€ ì´ìš©í•  ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬ ìì›ì„ ìµœëŒ€í•œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-3.png"
width="844"
height="250"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-3_hu13641374250937015675.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-3_hu1575401254724482488.png 1024w"
loading="lazy"
alt="ì¶œì²˜ :Â https://www.samsungsds.com/kr/insights/1232761_4627.html"
class="gallery-image"
data-flex-grow="337"
data-flex-basis="810px"
>&lt;/p>
&lt;p>ë‹¤ì‹œ ëŒì•„ì™€ ì œê°€ ìš´ì˜í•˜ê³  ìˆëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í™•ì¸í•´ ë³¼ê¹Œìš”.&lt;br>
ì •ë§ ê°„ë‹¨í•œ EchoControllerì™€ í”„ë¡œë©”í…Œìš°ìŠ¤ metric ìˆ˜ì§‘ì„ ìœ„í•œ MetricControllerê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@RestController&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">EchoController&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@GetMapping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/echo&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">echo&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Hello, World!&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¹„êµì  ë‹¨ìˆœí•˜ê¸° ë•Œë¬¸ì— Heap ì˜ì—­ì˜ ë¬¸ì œëŠ” ì•„ë‹ˆë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.&lt;br>
ê·¸ë˜ë„ JVM Heapë¥¼ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤. í™ ë©”ëª¨ë¦¬ì˜ ì‚¬ìš©ëŸ‰ì€ ë§¤ìš° ì ê²Œ ì‚¬ìš©ë˜ì—ˆê³ , ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-4.png"
width="793"
height="464"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-4_hu13856778067335710945.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-4_hu2162670129833221820.png 1024w"
loading="lazy"
alt="JVM Heap Memory ì‚¬ìš©ëŸ‰"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="410px"
>&lt;/p>
&lt;p>non-heap ì˜ì—­ì„ ë´ë´…ì‹œë‹¤.&lt;br>
ë³€í™”í­ì´ ì ì–´ì„œ ì°¨ì´ë¥¼ ëª¨ë¥´ê² ì§€ë§Œ ë©”ëª¨ë¦¬ê°€ ì‚¬ìš©ëŸ‰ì´ ì¡°ê¸ˆì”© ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-5.png"
width="475"
height="278"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-5_hu5401583801384194378.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-5_hu9354498869452860333.png 1024w"
loading="lazy"
alt="JVM Non-Heap Memory ì‚¬ìš©ëŸ‰"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="410px"
>&lt;/p>
&lt;p>ìš°ì„  &lt;a class="link" href="https://ko.wikipedia.org/wiki/%ED%94%84%EB%A1%9C%ED%8C%8C%EC%9D%BC%EB%A7%81_%28%EC%BB%B4%ED%93%A8%ED%84%B0_%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%29" target="_blank" rel="noopener"
>í”„ë¡œíŒŒì¼ë§&lt;/a>ì€ ë¬´ì—‡ì„ ì˜ë¯¸í• ê¹Œìš”. &lt;a class="link" href="https://hudi.blog/jvm-warm-up/" target="_blank" rel="noopener"
>hudi.blog: ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ì§í›„ ë°œìƒí•˜ëŠ” Latencyì˜ ì›ì¸ê³¼ ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ JVM Warm-up&lt;/a>ë¥¼ ì°¸ê³ í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>JIT ì»´íŒŒì¼ëŸ¬&lt;/strong>ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œÂ &lt;strong>ìì£¼ ì‹¤í–‰ëœë‹¤ê³  íŒë‹¨ë˜ëŠ” íŠ¹ì • ë¶€ë¶„ë§Œì„ ê¸°ê³„ì–´ë¡œ ì»´íŒŒì¼&lt;/strong>í•œë‹¤. ì´ ë¶€ë¶„ì„Â &lt;strong>í•«ìŠ¤íŒŸ(Hotspot)&lt;/strong> ì´ë¼ê³  ë¶€ë¥¸ë‹¤. JIT ì»´íŒŒì¼ëŸ¬ëŠ” ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë™ì‘ì„ ë¶„ì„í•˜ê³  ì½”ë“œ ì‹¤í–‰ íšŸìˆ˜, ë£¨í”„ ë°˜ë³µ íšŸìˆ˜, ë©”ì†Œë“œ í˜¸ì¶œ ë“±ì˜ ì •ë³´ë¥¼ ì¸¡ì •í•˜ê³  ê¸°ë¡í•œë‹¤. ì´ë¥¼Â &lt;strong>í”„ë¡œíŒŒì¼ë§&lt;/strong>ì´ë¼ê³  í•œë‹¤.&lt;br>
JIT ì»´íŒŒì¼ëŸ¬ëŠ” í”„ë¡œíŒŒì¼ë§ ê²°ê³¼ë¥¼ í† ëŒ€ë¡œ í•«ìŠ¤íŒŸì„ ì‹ë³„í•œë‹¤. í•«ìŠ¤íŒŸì´ ì‹ë³„ë˜ì—ˆë‹¤ë©´, JIT ì»´íŒŒì¼ëŸ¬ëŠ”Â &lt;strong>ë©”ì†Œë“œ ë‹¨ìœ„ë¡œ ë°”ì´íŠ¸ ì½”ë“œë¥¼ ê¸°ê³„ì–´ë¡œ ë²ˆì—­&lt;/strong>í•œë‹¤.
JIT ì»´íŒŒì¼ëŸ¬ëŠ” ì´ë ‡ê²Œ ë²ˆì—­ëœ ê¸°ê³„ì–´ë¥¼Â &lt;strong>ì½”ë“œ ìºì‹œ(Code Cache)&lt;/strong> ë¼ëŠ” ìºì‹œê³µê°„ì— ì €ì¥í•œë‹¤.&lt;/p>
&lt;p>ì¶œì²˜ - &lt;a class="link" href="https://hudi.blog/jvm-warm-up/" target="_blank" rel="noopener"
>https://hudi.blog/jvm-warm-up/&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>JITëŠ” ì „ì²´ ì½”ë“œë¥¼ ì»´íŒŒì¼ í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ìì£¼ ì‹¤í–‰ë˜ëŠ” ë¶€ë¶„ì—ë§Œ ì»´íŒŒì¼í•˜ë©° ì´ì— ëŒ€í•œ ë°ì´í„°ë¥¼ Code Cacheì— ì €ì¥í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>Non Heapê³¼ ê´€ë ¨ëœ ì§€í‘œë¥¼ í™•ì¸í•´ë´…ì‹œë‹¤.&lt;br>
ì•„ë˜ì˜ ì„¸ ê°€ì§€ ì§€í‘œê°€ ë¯¸ì„¸í•˜ê²Œ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Metaspace : JVMì´ ë¡œë“œí•œ ë©”íƒ€ë°ì´í„°ë¥¼ ì €ì¥&lt;/li>
&lt;li>CodeHeap : JIT ì»´íŒŒì¼ëŸ¬ ê´€ë ¨ ì§€í‘œ
&lt;ul>
&lt;li>profiled nmethods&lt;/li>
&lt;li>non-profiled nmethods&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-6.png"
width="1888"
height="303"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-6_hu9697928109398902318.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-6_hu13775024245728683528.png 1024w"
loading="lazy"
alt="JVM Memory Pool(non-heap) ì§€í‘œ"
class="gallery-image"
data-flex-grow="623"
data-flex-basis="1495px"
>&lt;/p>
&lt;p>í•˜ì§€ë§Œ &lt;strong>ì¥ê¸°ì ì¸ ê´€ì ì—ì„œ ë°”ë¼ë´¤ì„ë•Œ ë©”ëª¨ë¦¬ ë‚­ë¹„ì¼ ìˆ˜ ìˆê² ë‹¤ëŠ” ìƒê°&lt;/strong>ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.&lt;br>
íŠ¹íˆ MetaspaceëŠ” JVM í¬ê¸°ì— ê°•ì œë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬ ìì›ì„ ìµœëŒ€í•œ í™œìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ Metaspace ë©”ëª¨ë¦¬ë¥¼ ì œí•œí•˜ì—¬ ìš´ì˜í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.&lt;br>
ì´ëŸ¬í•œ ì„±ëŠ¥ ì œí•œì€ Metaspaceì—ë§Œ ì ìš©ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ì˜ì—­ì—ì„œì˜ ë©”ëª¨ë¦¬ ì‚¬ì´ì¦ˆ ì œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-2/image-7.png"
width="1600"
height="922"
srcset="https://s0okju.github.io/p/opsathlan-2-2/image-7_hu4042786570281165567.png 480w, https://s0okju.github.io/p/opsathlan-2-2/image-7_hu349388056793302220.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://cloud.theodo.com/en/blog/jvm-oom"
class="gallery-image"
data-flex-grow="173"
data-flex-basis="416px"
>&lt;/p>
&lt;p>ì•ˆì „í•˜ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìš´ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” ê° ë©”ëª¨ë¦¬ ì˜ì—­ì— ë§ëŠ” ìš”êµ¬ì‚¬í•­ì„ ê³ ë ¤í•˜ì—¬ ê²°ì •í•˜ëŠ” ê²ƒì´ ë°”ëŒì§í•©ë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>Java ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ í¬ê²Œ ìœ„ì˜ Heapê³¼ Off-Heap ë‘ ê³µê°„ì„ í™œìš©í•˜ì—¬ ë™ì‘í•˜ëŠ”ë°, ë”°ë¼ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•  ë•Œ ë©”ëª¨ë¦¬ ëª‡ GBë¥¼ í• ë‹¹í•´ì•¼ í•˜ëŠ”ì§€ ê²°ì •í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¨ìˆœíˆ Xmx(Heap ë©”ëª¨ë¦¬ ìµœëŒ€ì¹˜ë¥¼ ê²°ì •í•˜ëŠ” Java ì˜µì…˜) ê°’ë§Œ ìƒê°í•˜ë©´ OOMEì— ë¹ ì§€ê¸° ì‰½ë‹¤. ì‹¤ì œë¡œëŠ” &lt;strong>Xmxì— MaxMetaspaceê°’ì„ ë”í•˜ê³ , ì¶”ê°€ë¡œ í”„ë¡œê·¸ë¨ì—ì„œ NIOë¥¼ ì‚¬ìš©í•´ Native Memoryë¥¼ ì§ì ‘ í• ë‹¹ë°›ëŠ” ë¡œì§ì„ ê³ ë ¤í•´ì„œ Heap + Native Memory ì‚¬ìš©ì´ëŸ‰ìœ¼ë¡œ í• ë‹¹ì„ í•´ì•¼ ë¹„êµì  ì •í™•&lt;/strong>í•˜ë‹¤. íŠ¹íˆ ì»¨í…Œì´ë„ˆì˜ ê²½ìš° ê³„ì‚°ì„ ì¢€ ë” ì •í™•í•˜ê²Œ í•´ì•¼ ì‹œìŠ¤í…œì—ì„œ OOM killedë˜ëŠ” ìƒí™©ì„ ë©´í•  ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>ì¶œì²˜ - &lt;a class="link" href="https://www.samsungsds.com/kr/insights/1232761_4627.html" target="_blank" rel="noopener"
>https://www.samsungsds.com/kr/insights/1232761_4627.html&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;h2 id="ì •ë¦¬">ì •ë¦¬
&lt;/h2>&lt;p>ì‹¤ì œë¡œ ë°°í¬í•´ë³´ë©´ì„œ ì»¨í…Œì´ë„ˆì˜ ì§€ì†ì ì¸ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì¦ê°€í•˜ëŠ” ê²ƒì— ì˜ë¬¸ì ì„ ê°€ì§€ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ìë°” ì»¨í…Œì´ë„ˆì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ì€ JVMì´ ì»¨íŠ¸ë¡¤í•  ìˆ˜ ì—†ëŠ” ë¶€ë¶„ì´ ë§ì•„ ì¶”ì í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>.&lt;br>
ê·¸ë˜ì„œ ìì„¸íˆ í™•ì¸í•  ìˆ˜ ìˆëŠ” JVM ìœ„ì£¼ë¡œ í™•ì¸í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. non-heap ì˜ì—­ì´ ë¯¸ì„¸í•˜ê²Œ ìƒìŠ¹í•˜ê³  ìˆì—ˆê³ , ì´ëŠ” ì •ìƒì ì¸ ì§€í‘œë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì¥ê¸°ì ìœ¼ë¡œëŠ” ë©”ëª¨ë¦¬ ë‚­ë¹„ê°€ ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë©”ëª¨ë¦¬ ì‚¬ì´ì¦ˆë¥¼ ì œí•œí•˜ì—¬ ìš´ì˜í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://swmobenz.tistory.com/37" target="_blank" rel="noopener"
>https://swmobenz.tistory.com/37&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://hudi.blog/jvm-warm-up/" target="_blank" rel="noopener"
>https://hudi.blog/jvm-warm-up/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://velog.io/@dongvelop/Spring-Boot-%EC%84%9C%EB%B2%84-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C%EB%B3%84-%EC%84%A4%EB%AA%85-%EB%B0%8F-%EC%9C%A0%EC%9D%98%EC%82%AC%ED%95%AD#codeheap-non-profiled-nmethods-non-heap" target="_blank" rel="noopener"
>https://velog.io/@dongvelop/Spring-Boot-%EC%84%9C%EB%B2%84-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C%EB%B3%84-%EC%84%A4%EB%AA%85-%EB%B0%8F-%EC%9C%A0%EC%9D%98%EC%82%AC%ED%95%AD#codeheap-non-profiled-nmethods-non-heap&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.samsungsds.com/kr/insights/1232761_4627.html" target="_blank" rel="noopener"
>https://www.samsungsds.com/kr/insights/1232761_4627.html&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://obv-cloud.com/41" target="_blank" rel="noopener"
>https://obv-cloud.com/41&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://swmobenz.tistory.com/37" target="_blank" rel="noopener"
>https://swmobenz.tistory.com/37&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://12bme.tistory.com/382" target="_blank" rel="noopener"
>https://12bme.tistory.com/382&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;a class="link" href="https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>OpsAthlan 2 - 1. Advanced echo server êµ¬ì¶•</title><link>https://s0okju.github.io/p/opsathlan-2-1/</link><pubDate>Thu, 26 Sep 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/opsathlan-2-1/</guid><description>&lt;h2 id="ì‹œë‚˜ë¦¬ì˜¤">ì‹œë‚˜ë¦¬ì˜¤
&lt;/h2>&lt;p>&lt;a class="link" href="https://s0okju.github.io/p/opsathlan-1/" target="_blank" rel="noopener"
>ì´ì „ê¸€&lt;/a> ì„ ë³´ë‹ˆ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…Œì´ë„ˆì— ë¬¸ì œê°€ ìƒê¸´ ê²ƒ ê°™ë‹¤. spring boot ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ì§€í‘œë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆë„ë¡ í™˜ê²½ì„ êµ¬ì¶•í•´ë³´ì.&lt;/p>
&lt;h3 id="í™˜ê²½">í™˜ê²½
&lt;/h3>&lt;ul>
&lt;li>Ubuntu 22.04&lt;/li>
&lt;li>Openstack 2024.1&lt;/li>
&lt;/ul>
&lt;h3 id="ì „ì²´-êµ¬ìƒë„">ì „ì²´ êµ¬ìƒë„
&lt;/h3>&lt;p>ì•„ë˜ì™€ ê°™ì´ êµ¬ìƒë©ë‹ˆë‹¤. cAdvisorë¥¼ ì„¤ì •í•œ ì´ìœ ëŠ” ì»¨í…Œì´ë„ˆ ê´€ë ¨ ë©”íŠ¸ë¦­ì„ ìˆ˜ì§‘í•˜ê¸° ìœ„í•´ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.
docker-composeë¥¼ í†µí•´ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image.png"
width="810"
height="750"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image_hu12328348664123321354.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image_hu17717745985325275902.png 1024w"
loading="lazy"
alt="ì‚¬ì§„ - OpsAthlan 2 êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="108"
data-flex-basis="259px"
>&lt;/p>
&lt;blockquote>
&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì»¨í…Œì´ë„ˆë“¤ì˜ ë¦¬ì†ŒìŠ¤ ì§€í‘œë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ cAdvisorë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•©ë‹ˆë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;/blockquote>
&lt;h3 id="ì ˆì°¨">ì ˆì°¨
&lt;/h3>&lt;ol>
&lt;li>Terraform, Ansibleë¥¼ í™œìš©í•œ í™˜ê²½ êµ¬ì„±&lt;/li>
&lt;li>í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ í™œìš©í•œ ì§€í‘œ ìˆ˜ì§‘&lt;/li>
&lt;li>ê·¸ë¼íŒŒë‚˜ ì‹œê°í™”&lt;/li>
&lt;/ol>
&lt;h2 id="í™˜ê²½-êµ¬ì„±">í™˜ê²½ êµ¬ì„±
&lt;/h2>&lt;p>í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ì˜ êµ¬ì„± ìì²´ëŠ” &lt;a class="link" href="https://s0okju.github.io/p/opsathlan-1/" target="_blank" rel="noopener"
>ì´ì „&lt;/a>ê³¼ ë³€í™”í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="docker-compose">docker compose
&lt;/h3>&lt;p>ë‹¤ë§Œ í™˜ê²½ êµ¬ì„±ì€ ë³€í–ˆìŠµë‹ˆë‹¤. ê°œë³„ ì»¨í…Œì´ë„ˆë¡œ ë°°í¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ docker-composeë¥¼ í†µí•´ ê´€ë ¨ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í–ˆìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ì»¨í…Œì´ë„ˆì˜ ê°œìˆ˜ê°€ ë§ì•„ì§ì— ë”°ë¼ ì»¨í…Œì´ë„ˆë¥¼ í° ë¬¶ìŒìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œì…ë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ 4ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í•˜ê²Œ ë©ë‹ˆë‹¤&lt;/p>
&lt;ul>
&lt;li>Prometheus&lt;/li>
&lt;li>Grafana&lt;/li>
&lt;li>Springboot application&lt;/li>
&lt;li>cAdvisor&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># docker-compose.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;3.7&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Prometheus service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prometheus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prom/prometheus:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;9090:9090&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Expose Prometheus web UI&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Grafana service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">grafana&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">grafana/grafana:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">grafana&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;3000:3000&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Expose Grafana web UI&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">depends_on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Spring Boot app service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">advanced-echo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">opsathlan-advanced-echo:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">opsathlan-advanced-echo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8080:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># cadvsior config&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cadvisor&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gcr.io/cadvisor/cadvisor:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8081:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/:/rootfs:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/run:/var/run:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/sys:/sys:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/lib/docker/:/var/lib/docker:ro&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># docker container log&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">monitoring&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">bridge&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="í”„ë¡œë©”í…Œìš°ìŠ¤">í”„ë¡œë©”í…Œìš°ìŠ¤
&lt;/h3>&lt;p>í”„ë¡œë©”í…Œìš°ìŠ¤ê°€ ìˆ˜ì§‘í•œ ë©”íŠ¸ë¦­ ì§€í‘œëŠ” springboot container ê´€ë ¨ ì§€í‘œì™€ ì»¨í…Œì´ë„ˆ ê´€ë ¨ ì§€í‘œì…ë‹ˆë‹¤. ê·¸ë˜ì„œ &lt;code>scrape_configs&lt;/code> targetì— ê´€ë ¨ ì»¨í…Œì´ë„ˆ URLë¥¼ ê¸°ì…í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">global&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">scrape_interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">10s&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># How often to scrape targets&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">scrape_configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">job_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;opsathlan-advanced-echo&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">static_configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">targets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;opsathlan-advanced-echo:8080&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;cadvisor:8080&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="docker-composeë¥¼-ì‹¤í–‰í•˜ëŠ”-ansible-playbook">docker composeë¥¼ ì‹¤í–‰í•˜ëŠ” Ansible playbook
&lt;/h3>&lt;p>novaì—ì„œ docker-composeë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” &lt;strong>ê´€ë ¨ ë°”ì´ë„ˆë¦¬ë¥¼ ì„¤ì¹˜&lt;/strong>í•˜ê³ , &lt;strong>í•„ìš”í•œ í™˜ê²½ íŒŒì¼ì„ ì¸ìŠ¤í„´ìŠ¤ì— ë³µì‚¬&lt;/strong>í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤. &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/2/scenario_02/ansible/docker-compose" target="_blank" rel="noopener"
>docker-compose ë¼ëŠ” ansible role&lt;/a>ë¥¼ ë§Œë“¤ì–´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³ , docker composeë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” í…ŒìŠ¤í¬ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê°œì¸ì ìœ¼ë¡œ ì‘ì—…í•œ &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/2/scenario_02/ansible/docker-installation" target="_blank" rel="noopener"
>ë„ì»¤ ì„¤ì¹˜ ansible-role&lt;/a> ë¥¼ í™•ì¸í•´ë³´ë©´ docker ì„¤ì¹˜í• ë•Œ &lt;code>docker-compose plugin&lt;/code>ë¥¼ ì„¤ì¹˜í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ ë³„ë„ì˜ ì„¤ì¹˜ ì—†ì´ &lt;code>docker compose&lt;/code> ëª…ë ¹ì–´ ë§Œìœ¼ë¡œë„ docker-compose íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Update apt cache&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">apt&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">update_cache&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">yes&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Install Docker Engine, CLI, containerd, and plugins&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">apt&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-ce&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-ce-cli&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">containerd.io&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-buildx-plugin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">docker-compose-plugin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">present&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” config íŒŒì¼ì„ nova ì¸ìŠ¤í„´ìŠ¤ì— ì§ì ‘ ì €ì¥í•´ì•¼ í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤. &lt;code>docker-compose.yml&lt;/code> ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ë³´ë©´ local volumeì´ &lt;code>./prometheus/prometheus.yml&lt;/code> ë¡œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. íŒŒì¼ ê²½ë¡œëŠ” nova ì¸ìŠ¤í„´ìŠ¤ì˜ íŒŒì¼ ê²½ë¡œë¡œ í•´ë‹¹ íŒŒì¼ ê²½ë¡œì— ë§ê²Œ ì„¤ì • íŒŒì¼(prometheus.yml)ë¥¼ ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># docker-compose.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Prometheus service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prometheus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prom/prometheus:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;9090:9090&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Expose Prometheus web UI&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">monitoring&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>prometheusì˜ í´ë”ë¥¼ ë§Œë“  í›„ì— ë³µì‚¬í•˜ëŠ” ì‘ì—…ì„ í•˜ë©´ íŒŒì¼ì´ ì €ì¥ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Create Prometheus configuration directory&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">file&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/home/ubuntu/prometheus&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">directory&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">owner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;0755&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Copy Prometheus config file&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">copy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/prometheus/prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">owner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;0644&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>docker compose ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ë©´ docker-compose íŒŒì¼ì— ì •ì˜ëœ ì»¨í…Œì´ë„ˆë“¤ì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Copy docker-compose.yml to the target machine&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">copy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./docker-compose.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/docker-compose.yml&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Destination on the target machine&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">owner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ubuntu&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;0644&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Run docker-compose up to start containers&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">docker compose up -d&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">chdir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">become&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼-í™œìš©í•œ-ì§€í‘œ-ìˆ˜ì§‘">í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ í™œìš©í•œ ì§€í‘œ ìˆ˜ì§‘
&lt;/h2>&lt;p>ë©”íŠ¸ë¦­ ìˆ˜ì§‘, ì‹œê°í™”, ì•Œë¦¼, ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ê¸°ëŠ¥ì„ ëª¨ë‘ ì œê³µí•˜ëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. Pull ë°©ì‹ìœ¼ë¡œ ë©”íŠ¸ë¦­ì„ ìˆ˜ì§‘í•˜ê³  ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-1.png"
width="1042"
height="745"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-1_hu14788327422024716885.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-1_hu8842426283194618521.png 1024w"
loading="lazy"
alt="ì¶œì²˜ - https://www.geeksforgeeks.org/prometheus-monitoring/"
class="gallery-image"
data-flex-grow="139"
data-flex-basis="335px"
>&lt;/p>
&lt;p>pull ë°©ì‹ì€ í”„ë¡œë©”í…Œìš°ìŠ¤ê°€ í•„ìš”í•œ ë©”íŠ¸ë¦­ ì§€í‘œë¥¼ ëŒ€ìƒ ì„œë²„ë¡œë¶€í„° ê°€ì ¸ì˜¨ë‹¤ëŠ” ê²ƒê³¼ ê°™ì€ ë§ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ëŒ€ìƒì´ ë˜ëŠ” ì„œë²„ëŠ” í”„ë¡œë©”í…Œìš°ìŠ¤ê°€ ë©”íŠ¸ë¦­ì„ ë°›ì•„ê°ˆ ìˆ˜ ìˆë„ë¡ endpointë¥¼ ì—´ì–´ë‘¬ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ë³´í†µì˜ ë°©ì‹ì´ë¼ë©´ spring boot actuatorë¥¼ í™œìš©í•˜ì—¬ &lt;code>/actuator/metrics&lt;/code> ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì—¬ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-properties" data-lang="properties">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># application.properties&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">management.endpoints.web.exposure.include&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">prometheus,metrics&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">management.endpoint.prometheus.enabled&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">management.prometheus.metrics.export.enabled&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ìœ„ì™€ ê°™ì€ ë°©ì‹ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ EOF ì˜¤ë¥˜ê°€ ë°œìƒí•´ í”„ë¡œë©”í…Œìš°ìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ì§€í‘œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ headerë¥¼ &lt;code>TEXT_PLAIN&lt;/code>ìœ¼ë¡œ ì§€ì •í•´ì£¼ëŠ” controllerë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nn">io.micrometer.prometheusmetrics.PrometheusMeterRegistry&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@RestController&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@RequiredArgsConstructor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">MetricsController&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">final&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PrometheusMeterRegistry&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">prometheusMeterRegistry&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@GetMapping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/metrics&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">metrics&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">scrape&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">prometheusMeterRegistry&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">scrape&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">HttpHeaders&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">HttpHeaders&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">setContentType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MediaType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">TEXT_PLAIN&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ResponseEntity&lt;/span>&lt;span class="o">&amp;lt;&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">scrape&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">HttpStatus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">OK&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>springboot actuator
ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ëª¨ë‹ˆí„°ë§ê³¼ ê´€ë¦¬ì— í•„ìš”í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>9090 í¬íŠ¸ì— ì ‘ì†í•´ í”„ë¡œë©”í…Œìš°ìŠ¤ web uië¥¼ ë³´ë©´ ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ cAdvisor ì§€í‘œê°€ ì •ìƒì ìœ¼ë¡œ í†µì‹ ë¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-2.png"
width="1447"
height="245"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-2_hu8113471659535806411.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-2_hu16006704477507434989.png 1024w"
loading="lazy"
alt="ì‚¬ì§„ - í”„ë¡œë©”í…Œìš°ìŠ¤ UIì—ì„œ í™•ì¸í•œ Target"
class="gallery-image"
data-flex-grow="590"
data-flex-basis="1417px"
>&lt;/p>
&lt;h2 id="ê·¸ë¼íŒŒë‚˜ë¥¼-í†µí•œ-ì‹œê°í™”">ê·¸ë¼íŒŒë‚˜ë¥¼ í†µí•œ ì‹œê°í™”
&lt;/h2>&lt;h3 id="cadvisor-ì§€í‘œ-ì‹œê°í™”">cAdvisor ì§€í‘œ ì‹œê°í™”
&lt;/h3>&lt;p>ê·¸ë¼íŒŒë‚˜ì—ì„œ containerì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ í™•ì¸í•´ë´…ë‹ˆë‹¤. ë©”ëª¨ë¦¬ ë‹¨ìœ„ë¡œ í™•ì¸í•˜ê¸° ìœ„í•´ 1024ë¥¼ ë‘ë²ˆ ë‚˜ëˆ´ìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>ê´€ë ¨ ì§€í‘œëŠ” &lt;a class="link" href="https://github.com/google/cadvisor/blob/master/docs/storage/prometheus.md" target="_blank" rel="noopener"
>cadvisor Github&lt;/a>ë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ëë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-promql" data-lang="promql">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">container_memory_usage_bytes&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nl">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">&amp;#34;&lt;/span>&lt;span class="s">instance_name&lt;/span>&lt;span class="p">&amp;#34;}&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1024&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1024&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì•„ë˜ì˜ ê·¸ë˜í”„ë¥¼ ë³´ë©´ ê³„ì† ìƒìŠ¹í•˜ê³  ìˆëŠ” ê·¸ë˜í”„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-3.png"
width="1204"
height="670"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-3_hu11174096070289850435.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-3_hu14858234098574167908.png 1024w"
loading="lazy"
alt="ì‚¬ì§„ - ì»¨í…Œì´ë„ˆ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì‹œê°í™”"
class="gallery-image"
data-flex-grow="179"
data-flex-basis="431px"
>&lt;/p>
&lt;h3 id="ìŠ¤í”„ë§-ì• í”Œë¦¬ì¼€ì´ì…˜-ê´€ë ¨-ì§€í‘œ-ì‹œê°í™”">ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ ê´€ë ¨ ì§€í‘œ ì‹œê°í™”
&lt;/h3>&lt;p>ì €ëŠ” &lt;a class="link" href="https://grafana.com/grafana/dashboards/4701-jvm-micrometer/" target="_blank" rel="noopener"
>GrafanaLabsì—ì„œ ì œê³µí•´ì£¼ëŠ” JVM ëŒ€ì‹œë³´ë“œ&lt;/a>ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. dashboard ipë¥¼ ì„¤ì •í•˜ë©´ ë‹¤ì–‘í•œ ê·¸ë˜í”„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì•„ë˜ì˜ ì‚¬ì§„ì€ ì¼ë¶€ë§Œ ë‚˜íƒ€ë‚¸ ê²ƒì´ë©° ì´ê²ƒ ì´ì™¸ì—ë„ ë‹¤ì–‘í•œ ì§€í‘œê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-2-1/image-4.png"
width="794"
height="270"
srcset="https://s0okju.github.io/p/opsathlan-2-1/image-4_hu12654308625765720708.png 480w, https://s0okju.github.io/p/opsathlan-2-1/image-4_hu11965415445671921365.png 1024w"
loading="lazy"
alt="ì‚¬ì§„ - ê·¸ë¼íŒŒë‚˜ì—ì„œ í™•ì¸í•œ ê·¸ë˜í”„(ì¼ë¶€)"
class="gallery-image"
data-flex-grow="294"
data-flex-basis="705px"
>&lt;/p>
&lt;h2 id="ë‹¤ìŒê¸€">ë‹¤ìŒê¸€
&lt;/h2>&lt;p>ì§€ê¸ˆê¹Œì§€ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒí¸ì—ëŠ” ì‹œê°í™”í•œ í‘œë¥¼ ë¶„ì„í•´ë³´ëŠ” ì‹œê°„ì„ ê°€ì§€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://themapisto.tistory.com/44" target="_blank" rel="noopener"
>https://themapisto.tistory.com/44&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>OpsAthlan 1 - Simple echo server</title><link>https://s0okju.github.io/p/opsathlan-1/</link><pubDate>Thu, 19 Sep 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/opsathlan-1/</guid><description>&lt;h2 id="ì‹œë‚˜ë¦¬ì˜¤">ì‹œë‚˜ë¦¬ì˜¤
&lt;/h2>&lt;p>Hello Worldë¥¼ ë°˜í™˜í•´ì£¼ëŠ” springboot ë„ì»¤ ì„œë¹„ìŠ¤ê°€ ìˆë‹¤. ë°°í¬í•´ë³´ì!&lt;/p>
&lt;h2 id="í™˜ê²½">í™˜ê²½
&lt;/h2>&lt;ul>
&lt;li>ubuntu 22.04&lt;/li>
&lt;li>openstack 2024.01&lt;/li>
&lt;/ul>
&lt;h2 id="ìˆœì„œ">ìˆœì„œ
&lt;/h2>&lt;ol>
&lt;li>Terraformì„ í™œìš©í•œ ì¸í”„ë¼ êµ¬ì„±&lt;/li>
&lt;li>Ansibleë¥¼ í™œìš©í•œ í™˜ê²½ êµ¬ì„± ë° ë¹Œë“œ&lt;/li>
&lt;li>cAdvisorë¥¼ í™œìš©í•œ ëª¨ë‹ˆí„°ë§&lt;/li>
&lt;/ol>
&lt;h3 id="cadvisorë¥¼-ì„ íƒí•œ-ì´ìœ ">cAdvisorë¥¼ ì„ íƒí•œ ì´ìœ 
&lt;/h3>&lt;p>cAdvsiorëŠ” ì»¨í…Œì´ë„ˆì˜ Metrixë¥¼ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆëŠ” ë„êµ¬ì…ë‹ˆë‹¤. &lt;strong>ê¸°ë³¸ì ì¸ ì»¨í…Œì´ë„ˆ ë©”íŠ¸ë¦­ ì •ë³´ë¥¼ ìš°ì„  í™•ì¸&lt;/strong>í•˜ê¸° ìœ„í•´ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ì „ì²´-êµ¬ì„±ë„">ì „ì²´ êµ¬ì„±ë„
&lt;/h2>&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image.png"
width="1110"
height="750"
srcset="https://s0okju.github.io/p/opsathlan-1/image_hu14762987096181792521.png 480w, https://s0okju.github.io/p/opsathlan-1/image_hu18320141257170937429.png 1024w"
loading="lazy"
alt="êµ¬ì„±ë„"
class="gallery-image"
data-flex-grow="148"
data-flex-basis="355px"
>&lt;/p>
&lt;h2 id="terraformì„-í™œìš©í•œ-ë¦¬ì†ŒìŠ¤-ë°°í¬">Terraformì„ í™œìš©í•œ ë¦¬ì†ŒìŠ¤ ë°°í¬
&lt;/h2>&lt;p>ë°°í¬í•´ì•¼ í•  ê²ƒì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>Nova Instance&lt;/li>
&lt;li>Network
&lt;ul>
&lt;li>Subnet&lt;/li>
&lt;li>Router&lt;/li>
&lt;li>Floating ip&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Security
&lt;ul>
&lt;li>Security Group
&lt;ul>
&lt;li>ssh, spring web port(8080), cAdvisor(8081)ë¥¼ ìœ„í•œ rule ìƒì„±&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ssh í†µì‹ ì„ ìœ„í•œ keypair&lt;/li>
&lt;/ul>
&lt;h3 id="terraform-code">Terraform code
&lt;/h3>&lt;p>terraformì€ ì ˆì°¨ ì§€í–¥ì ì´ê¸° ë•Œë¬¸ì— ë¦¬ì†ŒìŠ¤ ì‘ì„± ìˆœì„œê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.ê·¸ë˜ì„œ ê°„ë‹¨í•œ nova ì¸ìŠ¤í„´ìŠ¤ ë°°í¬ì˜ ê²½ìš° ì•„ë˜ì™€ ê°™ì€ ìˆœì„œë¥¼ ë”°ëìŠµë‹ˆë‹¤.&lt;/p>
&lt;ol>
&lt;li>ë„¤íŠ¸ì›Œí¬&lt;/li>
&lt;li>ì¸ìŠ¤í„´ìŠ¤ ìƒì„±&lt;/li>
&lt;li>floating ip í• ë‹¹&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>ì „ì²´ ì½”ë“œëŠ” &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/1/scenario_01/terraform" target="_blank" rel="noopener"
>ê¹ƒí—ˆë¸Œ&lt;/a>ë¥¼ ì°¸ê³ í•˜ê¸¸ ë°”ëë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>ë„¤íŠ¸ì›Œí¬ë¥¼ ìƒì„±í•œ ì´í›„ subnetë¥¼ ìƒì„±í•œë‹¤. ì™¸ë¶€ì™€ í†µì‹ í•˜ê¸° ìœ„í•´ì„œëŠ” external_networkì™€ ì„œë¸Œë„·ê³¼ì˜ ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ &lt;code>router&lt;/code>ë¥¼ ìƒì„±í•œ í›„ &lt;code>router_interface&lt;/code>ë¥¼ í†µí•´ external_networkì™€ ì„œë¸Œë„·ì´ ì—°ê²°í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-tf" data-lang="tf">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Network ìƒì„±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_network_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_network&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> = &lt;span class="s2">&amp;#34;opsathlan-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">scenario_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-network&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">admin_state_up&lt;/span> = &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">port_security_enabled&lt;/span> = &lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">port_security_enabled&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Subnet ìƒì„±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_subnet_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_subnet&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> = &lt;span class="s2">&amp;#34;opsathlan-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">scenario_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-subnet&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">network_id&lt;/span> = &lt;span class="nx">openstack_networking_network_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opsathlan_network&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">cidr&lt;/span> = &lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subnet_cidr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">ip_version&lt;/span> = &lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">dns_nameservers&lt;/span> = &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;8.8.8.8&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;8.8.4.4&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Router ìƒì„±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_router_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_router&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> = &lt;span class="s2">&amp;#34;opsathlan-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">scenario_id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-router&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">admin_state_up&lt;/span> = &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">external_network_id&lt;/span> = &lt;span class="nb">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">openstack_networking_network_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ext_network&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Router Interface ìƒì„±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_router_interface_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;router_interface&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">router_id&lt;/span> = &lt;span class="nx">openstack_networking_router_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opsathlan_router&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">subnet_id&lt;/span> = &lt;span class="nx">openstack_networking_subnet_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opsathlan_subnet&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ì¸ìŠ¤í„´ìŠ¤-ìƒì„±">ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
&lt;/h3>&lt;p>ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” keypairë¥¼ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Keypair ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_keypair_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_keypair&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;opsathlan-${var.scenario_id}-keypair&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">public_key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pubkey_file_path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Nova ì¸ìŠ¤í„´ìŠ¤ì˜ ì ‘ê·¼ ì œì–´ë¥¼ ê´€ë¦¬í•˜ëŠ” Security groupë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. security group ruleì€ &lt;code>variables.tf&lt;/code> ì—ì„œ ë¦¬ìŠ¤íŠ¸ë¡œ ë°›ì€ í›„ì— ì ìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Security Group ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_secgroup_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;opsathlan_secgroup&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;opsathlan-${var.scenario_id}-secgroup&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;OpsAthaln Security Group&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">delete_default_rules&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Security Group Rule ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_secgroup_rule_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;secgroup_rules&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">length&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">direction&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ingress&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ethertype&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;IPv4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;protocol&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;port_range_min&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;port_range_max&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">remote_ip_prefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lookup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">allowed_ports&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;remote_ip_prefix&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;0.0.0.0/0&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">security_group_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_networking_secgroup_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_secgroup&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>variables.tf&lt;/code> ì—ì„œëŠ” ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í¬íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>ssh&lt;/li>
&lt;li>spring boot application(8080)&lt;/li>
&lt;li>cAdvisor(8081)&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">variables&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">variable&lt;/span> &lt;span class="s2">&amp;#34;allowed_ports&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;List of maps defining allowed ports for the security group. Each map should include protocol, port_range_min, port_range_max, and optionally remote_ip_prefix.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">object&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">number&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">number&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">remote_ip_prefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">optional&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;0.0.0.0/0&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8081&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port_range_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">8081&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="floating-ip-í• ë‹¹-ë°-ì„¤ì •">Floating ip í• ë‹¹ ë° ì„¤ì •
&lt;/h3>&lt;p>floating ipë¥¼ ìƒì„±í•œ í›„ì— nova instanceì— ë¶™í™ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 5. Floating IP ìƒì„± ë° ì—°ê²°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_floatingip_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;floating_ip&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pool&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openstack_networking_network_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ext_network&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 4. Nova Instance ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_instance_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;nova_instance&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;opsathlan-${var.scenario_id}-instance&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">image_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flavor_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">flavor_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">key_pair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_compute_keypair_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_keypair&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">security_groups&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">openstack_networking_secgroup_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_secgroup&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">network&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">uuid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_networking_network_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_network&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">depends_on&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">openstack_networking_subnet_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opsathlan_subnet&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_compute_floatingip_associate_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;floating_ip_association&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">floating_ip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_networking_floatingip_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">floating_ip&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">address&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">instance_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">openstack_compute_instance_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nova_instance&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ansibleë¥¼-í™œìš©í•œ-í™˜ê²½-êµ¬ì„±-ë°-ì»¨í…Œì´ë„ˆ-ì‹¤í–‰">Ansibleë¥¼ í™œìš©í•œ í™˜ê²½ êµ¬ì„± ë° ì»¨í…Œì´ë„ˆ ì‹¤í–‰
&lt;/h2>&lt;p>Ansibleë¥¼ í™œìš©í•˜ì—¬ &lt;strong>ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³  ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆëŠ” í™˜ê²½ì„ êµ¬ì„±&lt;/strong>í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ 4ê°œì˜ roleë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>java ì„¤ì¹˜&lt;/li>
&lt;li>docker ì„¤ì¹˜&lt;/li>
&lt;li>springboot ì´ë¯¸ì§€ ë¹Œë“œ ë° ìˆ˜í–‰&lt;/li>
&lt;li>cAdvisor ì‹¤í–‰&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ğŸ¤” &lt;strong>ì—¬ë‹´&lt;/strong>&lt;/p>
&lt;p>Jenkinsì™€ ê°™ì´ ìë™í™” ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ ì´ˆë°˜ì—ëŠ” ë¶ˆí•„ìš”í•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ë°°í¬í•˜ê³ ì í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê·œëª¨ëŠ” í˜„ì €í•˜ê²Œ ì‘ì•˜ê³ , ë‚œì´ë„ê°€ ìˆì–´ ì˜ëª»í•˜ë©´ ì˜ˆìƒë³´ë‹¤ ì‹œê°„ì„ ë§ì´ í• ì• í•  ìˆ˜ ìˆë‹¤ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h3 id="spring-boot-application-ë°°í¬">spring boot application ë°°í¬
&lt;/h3>&lt;h4 id="application-ì†Œê°œ">application ì†Œê°œ
&lt;/h4>&lt;p>ë°°í¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ê°„ë‹¨í•˜ê²Œ hello worldë§Œ ë°˜í™˜í•˜ëŠ” ì›¹ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@RestController&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">EchoController&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@GetMapping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/echo&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">echo&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Hello, World!&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="ë¹Œë“œ-ë°-ì‹¤í–‰">ë¹Œë“œ ë° ì‹¤í–‰
&lt;/h4>&lt;p>Ansibleë¥¼ í™œìš©í•˜ì—¬ spring boot application ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ë•Œ ì»¨í…Œì´ë„ˆëŠ” 8080 ì™¸ë¶€ í¬íŠ¸ë¡œ ì—´ì–´ë‘¡ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;strong>ìˆœì„œ&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>Repository clone&lt;/li>
&lt;li>Spring boot application build&lt;/li>
&lt;li>Container Image build&lt;/li>
&lt;li>Docker ì‹¤í–‰&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Clone Spring Boot application repository&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">git&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">repo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;https://github.com/S0okJu/OpsAthlan.git&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">sc/1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build Spring Boot application using Gradle&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./gradlew clean build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">chdir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gradle_build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gradle_build.rc != 0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check if JAR file exists&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stat&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo/build/libs/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">jar_dir&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Fail if JAR file does not exist&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">fail&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">msg&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;JAR file was not built successfully.&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">jar_dir.stat.exists == False or jar_dir.stat.isdir == False&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Copy Dockerfile for Spring Boot&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">copy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Dockerfile&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo/Dockerfile&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build Docker image for Spring Boot application&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">echo-springboot-app&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tag&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">source&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/home/ubuntu/app/spring-boot-app/scenario_01/spring_echo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Run Spring Boot container&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_container&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">sc1-springboot-app&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">echo-springboot-app:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">started&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8080:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ìì„¸í•œ ì½”ë“œëŠ” &lt;a class="link" href="https://github.com/S0okJu/OpsAthlan/tree/sc/1/scenario_01/ansible" target="_blank" rel="noopener"
>github&lt;/a> ì°¸ê³  ë°”ëë‹ˆë‹¤.&lt;/p>
&lt;h3 id="cadvisor">cAdvisor
&lt;/h3>&lt;p>cAdvisorëŠ” ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ê³  ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆëŠ” 8081ë¡œ ì™¸ë¶€í¬íŠ¸ë¥¼ ì—´ì–´ ê°œë°œìê°€ ëŒ€ì‹œë³´ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pull cAdvisor image&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">google/cadvisor:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">source&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">pull&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Run cAdvisor container&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker_container&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">google/cadvisor:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">started&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;8081:8080&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/:/rootfs:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/run:/var/run:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/sys:/sys:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/lib/docker/:/var/lib/docker:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ì»¨í…Œì´ë„ˆ-ì§€í‘œ-ëª¨ë‹ˆí„°ë§">ì»¨í…Œì´ë„ˆ ì§€í‘œ ëª¨ë‹ˆí„°ë§
&lt;/h2>&lt;h3 id="cadvisor-ì ‘ì†">cAdvisor ì ‘ì†
&lt;/h3>&lt;p>{floating_ip}:8081ì— ì ‘ì†í•©ë‹ˆë‹¤.
container ì°½ì— ë“¤ì–´ê°€ springboot applicationì„ í™•ì¸í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-1.png"
width="1121"
height="383"
srcset="https://s0okju.github.io/p/opsathlan-1/image-1_hu17233539446044340175.png 480w, https://s0okju.github.io/p/opsathlan-1/image-1_hu15492907668946311809.png 1024w"
loading="lazy"
alt="cAdvisor ì ‘ì†"
class="gallery-image"
data-flex-grow="292"
data-flex-basis="702px"
> &lt;img src="https://s0okju.github.io/p/opsathlan-1/image-2.png"
width="945"
height="277"
srcset="https://s0okju.github.io/p/opsathlan-1/image-2_hu12196910689812903337.png 480w, https://s0okju.github.io/p/opsathlan-1/image-2_hu12612396427406138621.png 1024w"
loading="lazy"
alt="cAdvisorì—ì„œ í™•ì¸í•œ ì»¨í…Œì´ë„ˆ ëª©ë¡"
class="gallery-image"
data-flex-grow="341"
data-flex-basis="818px"
>&lt;/p>
&lt;p>springboot applicationì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ì§€í‘œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-3.png"
width="1096"
height="389"
srcset="https://s0okju.github.io/p/opsathlan-1/image-3_hu11513109730994844133.png 480w, https://s0okju.github.io/p/opsathlan-1/image-3_hu14892486148299863558.png 1024w"
loading="lazy"
alt="cAdvisorì—ì„œ í™•ì¸í•œ ë©”íŠ¸ë¦­"
class="gallery-image"
data-flex-grow="281"
data-flex-basis="676px"
>&lt;/p>
&lt;h3 id="test">Test
&lt;/h3>&lt;p>ìì²´ì ìœ¼ë¡œ ë§Œë“  test ë„êµ¬ì¸ &lt;a class="link" href="https://github.com/S0okJu/GoNetWorker" target="_blank" rel="noopener"
>gonetworker&lt;/a>ë¥¼ í™œìš©í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>GoNetWorker&lt;/strong>&lt;/p>
&lt;p>ìì²´ì ìœ¼ë¡œ ë§Œë“  ë„¤íŠ¸ì›Œí¬ í…ŒìŠ¤íŠ¸ ë„êµ¬ì…ë‹ˆë‹¤. ì„œë²„ì— requestë¥¼ ì—°ì†ì—ì„œ ìš”ì²­í•œë‹¤ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>ë¸”ë¡œê·¸ ì‘ì„± ê¸°ì¤€ GoNetWorkerëŠ” ë™ì‹œë¡œ ì „ì†¡í•˜ëŠ” ê¸°ëŠ¥ì´ ì—†ì–´ &lt;strong>ìˆœì°¨ì ìœ¼ë¡œ requestë¥¼ ìš”ì²­&lt;/strong>í•©ë‹ˆë‹¤. request ìš”ì²­ ì´í›„ ë¬´ì‘ìœ„ë¡œ sleepí•©ë‹ˆë‹¤. ì—°ì†ì ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ ê²ƒì´ë¼ê³  ì˜ˆìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h4 id="network">Network
&lt;/h4>&lt;p>ë„¤íŠ¸ì›Œí¬ ì²˜ë¦¬ìœ¨ì„ ë³´ë©´ ì²˜ë¦¬ê°€ ë˜ì—ˆë‹¤ê°€ 0byteë¡œ ë–¨ì–´ì¡Œë‹¤ê°€ ë‹¤ì‹œ ìƒìŠ¹í•©ë‹ˆë‹¤. ì´ëŠ” ì €í¬ê°€ ì‚¬ìš©í•œ ë„êµ¬ì¸ GoNetWorkerì˜ íŠ¹ì§• ë•Œë¬¸ì— ë°œìƒí•œ ê·¸ë˜í”„ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-4.png"
width="665"
height="330"
srcset="https://s0okju.github.io/p/opsathlan-1/image-4_hu296061120735338974.png 480w, https://s0okju.github.io/p/opsathlan-1/image-4_hu9681598494445371367.png 1024w"
loading="lazy"
alt="Springboot application bytes per second"
class="gallery-image"
data-flex-grow="201"
data-flex-basis="483px"
>&lt;/p>
&lt;p>ê·¸ ì´ì™¸ì—ë„ ì•„ë˜ì™€ ê°™ì€ íŠ¹ì§•ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>í‰ê· ì ìœ¼ë¡œ 1200bytesë¥¼ ë„˜ì–´ê°€ì§€ ì•ŠëŠ”ë‹¤.&lt;/li>
&lt;/ul>
&lt;h4 id="memory">Memory
&lt;/h4>&lt;p>ê·¸ì— ë¹„í•´ memoryëŠ” ì ì§„ì ìœ¼ë¡œ ìƒìŠ¹í•˜ëŠ” ê·¸ë˜í”„ë¥¼ ë³´ì—¬ì£¼ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë˜í”„ë¥¼ ë³´ë‹ˆ &lt;strong>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¶ˆí•„ìš”í•œ ë©”ëª¨ë¦¬ ìì›ì„ ë‚­ë¹„í•œë‹¤&lt;/strong>ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/opsathlan-1/image-5.png"
width="685"
height="394"
srcset="https://s0okju.github.io/p/opsathlan-1/image-5_hu14895577820262148279.png 480w, https://s0okju.github.io/p/opsathlan-1/image-5_hu8570481994504803877.png 1024w"
loading="lazy"
alt="Springboot applicationì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰"
class="gallery-image"
data-flex-grow="173"
data-flex-basis="417px"
>&lt;/p>
&lt;p>ì›ì¸ì„ êµ¬ì²´ì ìœ¼ë¡œ íŒŒì•…í•˜ê¸° ìœ„í•´ì„œëŠ” springbootì— ëŒ€í•œ ë©”íŠ¸ë¦­ì´ í•„ìš”í•©ë‹ˆë‹¤. cAdvisor ë§Œìœ¼ë¡œëŠ” ì •êµí•œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ì— í•œê³„ê°€ ìˆìœ¼ë¯€ë¡œ í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ í™œìš©í•´ì•¼ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ë‹¤ìŒí¸ì—ëŠ”-">ë‹¤ìŒí¸ì—ëŠ” &amp;hellip;
&lt;/h2>&lt;p>ë‹¤ìŒ í¸ì—ëŠ” í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ springboot ê´€ë ¨ ë©”íŠ¸ë¦­ìŠ¤ë¥¼ ìˆ˜ì§‘í•˜ê³  ë¬¸ì œë¥¼ í•´ê²°í•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p></description></item><item><title>Openstack - Kubesprayë¥¼ í™œìš©í•œ Kubernetes ì„¤ì¹˜ ì‹œ Ansible ì˜¤ë¥˜</title><link>https://s0okju.github.io/p/openstack-kubernetes-installation-2/</link><pubDate>Sat, 17 Aug 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/openstack-kubernetes-installation-2/</guid><description>&lt;p>Kubernetes ì„¤ì¹˜ëŠ” &lt;a class="link" href="https://velog.io/@jaehan/Openstack-%EA%B8%B0%EB%B0%98-Kubernets-%EA%B5%AC%EC%B6%95-with-Kubespray" target="_blank" rel="noopener"
>ë³€ì¬í•œë‹˜ì˜ ë¸”ë¡œê·¸&lt;/a>ë¥¼ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="ansible-ping-ë¬¸ì œ">Ansible Ping ë¬¸ì œ
&lt;/h2>&lt;p>Ansible Ping ìˆ˜í–‰ ì‹œ ëª¨ë“  ë…¸ë“œì— ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤. ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ í™•ì¸í•´ë³´ë‹ˆ ssh í‚¤ê°€ ì œëŒ€ë¡œ ì ìš©ë˜ì§€ ì•Šì€ ê²ƒì²˜ëŸ¼ ë³´ì˜€ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Kubernetes-k8s-node-nf-2 | UNREACHABLE! =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;changed&amp;#34;: false,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;msg&amp;#34;: &amp;#34;Data could not be sent to remote host \&amp;#34;10.0.2.176\&amp;#34;. Make sure this host can be reached over ssh: kex_exchange_identification: Connection closed by remote host\r\nConnection closed by UNKNOWN port 65535\r\n&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;unreachable&amp;#34;: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>Ansibleì€ sshë¥¼ í™œìš©í•˜ì—¬ target ë…¸ë“œì™€ í†µì‹ í•œë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h3 id="í•´ê²°ì±…-1-ê³µê°œí‚¤-ì•Œê³ ë¦¬ì¦˜-ë³€ê²½">í•´ê²°ì±… 1. ê³µê°œí‚¤ ì•Œê³ ë¦¬ì¦˜ ë³€ê²½
&lt;/h3>&lt;p>openstack logë¥¼ í™•ì¸í•´ë³´ë‹ˆ debian imageì— ê³µê°œí‚¤ê°€ authorized_keysì— ì œëŒ€ë¡œ ë³µì‚¬ë˜ì§€ ì•Šì•„ ssh í†µì‹ ì„ ì œëŒ€ë¡œ ìˆ˜í–‰í•˜ì§€ ëª»í•œ ê²ƒì´ì—ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img1.png"
width="608"
height="123"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img1_hu4758531342135746087.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img1_hu18028352303563241942.png 1024w"
loading="lazy"
alt="publickeyê°€ ì œëŒ€ë¡œ ë³µì‚¬ë˜ì§€ ì•Šì€ ê²½ìš° instance log"
class="gallery-image"
data-flex-grow="494"
data-flex-basis="1186px"
>&lt;/p>
&lt;p>ssh í‚¤ë¥¼ ed25519 ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ìƒì„±í•˜ë©´ í‚¤ê°€ ì œëŒ€ë¡œ ë³µì‚¬ë˜ì§€ ì•Šì•˜ì§€ë§Œ rsaë¡œ ë³€ê²½í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ í‚¤ê°€ ë³µì‚¬ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img2.png"
width="1135"
height="149"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img2_hu17931454363939670103.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img2_hu11759902572458053645.png 1024w"
loading="lazy"
alt="publickeyê°€ ì œëŒ€ë¡œ ë³€ê²½ëœ ëª¨ìŠµ"
class="gallery-image"
data-flex-grow="761"
data-flex-basis="1828px"
>&lt;/p>
&lt;blockquote>
&lt;p>ë³´ì•ˆì„ ê³ ë ¤í•˜ë©´ rsaë³´ë‹¤ëŠ” ed25519 ì•Œê³ ë¦¬ì¦˜ì´ ê¶Œì¥ëœë‹¤.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;/blockquote>
&lt;p>ë‹¤ì‹œ pingì„ ìˆ˜í–‰í•˜ë©´ ì œëŒ€ë¡œ ìˆ˜í–‰ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img3.png"
width="831"
height="784"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img3_hu17806257454344620510.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img3_hu12260926215604726165.png 1024w"
loading="lazy"
alt="Ansible ping ì„±ê³µ"
class="gallery-image"
data-flex-grow="105"
data-flex-basis="254px"
>&lt;/p>
&lt;h3 id="í•´ê²°ì±…-2-ssh-agent-ì‹¤í–‰">í•´ê²°ì±… 2. ssh-agent ì‹¤í–‰
&lt;/h3>&lt;p>ë§Œì•½ì— ì›ê²©ìœ¼ë¡œ openstack ì„œë²„ì— ì ‘ì†í•œë‹¤ê³  ê°€ì •í•´ë³´ì. ì‚¬ìš©ìë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ì„¸ì…˜ì„ í•œë²ˆ ëŠê²Œ ë˜ë©´ ë™ì¼í•œ ì´ìœ ë¡œ ë¬¸ì œê°€ ìƒê¸´ë‹¤.&lt;/p>
&lt;p>ìš°ì„  ìš°ë¦¬ê°€ ì´ˆê¸°ì— ansibleë¥¼ ì„¸íŒ…í•  ë•Œ ssh-agentë¥¼ ì‹¤í–‰í•˜ê³  private keyë¥¼ ì¶”ê°€í•˜ëŠ” ì‘ì—…ì„ í•œë‹¤. ssh-agentëŠ” ssh-add ëª…ë ¹ì–´ë¥¼ í™œìš©í•˜ì—¬ í‚¤ë¥¼ ê¸°ì–µí•˜ê³  ì‚¬ìš©í•˜ê²Œ ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ë°±ê·¸ë¼ìš´ë“œì— agent ì‹¤í–‰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eval &amp;#34;$(ssh-agent -s)&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># í‚¤ ì¶”ê°€
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-add ~/.ssh/id_rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ssh-agentëŠ” í”„ë¡œì„¸ìŠ¤ë¡œì¨ ì‘ë™ë¼ ì¤‘ê°„ì— sshê°€ ì¤‘ë‹¨ë˜ë”ë¼ë„ í”„ë¡œì„¸ìŠ¤ê°€ ë‚¨ì•„ìˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ &lt;strong>í˜„ì¬ ì‚¬ìš©ì(stack)ê°€ ì‹¤í–‰ì‹œí‚¨ í”„ë¡œì„¸ìŠ¤ë¥¼ ë¨¼ì € ì—†ì• ê³  ssh-agentë¥¼ ì‹¤í–‰ì‹œí‚¤ë„ë¡ êµ¬í˜„&lt;/strong>í•˜ë©´ ëœë‹¤.&lt;/p>
&lt;p>openstackì€ stack ì‚¬ìš©ìê°€ ê´€ë¦¬í•œë‹¤. stack ì‚¬ìš©ìì˜ &lt;code>~/.bashrc&lt;/code> ì— ssh-agentë¥¼ ì¶”ê°€í•˜ì—¬ stack ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸ ì„±ê³µí• ë•Œë§ˆë‹¤ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Ansible ssh agent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Delete used ssh-agent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f ~/scripts/delete_ssh_agent.sh &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> . ~/scripts/delete_ssh_agent.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Create new ssh-agent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">eval&lt;/span> &lt;span class="k">$(&lt;/span>ssh-agent -s&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-add ~/.ssh/id_rsa.kubespray
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>delete_ssh_agent.sh&lt;/code> ì€ openstackì„ ê´€ë¦¬í•˜ëŠ” ì‚¬ìš©ì(stack)ê°€ ê°€ì§€ê³  ìˆëŠ” ssh-agentë¥¼ ì‚­ì œí•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ì´ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Get all PIDs of ssh-agent processes owned by the user &amp;#39;stack&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">pids&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>pgrep -u stack ssh-agent&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Check if any PIDs were found&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -z &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$pids&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;No ssh-agent processes found for user &amp;#39;stack&amp;#39;.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Loop through each PID and attempt to kill the process&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> pid in &lt;span class="nv">$pids&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Killing ssh-agent process with PID &lt;/span>&lt;span class="nv">$pid&lt;/span>&lt;span class="s2">...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">kill&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$pid&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Check if the process was successfully killed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> pgrep -u stack -x ssh-agent &amp;gt; /dev/null&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Failed to kill process with PID &lt;/span>&lt;span class="nv">$pid&lt;/span>&lt;span class="s2">. You may need to use sudo.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Successfully killed process with PID &lt;/span>&lt;span class="nv">$pid&lt;/span>&lt;span class="s2">.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ìƒˆë¡­ê²Œ ì ‘ì†í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img7.png"
width="610"
height="92"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img7_hu10470244405540726725.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img7_hu12211404007100571060.png 1024w"
loading="lazy"
alt="stack login ì„±ê³µ"
class="gallery-image"
data-flex-grow="663"
data-flex-basis="1591px"
>&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img8.png"
width="723"
height="67"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img8_hu7155961518869793814.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img8_hu3663118609567118447.png 1024w"
loading="lazy"
alt="ssh-agent í”„ë¡œì„¸ìŠ¤ í™•ì¸"
class="gallery-image"
data-flex-grow="1079"
data-flex-basis="2589px"
>&lt;/p>
&lt;blockquote>
&lt;p>ì´ ë°©ì‹ì€ ë‹¨ì¼ ì‚¬ìš©ìë§Œ ê´€ë¦¬í•œë‹¤ëŠ” ê°€ì •í•˜ì—ì„œ ë§Œë“  í•´ê²°ì±…ì´ë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h2 id="nameserver-ë¬¸ì œ">Nameserver ë¬¸ì œ
&lt;/h2>&lt;p>playbookë¥¼ ë°°í¬í•´ë³´ì.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ansible-playbook --become -i inventory/test-cluster/hosts cluster.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>nameserverë¡œ ì¸í•´ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤. ë³´í†µ ì´ëŸ° ë¬¸ì œëŠ” nameserverì˜ ì„¤ì •ì´ ì˜ëª»ëœ ê²½ìš°ì— ë°œìƒë˜ë©° ì•ˆì „í•œ google dns(8.8.8.8, 8.8.4.4)ë¡œ ì„¤ì •í•˜ë©´ í•´ê²°ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> &amp;#34;msg&amp;#34;: &amp;#34;E: Failed to fetch http://security.debian.org/debian-security/pool/updates/main/p/python-apt/python-apt-common_1.8.4.3_all.deb Temporary failure resolving &amp;#39;deb.debian.org&amp;#39;\nE: Failed to fetch http://security.debian.org/debian-security/pool/updates/main/p/python-apt/python3-apt_1.8.4.3_amd64.deb Temporary failure resolving &amp;#39;deb.debian.org&amp;#39;\nE: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?&amp;#34;,
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="í•´ê²°ì±…-1-resolvconf-ìˆ˜ì •ì˜ëª»ëœ-ì ‘ê·¼">í•´ê²°ì±… 1. resolv.conf ìˆ˜ì •(ì˜ëª»ëœ ì ‘ê·¼)
&lt;/h3>&lt;p>DNSë¥¼ ì„¤ì •í•˜ëŠ” &lt;code>resolv.conf&lt;/code> ë¥¼ í™•ì¸í•´ë³´ë©´ 127.0.0.53ë¡œ ì„¤ì •ë˜ì–´ ìˆë‹¤. ì•ˆì „í•˜ê²Œ google dns ì„œë²„ë¡œ ë³€ê²½í•´ë³´ì&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nameserver 127.0.0.53
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì‹¤ì œë¡œëŠ” &lt;strong>ìš°ë¦¬ê°€ ì§ì ‘ ë³€ê²½í•˜ë©´ ì•ˆëœë‹¤.&lt;/strong>&lt;/p>
&lt;blockquote>
&lt;p>DO NOT EDIT THIS FILE BY HAND &amp;ndash; YOUR CHANGES WILL BE OVERWRITTEN&lt;/p>
&lt;/blockquote>
&lt;p>resolv.confì€ /run í´ë” ë‚´ì— ì‹¬ë³¼ë§ ë§í¬ê°€ ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë§ˆìŒëŒ€ë¡œ ìˆ˜ì •í•˜ëŠ” ê²ƒì€ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img4.png"
width="945"
height="89"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img4_hu14791507789255162482.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img4_hu17658926328053728254.png 1024w"
loading="lazy"
alt="resolv.conf ì‹¬ë³¼ë¦­ ë§í¬"
class="gallery-image"
data-flex-grow="1061"
data-flex-basis="2548px"
>&lt;/p>
&lt;p>ì‹¤ì œë¡œ &lt;a class="link" href="https://libguestfs.org/virt-customize.1.html" target="_blank" rel="noopener"
>virt-customize&lt;/a> ë¥¼ í™œìš©í•´ì„œ resolv.confë¥¼ ìˆ˜ì •í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ ë³„ë„ë¡œ ë§Œë“¤ì—ˆì§€ë§Œ ì˜ë¯¸ê°€ ì—†ì—ˆë‹¤.&lt;/p>
&lt;h3 id="í•´ê²°ì±…-2-terraform-ìˆ˜ì •">í•´ê²°ì±… 2. Terraform ìˆ˜ì •
&lt;/h3>&lt;p>ê°€ì¥ ì•ˆì „í•œ ì ‘ê·¼ë²•ì´ë‹¤.
ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€ë¥¼ ë³´ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ ë…¸ë“œë“¤ì´ kubernetes-network subnetë¥¼ í™œìš©í•œë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img5.png"
width="809"
height="609"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img5_hu16936197825592757140.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img5_hu8815827593228135667.png 1024w"
loading="lazy"
alt="kubernetes ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€"
class="gallery-image"
data-flex-grow="132"
data-flex-basis="318px"
>&lt;/p>
&lt;p>Openstackì˜ subnetì— DNS nameserverë¥¼ ëª…ì‹œí•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ Openstack ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°°í¬í•˜ëŠ” terraform íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤.
&lt;code>~/kubespray/contrib/terraform/openstack/modules/network/main.tf&lt;/code> ë‚´ì— &lt;code>dns_nameservers&lt;/code> ë¥¼ google dnsë¡œ ë³€ê²½ì‹œí‚¨ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-tf" data-lang="tf">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">resource&lt;/span> &lt;span class="s2">&amp;#34;openstack_networking_subnet_v2&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;k8s&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> = &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cluster_name&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">-internal-network&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">count&lt;/span> = &lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">use_neutron&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">network_id&lt;/span> = &lt;span class="nx">openstack_networking_network_v2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">k8s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">count&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">cidr&lt;/span> = &lt;span class="nb">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">subnet_cidr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">ip_version&lt;/span> = &lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">dns_nameservers&lt;/span> = &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;8.8.8.8&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;8.8.4.4&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì›ë˜ë¼ë©´ variables.tfë¥¼ ìˆ˜ì •í•´ì•¼ í–ˆì§€ë§Œ ì œëŒ€ë¡œ ì ìš©ì´ ë˜ì§€ ì•Šì•˜ê³ , google dns serverëŠ” ê±°ì˜ ë¶ˆë³€ì— ê°€ê¹ê¸° ë•Œë¬¸ì— main.tfì— ì§ì ‘ ì‘ì„±í•´ë„ ëœë‹¤ê³  íŒë‹¨í–ˆë‹¤.&lt;/p>
&lt;p>ì•„ë˜ì™€ ê°™ì´ ì œëŒ€ë¡œ ì ìš©ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img6.png"
width="522"
height="322"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img6_hu15219951955343804185.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img6_hu17687434228084671215.png 1024w"
loading="lazy"
alt="dns nameserver ì„±ê³µ"
class="gallery-image"
data-flex-grow="162"
data-flex-basis="389px"
>&lt;/p>
&lt;h2 id="ê·¸-ì´ì™¸ì˜-debian-ë¬¸ì œë“¤">ê·¸ ì´ì™¸ì˜ debian ë¬¸ì œë“¤
&lt;/h2>&lt;p>ê·¸ ì´í›„ë¶€í„° debianì—ëŠ” ì¡ë‹¤í•œ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img9.png"
width="1036"
height="237"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-2/img9_hu7883906071781436747.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-2/img9_hu9099882195059677338.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="437"
data-flex-basis="1049px"
>&lt;/p>
&lt;h3 id="í•´ê²°ì±…-1-í´ë¼ìš°ë“œ-ì´ë¯¸ì§€ë¥¼-ubuntuë¡œ-ë³€ê²½">í•´ê²°ì±… 1. í´ë¼ìš°ë“œ ì´ë¯¸ì§€ë¥¼ ubuntuë¡œ ë³€ê²½
&lt;/h3>&lt;p>í´ë¼ìš°ë“œ ì´ë¯¸ì§€ë¥¼ debianì—ì„œ ubuntuë¡œ ë³€ê²½í–ˆë‹¤. ssh í‚¤ë¥¼ ed25519 ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì ìš©í•´ë„ ì •ìƒì ìœ¼ë¡œ ì‘ë™ëœë‹¤.
Ansible playbookë¥¼ ì‘ë™ì‹œí‚¤ë©´ ì •ìƒì ìœ¼ë¡œ kubernetesê°€ ë°°í¬ëœë‹¤.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://dev.to/ccoveille/how-to-generate-a-secure-and-robust-ssh-key-in-2024-3f4f" target="_blank" rel="noopener"
>https://dev.to/ccoveille/how-to-generate-a-secure-and-robust-ssh-key-in-2024-3f4f&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://askubuntu.com/questions/351168/diffrence-between-the-dns-setting-in-etc-resolv-conf-and-etc-network-interfaces" target="_blank" rel="noopener"
>https://askubuntu.com/questions/351168/diffrence-between-the-dns-setting-in-etc-resolv-conf-and-etc-network-interfaces&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Openstack - Kubesprayë¥¼ í™œìš©í•œ Kubernetes ì„¤ì¹˜ ì‹œ Terraform ì˜¤ë¥˜</title><link>https://s0okju.github.io/p/openstack-kubernetes-installation-1/</link><pubDate>Thu, 01 Aug 2024 00:00:00 +0000</pubDate><guid>https://s0okju.github.io/p/openstack-kubernetes-installation-1/</guid><description>&lt;h2 id="openstack-ì„¤ì¹˜">Openstack ì„¤ì¹˜
&lt;/h2>&lt;p>&lt;a class="link" href="https://velog.io/@im2sh/Ubuntu-22.04%EC%97%90%EC%84%9C-Devstack-%EC%84%A4%EC%B9%98" target="_blank" rel="noopener"
>im2sh.log velog&lt;/a>ì„ ì°¸ê³ í•´ì„œ Devstackì„ í™œìš©í•´ Openstackì„ ì„¤ì¹˜í•˜ë©´ ëœë‹¤. ë‹¤ë§Œ ë¡œì»¬ í™˜ê²½ì—ì„œë§Œ ìˆ˜í–‰í•  ì˜ˆì •ì´ë¯€ë¡œ ê°€ìƒ public ip ëŒ€ì—­ ìƒì„±ì€ ì œì™¸í–ˆë‹¤.&lt;/p>
&lt;h3 id="ì´ë¯¸ì§€-ìƒì„±">ì´ë¯¸ì§€ ìƒì„±
&lt;/h3>&lt;p>Novaì— ì˜¬ë¦° ì´ë¯¸ì§€ë¥¼ ìƒì„±í•œë‹¤. Ubuntuë³´ë‹¤ Debianì´ ê°€ë³ê³  ì»¤ìŠ¤í…€í•˜ê¸° ìš©ì´í•´ì„œ ì„ íƒ&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>í•˜ê²Œ ë˜ì—ˆë‹¤.
ì•„ë˜ì˜ ëª…ë ¹ì–´ëŠ” &lt;a class="link" href="https://cloud.debian.org/cdimage/cloud/OpenStack/current-10/" target="_blank" rel="noopener"
>debian ê³µì‹ í™ˆí˜ì´ì§€&lt;/a>ë¥¼ ì°¸ê³ í–ˆë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">wget https://cloud.debian.org/cdimage/cloud/OpenStack/current-10/debian-10-openstack-amd64.qcow2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openstack image create &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --container-format bare &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --disk-format qcow2 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --file debian-10-openstack-amd64.qcow2 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> debian-10-openstack-amd64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>dashboardë¥¼ ë³´ë©´ ì •ìƒì ìœ¼ë¡œ ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œëœ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img1.png"
width="423"
height="236"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img1_hu8436946750979996299.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img1_hu306546544194277109.png 1024w"
loading="lazy"
alt="horizonì—ì„œ í™•ì¸í•œ ì´ë¯¸ì§€"
class="gallery-image"
data-flex-grow="179"
data-flex-basis="430px"
>&lt;/p>
&lt;h2 id="kubesprayë¥¼-í™œìš©í•œ-kubernetes-êµ¬ì¶•">Kubesprayë¥¼ í™œìš©í•œ Kubernetes êµ¬ì¶•
&lt;/h2>&lt;ul>
&lt;li>OS - Ubuntu 24.04&lt;/li>
&lt;li>Openstack - 2024.1&lt;/li>
&lt;li>Kubespray - v2.21.0&lt;/li>
&lt;li>Terraform - v1.9.3&lt;/li>
&lt;/ul>
&lt;p>ì „ë°˜ì ì¸ ì„¤ì¹˜ ê³¼ì •ì€ &lt;a class="link" href="https://velog.io/@jaehan/Openstack-%EA%B8%B0%EB%B0%98-Kubernets-%EA%B5%AC%EC%B6%95-with-Kubespray" target="_blank" rel="noopener"
>ë³€ì¬í•œë‹˜ì˜ velog&lt;/a>ë¥¼ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>openstack v2, v3 APIëŠ” ë‹¤ë¥¸ì ì´ ë§ìŠµë‹ˆë‹¤. ë§Œì•½ì— v2 ë²„ì „ìœ¼ë¡œ í•˜ê³  ì‹¶ë‹¤ë©´ ìš´ì˜ì²´ì œì™€ kubespray, terraform ë²„ì „ì„ ë§ì¶”ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;h3 id="ssh-í†µì‹ ì„-ìœ„í•œ-ê³µê°œí‚¤-ìƒì„±">ssh í†µì‹ ì„ ìœ„í•œ ê³µê°œí‚¤ ìƒì„±
&lt;/h3>&lt;p>ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ ì„¤ì •ì„ ìœ„í•´ Ansibleë¥¼ ì‚¬ìš©í•œë‹¤. Ansibleì€ sshë¥¼ í™œìš©í•˜ì—¬ ëŒ€ìƒì— ì ‘ì†í•  ìˆ˜ ìˆë‹¤. ì´ í‚¤ëŠ” ì¶”í›„ Kubernetesì—ì„œ ë…¸ë“œë¼ë¦¬ í†µì‹ í•  ìˆ˜ ìˆëŠ” openstackì˜ keypairë¡œì¨ í™œìš©ëœë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ssh-keygen -t ed25519 -N &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span> -f ~/.ssh/id_rsa.kubespray
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">eval&lt;/span> &lt;span class="k">$(&lt;/span>ssh-agent -s&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-add ~/.ssh/id_rsa.kubespray
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ì˜¤ë¥˜---one-of-auth_url-or-cloud-must-be-specified">ì˜¤ë¥˜ - One of auth_url or cloud must be specified
&lt;/h2>&lt;p>ê²°ë¡ ë¶€í„° ë§í•˜ìë©´ í´ë¼ì´ì–¸íŠ¸ì™€ ê´€ë ¨ëœ í™˜ê²½ ë³€ìˆ˜ê°€ ì €ì¥ë˜ì§€ ì•Šì•„ì„œ ìƒê¸´ ì¼ì´ë‹¤.&lt;/p>
&lt;h3 id="í•´ê²°-ê³¼ì •">í•´ê²° ê³¼ì •
&lt;/h3>&lt;p>ì•„ë˜ì˜ ì˜¤ë¥˜ë¥¼ ì½ì–´ë³´ë©´ openstackì˜ providerë¥¼ ì •ì˜í•˜ëŠ” tfíŒŒì¼ì— ì†ì„±ì´ ì •ì˜ë˜ì–´ ìˆì§€ ì•Šë‹¤ê³  í•œë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img2.png"
width="890"
height="330"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img2_hu8112429072468131913.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img2_hu4805894429976019059.png 1024w"
loading="lazy"
alt="kubernetes ì„¤ì¹˜ ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜"
class="gallery-image"
data-flex-grow="269"
data-flex-basis="647px"
>&lt;/p>
&lt;p>&lt;code>~/kubespray/contrib/terraform/openstack/version.tf&lt;/code> ë¥¼ ë³´ë©´ providerê°€ ì •ì˜ë˜ì–´ ìˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img4.png"
width="536"
height="172"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img4_hu16157272428307913724.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img4_hu4644667792578589037.png 1024w"
loading="lazy"
alt="~/kubespray/contrib/terraform/openstack/version.tf"
class="gallery-image"
data-flex-grow="311"
data-flex-basis="747px"
>&lt;/p>
&lt;p>&lt;a class="link" href="https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.54.1/docs" target="_blank" rel="noopener"
>ê³µì‹ í™ˆí˜ì´ì§€&lt;/a>ë¥¼ ë³´ë©´ ì„¤ì •ê°’ì„ ì¶”ê°€í•  ìˆ˜ ìˆëŠ”ë° ì „ë¶€ë‹¤ ì„ íƒì‚¬í•­ì´ì§€ë§Œ &lt;strong>Openstack ì„¤ì •ê³¼ ê´€ë ¨ í™˜ê²½ë³€ìˆ˜ê°€ ë°˜ë“œì‹œ ì €ì¥&lt;/strong>ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ terraformì— ë³„ë„ë¡œ ì„¤ì •í•´ì•¼ í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Configure the OpenStack Provider
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">provider&lt;/span> &lt;span class="s2">&amp;#34;openstack&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> user_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;admin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> tenant_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;admin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;pwd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> auth_url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;http://myauthurl:5000/v3&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> region&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;RegionOne&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì¦‰ ìœ„ì™€ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•œ ê²ƒì€ í´ë¼ì´ì–¸íŠ¸ì™€ identity ì„œë¹„ìŠ¤ê°€ ìƒí˜¸ ì‘ìš©ì„ ìœ„í•œ í™˜ê²½ ë³€ìˆ˜ê°€ ì—†ì–´ì„œ ìƒê¸´ ì¼ì¸ ê²ƒì´ë‹¤.&lt;/p>
&lt;p>ë‹¤ë§Œ ìˆ˜ë™ìœ¼ë¡œ terraform íŒŒì¼ì— ì‘ì„±í•˜ê±°ë‚˜ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ê²Œ ë˜ë©´ Domain ì •ë³´ê°€ ë¶€ì •í™•í•˜ë‹¤ëŠ” ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë§ˆì£¼í•  ìˆ˜ ìˆë‹¤. openstack ë²„ì „ì— ë”°ë¼ì„œ ì§€ì›í•˜ëŠ” í™˜ê²½ ë³€ìˆ˜ë„ ë‹¤ë¥´ê±°ë‚˜, ê°™ì€ ì¡°ê±´ì— ì‚¬ëŒë§ˆë‹¤ ì‹¤í–‰ ê°€ëŠ¥ ì—¬ë¶€ê°€ ë‹¤ë¥¸ ë“± ë³µí•©ì ì¸ ì´ìœ ê°€ ì¡´ì¬í•œ ê²ƒ ê°™ì•˜ë‹¤.&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img3.png"
width="937"
height="174"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img3_hu632953552256688832.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img3_hu14362972865709894107.png 1024w"
loading="lazy"
alt="Invalid DomainID ì˜¤ë¥˜"
class="gallery-image"
data-flex-grow="538"
data-flex-basis="1292px"
>&lt;/p>
&lt;h3 id="í•´ê²°ì±…">í•´ê²°ì±…
&lt;/h3>&lt;p>Openstackì—ì„œ ì œê³µí•´ì£¼ëŠ” &lt;a class="link" href="https://docs.openstack.org/liberty/ko_KR/install-guide-obs/keystone-openrc.html" target="_blank" rel="noopener"
>í´ë¼ì´ì–¸íŠ¸ í™˜ê²½ ìŠ¤í¬ë¦½íŠ¸(openrc)&lt;/a>ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.&lt;/p>
&lt;p>horizonì— ì‚¬ìš©ìë¥¼ í´ë¦­í•˜ë©´ openstack rc íŒŒì¼ì´ ìˆëŠ”ë°, ì´ë¥¼ ë‹¤ìš´ë¡œë“œí•´ì„œ ì‹¤í–‰ì‹œí‚¤ë©´ ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img5.png"
width="266"
height="290"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img5_hu17918533465447343406.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img5_hu12890130444991611744.png 1024w"
loading="lazy"
alt="horizonì—ì„œ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥í•œ OpenStack RC íŒŒì¼"
class="gallery-image"
data-flex-grow="91"
data-flex-basis="220px"
>&lt;/p>
&lt;p>Linuxì—ì„œ í™˜ê²½ ë³€ìˆ˜ëŠ” bashë¥¼ exití•˜ëŠ” ìˆœê°„ ì‚¬ë¼ì§„ë‹¤.&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup> ì»´í“¨í„°ê°€ í•œë²ˆ êº¼ì§€ê²Œ ë˜ë©´ openrc ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê³„ì† ì‹¤í–‰ì‹œì¼œì¤˜ì•¼ í•œë‹¤.
í™˜ê²½ë³€ìˆ˜ë¥¼ ì˜ì†ì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ë°©ë²•ì€ &lt;code>~/.bashrc&lt;/code>ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì´ë‹¤. ë‹¤ìš´ë¡œë“œí•œ rc íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ë„ë¡ íŒŒì¼ì„ ì„¤ì •í•œë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f ~/rc/k8s-openrc.sh &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> . ~/rc/k8s-openrc.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ì¤‘ê°„ì— ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥ ë°›ì•„ì•¼ í•˜ë¯€ë¡œ openrc ìŠ¤í¬ë¦½íŠ¸ì— ë¹„ë°€ë²ˆí˜¸ë¥¼ ë„£ëŠ”ë‹¤. ê°œì¸ì ìœ¼ë¡œ ì´ëŸ° ë°©ë²•ì€ ë³´ì•ˆ ì¸¡ë©´ì—ì„œëŠ” ì¢‹ì§€ ì•Šì•„ ë³´ì¸ë‹¤.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">OS_USERNAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;k8s&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># With Keystone you pass the keystone password.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># echo &amp;#34;Please enter your OpenStack Password for project $OS_PROJECT_NAME as user $OS_USERNAME: &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># read -sr OS_PASSWORD_INPUT&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">OS_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;yourpassword&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>source ~/.bashrc&lt;/code>ë¥¼ ìˆ˜í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ í™˜ê²½ ë³€ìˆ˜ê°€ ì •ìƒì ìœ¼ë¡œ ì„¤ì •ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img6.png"
width="304"
height="85"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img6_hu127809221224869792.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img6_hu6884040885533441460.png 1024w"
loading="lazy"
alt="í™˜ê²½ ë³€ìˆ˜ í™•ì¸"
class="gallery-image"
data-flex-grow="357"
data-flex-basis="858px"
>&lt;/p>
&lt;p>ë‹¤ì‹œ terraformìœ¼ë¡œ kubernetesë¥¼ ì„¤ì¹˜í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤.&lt;/p>
&lt;p>&lt;img src="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img7.png"
width="648"
height="100"
srcset="https://s0okju.github.io/p/openstack-kubernetes-installation-1/img7_hu3244639628797934306.png 480w, https://s0okju.github.io/p/openstack-kubernetes-installation-1/img7_hu9562458381420294757.png 1024w"
loading="lazy"
alt="ë°°í¬ ì™„ë£Œ"
class="gallery-image"
data-flex-grow="648"
data-flex-basis="1555px"
>&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://www.quora.com/Which-Linux-distribution-is-best-suited-for-a-cloud-server-environment-and-why" target="_blank" rel="noopener"
>https://www.quora.com/Which-Linux-distribution-is-best-suited-for-a-cloud-server-environment-and-why&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://github.com/terraform-provider-openstack/terraform-provider-openstack/issues/267" target="_blank" rel="noopener"
>https://github.com/terraform-provider-openstack/terraform-provider-openstack/issues/267&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;a class="link" href="https://askubuntu.com/questions/395212/why-environment-variable-disappears-after-terminal-reopen" target="_blank" rel="noopener"
>https://askubuntu.com/questions/395212/why-environment-variable-disappears-after-terminal-reopen&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item></channel></rss>